/*  AdBridg Connect v2.1.0, copyright AdBridg Inc. All rights reserved. cccf961b:l83ccofe:2zt */
!function i(r,o,a){function s(n,e){if(!o[n]){if(!r[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);throw new Error("Cannot find module '"+n+"'")}e=o[n]={exports:{}};r[n][0].call(e.exports,function(e){var t=r[n][1][e];return s(t||e)},e,e.exports,i,r,o,a)}return o[n].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,u){"use strict";function n(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function g(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}var f=e("../shim.js").polyfills,m=(f.registerBidder,f.config),h=f.deepAccess,b=f.uniques,v=f.isArray,y=f.getWindowTop,_=f.isGptPubadsDefined,w=f.isSlotMatchingAdUnitCode,x=f.logInfo,I=f.logWarn,S=f.getWindowSelf,i=f.mergeDeep,A=f.BANNER,j=f.VIDEO,r="33across",o=["33across_mgni"],E="https://ssc.33across.com/api/v1/hb",s="https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",a="USD",d=/^[a-zA-Z0-9_-]{22}$/,C={SIAB:"siab",INVIEW:"inview",INSTREAM:"instream"},k=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],T={uniqueSiteIds:[]},O="nm";function z(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function R(e){return"".concat(e.bidId)}function B(e,t){return i({},0<arguments.length&&void 0!==e?e:{},{ext:1<arguments.length?t:void 0})}function P(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function D(e){return i({},e,{params:{productId:U(e)}})}function U(e){var t=e.params,e=e.mediaTypes,n=e.banner,e=e.video;return e&&!n&&"instream"===e.context?C.INSTREAM:t.productId===C.INVIEW?t.productId:C.SIAB}function M(e,t,n){e=e.getFloor({currency:a,mediaType:n,size:[t.w,t.h]});if(!isNaN(e.floor)&&e.currency===a)return e.floor}var c={NON_MEASURABLE:O,code:r,aliases:o,supportedMediaTypes:[A,j],gvlid:58,isBidRequestValid:function(e){return!((t=e).bidder!==r&&!o.includes(t.bidder)||!t.params)&&!(null===(h(t,"params.siteId","")||"").trim().match(d))&&function(e){e=h(e,"mediaTypes.banner");return void 0===e||!!Array.isArray(e.sizes)}(e)&&(e=h(t=e,"mediaTypes.video"),t=h(t,"params.video",{}),void 0===e||!!Array.isArray(e.playerSize)&&(!!e.context&&(t=g(g({},e),t),!(!Array.isArray(t.mimes)||0===t.mimes.length)&&(!(!Array.isArray(t.protocols)||0===t.protocols.length)&&((void 0===t.placement||"number"==typeof t.placement)&&("instream"!==e.context||void 0===t.startdelay||"number"==typeof t.startdelay))))));var t},buildRequests:function(e,t){a=e,t=t,n=f.utils.assign({},m.getConfig("ttxSettings")),i=f.utils.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),r=t&&t.uspConsent,t=null==t||null==(t=t.refererInfo)?void 0:t.page,T.uniqueSiteIds=a.map(function(e){return e.params.siteId}).filter(b);var n,i,r,o,a={ttxSettings:n,gdprConsent:i,uspConsent:r,pageUrl:t},s=a.ttxSettings,d=a.gdprConsent,c=a.uspConsent,u=a.pageUrl,p=function(e,t){t=t.map(D),e=e&&e.enableSRAMode;return function(e,n){var i={};return e.forEach(function(e){var t=n(e);i[t]=i[t]||[],i[t].push(e)}),i}(t,!0===e?z:R)}(s,e),l=[];for(o in p)l.push(function(e){var t=e.bidRequests,n=e.gdprConsent,n=void 0===n?{}:n,i=e.uspConsent,r=e.pageUrl,e=e.ttxSettings,o={},a=t[0].params,s=a.siteId,a=a.test;o.imp=[],t.forEach(function(e){o.imp.push(function(e){var t=h(e,"ortb2Imp.ext.gpid"),t={id:e.bidId,ext:g({ttx:{prod:h(e,"params.productId")}},t?{gpid:t}:{})};h(e,"mediaTypes.banner")&&(t.banner=g({},function(i){var e,t=h(i,"mediaTypes.banner",{}),n=function(e){return document.getElementById(e)||document.getElementById(function(e){if(_())for(var t,n=googletag.pubads().getSlots(),i=w(e),r=0;r<n.length;r++)if(i(n[r]))return t=n[r].getSlotElementId(),x("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(t)),t;return I("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(e))}(i.adUnitCode),t=function(e){return!v(e)||2!==e.length||v(e[0])?e.map(P):[P(e)]}(t.sizes);e="function"==typeof i.getFloor?t.map(function(e){var t,n=M(i,e,A);return f.utils.assign({},e,t=n?{ext:{ttx:{bidfloors:[n]}}}:t)}):t;t=function(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}(t),n=function(e){return{ttx:{viewability:{amount:isNaN(e)?e:Math.round(e)}}}}(function(e){return!function(){try{return S()!==y()}catch(e){return 1}}()&&null!==e}(n)?function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=n.w,n=n.h;return"visible"===t.document.visibilityState?function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=n.w,n=n.h,e=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.w,t=t.h,e=e.getBoundingClientRect(),i=e.width,r=e.height,o=e.left,a=e.top,s=e.right,e=e.bottom;(0===i||0===r)&&n&&t&&(s=o+(i=n),e=a+(r=t));return{width:i,height:r,left:o,top:a,right:s,bottom:e}}(e,{w:i,h:n}),i=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},e]);return null===i?0:(n=i.width*i.height,t=e.width*e.height,n/t*100)}(e,t,{w:i,h:n}):0}(n,y(),t):O);return{format:e,ext:n}}(e)));h(e,"mediaTypes.video")&&(t.video=function(e){var t=h(e,"mediaTypes.video",{}),n=h(e,"params.video",{}),i=g(g({},t),n),r={},t=P(i.playerSize[0]),n=t.w,t=t.h,n=(r.w=n,r.h=t,k.forEach(function(e){i.hasOwnProperty(e)&&(r[e]=i[e])}),U(e));r.placement=r.placement||2,n===C.INSTREAM&&(r.startdelay=r.startdelay||0,r.placement=1);"function"!=typeof e.getFloor||(t=M(e,{w:r.w,h:r.h},j))&&f.utils.assign(r,{ext:{ttx:{bidfloors:[t]}}});return r}(e));return t}(e))}),o.site={id:s},o.device=function(){var e=S();return{ext:{ttx:g(g({},function(){var e=S(),t=e.innerWidth,n=e.innerHeight,e=e.screen,e=[Math.max(e.width,e.height),Math.min(e.width,e.height)],i=e[0],e=e[1];if(t<n)return{w:e,h:i};return{w:i,h:e}}()),{},{pxr:e.devicePixelRatio,vp:function(){var e=function(){var e=S();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement;return{w:e.clientWidth,h:e.clientHeight}}(),ah:e.screen.availHeight,mtp:e.navigator.maxTouchPoints})}}}(),r&&(o.site.page=r);o.id=t[0].auctionId,n.consentString&&(o.user=B(o.user,{consent:n.consentString}));Array.isArray(t[0].userIdAsEids)&&0<t[0].userIdAsEids.length&&(o.user=B(o.user,{eids:t[0].userIdAsEids}));o.regs=B(o.regs,{gdpr:Number(n.gdprApplies)}),i&&(o.regs=B(o.regs,{us_privacy:i}));o.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"7.15.0"}]}},t[0].schain&&(o.source=B(o.source,{schain:t[0].schain}));1===a&&(o.test=1);return{method:"POST",url:e&&e.url||"".concat(E,"?guid=").concat(s),data:JSON.stringify(o),options:{contentType:"text/plain",withCredentials:!0}}}({bidRequests:p[o],gdprConsent:d,uspConsent:c,pageUrl:u,ttxSettings:s}));return l},interpretResponse:function(e,t){var n=(e=e.body).seatbid,i=void 0===(e=e.cur)?"USD":e;return v(n)?n.filter(function(e){return v(e.bid)&&0<e.bid.length}).reduce(function(e,t){return e.concat(t.bid.map(function(e){var t=i,n=e.adomain&&e.adomain.length,t={requestId:e.impid,bidderCode:r,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:h(e,"ext.ttx.mediaType",A),currency:t,netRevenue:!0};return n&&(t.meta={advertiserDomains:e.adomain}),t.mediaType===j&&("xml"===h(e,"ext.ttx.vastType","xml")?t.vastXml=t.ad:t.vastUrl=t.ad),t}))},[]):[]},getUserSyncs:function(e,t,o,a){return e=e.iframeEnabled?T.uniqueSiteIds.map(function(e){var t=void 0===(t=(e={gdprConsent:o,uspConsent:a,siteId:e}).siteId)?"zzz000000000003zzz":t,n=void 0===(n=e.gdprConsent)?{}:n,e=e.uspConsent,i=(i=m.getConfig("ttxSettings"))&&i.syncUrl||s,r=n.consentString,n=n.gdprApplies,i={type:"iframe",url:"".concat(i,"&id=").concat(t,"&gdpr_consent=").concat(encodeURIComponent(r),"&us_privacy=").concat(encodeURIComponent(e))};return"boolean"==typeof n&&(i.url+="&gdpr=".concat(Number(n))),i}):[],T.uniqueSiteIds=[],e}};t.exports=e("../shim.js").wrap({spec:c,unitIDKey:"siteId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],2:[function(e,t,m){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=e("../shim.js").polyfills,A=p.chunk,j=p.convertCamelToUnderscore,h=p.convertTypes,b=p.createTrackPixelHtml,E=p.deepAccess,C=p.deepClone,K=p.fill,v=p.getBidRequest,Y=p.getMaxValueFromArray,J=p.getMinValueFromArray,V=p.getParameterByName,y=p.getUniqueIdentifierStr,k=p.isArray,a=(p.isArrayOfNums,p.isEmpty),_=p.isFn,T=p.isNumber,O=p.isPlainObject,z=p.isStr,R=p.logError,W=p.logInfo,l=p.logMessage,w=p.logWarn,B=p.mergeDeep,P=p.transformBidderParamKeywords,x=p.getWindowFromDocument,I=p.Renderer,D=p.config,H=p.getIabSubCategory,g=(p.registerBidder,p.ADPOD),s=p.BANNER,d=p.NATIVE,c=p.VIDEO,$=p.auctionManager,U=p.find,M=p.includes,Q=p.INSTREAM,Z=p.OUTSTREAM,n=p.getStorageManager,ee=p.bidderSettings,N=p.hasPurpose1Consent,te=p.convertOrtbRequestToProprietaryNative,r="appnexus",ne=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],ie=["minduration","maxduration","skip","skipafter","playbackmethod","api"],re=["age","externalUid","segments","gender","dnt","language"],oe=["geo","device_id"],ae=["enabled","dongle","member_id","debug_timeout"],se={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},de=n({gvlid:32,bidderCode:r}),n={code:r,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience"},{code:"defymedia"},{code:"gourmetads"},{code:"matomy"},{code:"featureforward"},{code:"oftmedia"},{code:"adasta"},{code:"beintoo",gvlid:618}],supportedMediaTypes:[s,c,d],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var n,i=(e=te(e)).map(ce),r=U(e,ue),o={},a=(!0===D.getConfig("coppa")&&(o={coppa:!0}),r&&Object.keys(r.params.user).filter(function(e){return M(re,e)}).forEach(function(e){var t,n=j(e);"segments"===e&&k(r.params.user[e])?(t=[],r.params.user[e].forEach(function(e){T(e)?t.push({id:e}):O(e)&&t.push(e)}),o[n]=t):"segments"!==e&&(o[n]=r.params.user[e])}),U(e,le)),s=(a&&a.params&&a.params.app&&(n={},Object.keys(a.params.app).filter(function(e){return M(oe,e)}).forEach(function(e){return n[e]=a.params.app[e]})),U(e,ge)),d=(s&&s.params&&a.params.app&&a.params.app.id&&(h={appid:s.params.app.id}),{}),c={},u=de.getCookie("apn_prebid_debug")||null;if(u)try{d=JSON.parse(u)}catch(e){R("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{u=U(e,fe);u&&u.debug&&(d=u.debug)}d&&d.enabled&&Object.keys(d).filter(function(e){return M(ae,e)}).forEach(function(e){c[e]=d[e]});var u=U(e,pe),u=u?parseInt(u.params.member,10):0,p=e[0].schain,l=U(e,me),g={tags:S(i),user:o,sdk:{source:"pbjs",version:"7.15.0"},schain:p};l&&(g.iab_support={omidpn:"Appnexus",omidpv:"7.15.0"}),0<u&&(g.member_id=u),a&&(g.device=n),s&&(g.app=h);var f,m,h,b,v,p=C(t&&t.ortb2),l=(f=p,m=[],["site.keywords","site.content.keywords","user.keywords","app.keywords","app.content.keywords"].forEach(function(e){e=E(f,e);z(e)&&m.push(e)}),m.map(X)),y=C(D.getConfig("appnexusAuctionKeywords"))||{},u=(Object.keys(y).forEach(function(e){(z(y[e])||T(y[e]))&&(y[e]=[y[e]])}),B.apply(void 0,[{},y].concat(S(l)))),s=P(u),s=(0<s.length&&(s.forEach(q),g.keywords=s),D.getConfig("adpod.brandCategoryExclusion")&&(g.brand_category_uniqueness=!0),c.enabled&&(g.debug=c,W("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(c,null,4))),t&&t.gdprConsent&&(g.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~")&&(p=(h=t.gdprConsent.addtlConsent).substring(h.indexOf("~")+1),g.gdpr_consent.addtl_consent=p.split(".").map(function(e){return parseInt(e,10)}))),t&&t.uspConsent&&(g.us_privacy=t.uspConsent),t&&t.refererInfo&&(l={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")},u=t.refererInfo.canonicalUrl,z(u)&&""!==u&&(l.rd_can=u),g.referrer_detection=l),U(e,L)&&e.filter(L).forEach(function(t){var e=function(e,t){var n=t.mediaTypes.video,i=n.durationRangeSec,n=n.requireExactDuration,r=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,e=e.requireExactDuration,i=J(n),t=Math.floor(t/i);return e?Math.max(t,n.length):t}(t.mediaTypes.video),o=Y(i),e=e.filter(function(e){return e.uuid===t.bidId}),e=K.apply(void 0,S(e).concat([r]));{var a;n?(n=Math.ceil(r/i.length),a=A(e,n),i.forEach(function(t,e){a[e].map(function(e){F(e,"minduration",t),F(e,"maxduration",t)})})):e.map(function(e){return F(e,"maxduration",o)})}return e}(i,t),n=g.tags.filter(function(e){return e.uuid!==t.bidId});g.tags=[].concat(S(n),S(e))}),e[0].userId&&(G(b=[],E(e[0],"userId.criteoId"),"criteo.com",null),G(b,E(e[0],"userId.netId"),"netid.de",null),G(b,E(e[0],"userId.idl_env"),"liveramp.com",null),G(b,E(e[0],"userId.tdid"),"adserver.org","TDID"),G(b,E(e[0],"userId.uid2.id"),"uidapi.com","UID2"),e[0].userId.pubProvidedId&&e[0].userId.pubProvidedId.forEach(function(t){t.uids.forEach(function(e){b.push({source:t.source,id:e.id})})}),b.length&&(g.eids=b)),i[0].publisher_id&&(g.publisher_id=i[0].publisher_id),g),_=t,w=[],x={withCredentials:!0},I="https://ib.adnxs.com/ut/v3/prebid";return N(null==_?void 0:_.gdprConsent)||(I="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==V("apn_test").toUpperCase()&&!0!==D.getConfig("apn_test")||(x.customHeaders={"X-Is-Test":1}),15<s.tags.length?(v=C(s),A(s.tags,15).forEach(function(e){v.tags=e;e=JSON.stringify(v);w.push({method:"POST",url:I,data:e,bidderRequest:_,options:x})})):(s=JSON.stringify(s),w={method:"POST",url:I,data:s,bidderRequest:_,options:x}),w},interpretResponse:function(e,t){var n=this,i=t.bidderRequest,r=(e=e.body,[]);return!e||e.error?(t="in response for ".concat(i.bidderCode," adapter"),e&&e.error&&(t+=": ".concat(e.error)),R(t)):(e.tags&&e.tags.forEach(function(e){var t=(t=e)&&t.ads&&t.ads.length&&U(t.ads,function(e){return e.rtb});t&&(!0===ee.get(i.bidderCode,"allowZeroCpmBids")?0<=t.cpm:0<t.cpm)&&M(n.supportedMediaTypes,t.ad_type)&&((e=function(t,e,n){var i=v(t.uuid,[n]),r=y(),o={adId:r,requestId:t.uuid,cpm:e.cpm,creativeId:e.creative_id,dealId:e.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:e.buyer_member_id,dealPriority:e.deal_priority,dealCode:e.deal_code}};e.adomain&&(o.meta=p.utils.assign({},o.meta,{advertiserDomains:[]}));e.advertiser_id&&(o.meta=p.utils.assign({},o.meta,{advertiserId:e.advertiser_id}));e.buyer_member_id&&(o.meta=p.utils.assign({},o.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(e)}));e.brand_id&&(o.meta=p.utils.assign({},o.meta,{brandId:e.brand_id}));if(e.rtb.video){var a;switch(p.utils.assign(o,{width:e.rtb.video.player_width,height:e.rtb.video.player_height,vastImpUrl:e.notify_url,ttl:3600}),E(i,"mediaTypes.video.context")){case g:var s=H(i.bidder,e.brand_category_id),s=(o.meta=p.utils.assign({},o.meta,{primaryCatId:s}),e.deal_priority);o.video={context:g,durationSeconds:Math.floor(e.rtb.video.duration_ms/1e3),dealTier:s},o.vastUrl=e.rtb.video.asset_url;break;case Z:o.adResponse=t,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=e.rtb.video.content,e.renderer_url&&(s=U(n.bids,function(e){return e.bidId===t.uuid}),a=(a=E(s,"mediaTypes.video.renderer.options"))||E(s,"renderer.options"),o.renderer=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=I.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{t.setRender(he)}catch(e){w("Prebid Error calling setRender on renderer",e)}return t.setEventHandlers({impression:function(){return l("AppNexus outstream video impression event")},loaded:function(){return l("AppNexus outstream video loaded event")},ended:function(){l("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),t}(o.adUnitCode,e,a));break;case Q:o.vastUrl=e.notify_url+"&redir="+encodeURIComponent(e.rtb.video.asset_url)}}else{p.utils.assign(o,{width:e.rtb.banner.width,height:e.rtb.banner.height,ad:e.rtb.banner.content});try{if(e.rtb.trackers)for(var d=0;d<e.rtb.trackers[0].impression_urls.length;d++){var c=e.rtb.trackers[0].impression_urls[d],u=b(c);o.ad+=u}}catch(e){R("Error appending tracking pixel",e)}}return o}(e,t,i)).mediaType=function(e){e=e.ad_type;return e===c?c:e===d?d:s}(t),r.push(e))}),e.debug&&e.debug.debug_info&&(t=(t="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info).replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),l("https://console.appnexus.com/docs/understanding-the-debug-auction"),l(t))),r},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,n){if(e.iframeEnabled&&N(n))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(n,e,t,i){var r,o,a=P;return!0===e&&(r=null,o=D.getConfig("s2sConfig"),O(o)?r=E(o,"endpoint.p1Consent"):k(o)&&o.forEach(function(e){M(e.bidders,t.bids[0].bidder)&&(r=E(e,"endpoint.p1Consent"))}),r&&r.match("/openrtb2/prebid")&&(a=be)),n=h({member:"string",invCode:"string",placementId:"number",keywords:a,publisherId:"number"},n),e&&(n.use_pmt_rule="boolean"==typeof n.usePaymentRule&&n.usePaymentRule,n.usePaymentRule&&delete n.usePaymentRule,u(n.keywords)&&n.keywords.forEach(q),Object.keys(n).forEach(function(e){var t=j(e);t!==e&&(n[t]=n[e],delete n[e])})),n}};function u(e){return k(e)&&0<e.length}function q(e){u(e.value)&&""===e.value[0]&&delete e.value}function ce(n){var t,i={},e=(i.sizes=f(n.sizes),i.primary_size=i.sizes[0],i.ad_types=[],i.uuid=n.bidId,n.params.placementId?i.id=parseInt(n.params.placementId,10):i.code=n.params.invCode,i.allow_smaller_sizes=n.params.allowSmallerSizes||!1,i.use_pmt_rule=n.params.usePaymentRule||!1,i.prebid=!0,i.disable_psa=!0,_((r=n).getFloor)?(e=r.getFloor({currency:"USD",mediaType:"*",size:"*"}),!O(e)||isNaN(e.floor)||"USD"!==e.currency?null:e.floor):r.params.reserve||null),r=(e&&(i.reserve=e),n.params.position?i.position={above:1,below:2}[n.params.position]||0:0!==(r=E(n,"mediaTypes.banner.pos")||E(n,"mediaTypes.video.pos"))&&1!==r&&3!==r||(i.position=3===r?2:r),n.params.trafficSourceCode&&(i.traffic_source_code=n.params.trafficSourceCode),n.params.privateSizes&&(i.private_sizes=f(n.params.privateSizes)),n.params.supplyType&&(i.supply_type=n.params.supplyType),n.params.pubClick&&(i.pubclick=n.params.pubClick),n.params.extInvCode&&(i.ext_inv_code=n.params.extInvCode),n.params.publisherId&&(i.publisher_id=parseInt(n.params.publisherId,10)),n.params.externalImpId&&(i.external_imp_id=n.params.externalImpId),E(n,"ortb2Imp.ext.data.keywords")),r=((z(r)&&""!==r||!a(n.params.keywords))&&(r=X(r),t=O(n.params.keywords)?C(n.params.keywords):{},Object.keys(t).forEach(function(e){(z(t[e])||T(t[e]))&&(t[e]=[t[e]])}),r=B({},t,r),0<(r=P(r)).length&&(r.forEach(q),i.keywords=r)),E(n,"ortb2Imp.ext.data.pbadslot")),o=(r&&(i.gpid=r),E(n,"mediaTypes.".concat(c))),r=E(n,"mediaTypes.video.context"),r=(i.hb_source=o&&"adpod"===r?7:1,n.mediaType!==c&&!o||i.ad_types.push(c),(n.mediaType===c||o&&"outstream"!==r)&&(i.require_asset_url=!0),n.params.video&&(i.video={},Object.keys(n.params.video).filter(function(e){return M(ne,e)}).forEach(function(e){switch(e){case"context":case"playback_method":var t=n.params.video[e],t=k(t)?t[0]:t;i.video[e]=se[e][t];break;case"frameworks":break;default:i.video[e]=n.params.video[e]}}),n.params.video.frameworks&&k(n.params.video.frameworks)&&(i.video_frameworks=n.params.video.frameworks)),o&&(i.video=i.video||{},Object.keys(o).filter(function(e){return M(ie,e)}).forEach(function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof i.video[e]&&(i.video[e]=o[e]);break;case"skip":"boolean"!=typeof i.video.skippable&&(i.video.skippable=1===o[e]);break;case"skipafter":"number"!=typeof i.video.skipoffset&&(i.video.skippoffset=o[e]);break;case"playbackmethod":"number"!=typeof i.video.playback_method&&(t=o[e],1<=(t=k(t)?t[0]:t)&&t<=4&&(i.video.playback_method=t));break;case"api":var t;!i.video_frameworks&&k(o[e])&&(t=o[e].map(function(e){e=4===e?5:5===e?4:e;if(1<=e&&e<=5)return e}).filter(function(e){return e}),i.video_frameworks=t)}})),n.renderer&&(i.video=p.utils.assign({},i.video,{custom_renderer_present:!0})),n.params.frameworks&&k(n.params.frameworks)&&(i.banner_frameworks=n.params.frameworks),U($.getAdUnits(),function(e){return n.transactionId===e.transactionId}));return r&&r.mediaTypes&&r.mediaTypes.banner&&i.ad_types.push(s),0===i.ad_types.length&&delete i.ad_types,i}function f(e){var t=[],n={};if(k(e)&&2===e.length&&!k(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===o(e))for(var i=0;i<e.length;i++){var r=e[i];(n={}).width=parseInt(r[0],10),n.height=parseInt(r[1],10),t.push(n)}return t}function ue(e){return!!e.params.user}function pe(e){return!!parseInt(e.params.member,10)}function le(e){if(e.params)return!!e.params.app}function ge(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function fe(e){return!!e.debug}function L(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===g}function me(e){var t=!1,n=e.params,i=e.params.video;return t=!(t=n.frameworks&&k(n.frameworks)?M(e.params.frameworks,6):t)&&i&&i.frameworks&&k(i.frameworks)?M(e.params.video.frameworks,6):t}function F(e,t,n){a(e.video)&&(e.video={}),e.video[t]=n}function he(e,t){var n=e.adUnitCode;try{var i=document.getElementById(n).querySelectorAll("div[id^='google_ads']");i[0]&&i[0].style.setProperty("display","none")}catch(e){}n=e.adUnitCode;try{var r=document.getElementById(n).querySelectorAll("script[id^='sas_script']");r[0].nextSibling&&"iframe"===r[0].nextSibling.localName&&r[0].nextSibling.style.setProperty("display","none")}catch(e){}e.renderer.push(function(){(x(t)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},function(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}.bind(null,e))})}function G(e,t,n,i){t&&(i?e.push({source:n,id:t,rti_partner:i}):e.push({source:n,id:t}))}function be(e){var n="";return Object.keys(e).forEach(function(t){z(e[t])?""!==e[t]?n+="".concat(t,"=").concat(e[t],","):n+="".concat(t,","):k(e[t])&&(""===e[t][0]?n+="".concat(t,","):e[t].forEach(function(e){n+="".concat(t,"=").concat(e,",")}))}),n=n.substring(0,n.length-1)}function X(e){var i={};return e.split(/\s*(?:,)\s*/).forEach(function(e){var t,n;-1!==e.indexOf("=")?(t=(n=e.split("="))[0],n=n[1],i.hasOwnProperty(t)?i[t].push(n):i[t]=[n]):i.hasOwnProperty(e)||(i[e]=[""])}),i}t.exports=e("../shim.js").wrap({spec:n,unitIDKey:"placementId",floorKey:"reserve",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],3:[function(e,t,n){"use strict";function o(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function a(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}var i=e("../shim.js").polyfills,s=i.generateUUID,d=i.deepSetValue,c=i.deepAccess,u=i.isArray,r=i.isInteger,p=i.logError,l=i.logWarn,g=(i.registerBidder,i.BANNER),f=i.VIDEO,m={mimes:function(e){return Array.isArray(e)&&0<e.length&&e.every(function(e){return"string"==typeof e})},minduration:function(e){return r(e)},maxduration:function(e){return r(e)},protocols:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=10})},w:function(e){return r(e)},h:function(e){return r(e)},startdelay:function(e){return r(e)},placement:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=5})},linearity:function(e){return-1!==[1,2].indexOf(e)},skip:function(e){return-1!==[0,1].indexOf(e)},skipmin:function(e){return r(e)},skipafter:function(e){return r(e)},sequence:function(e){return r(e)},battr:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=17})},maxextended:function(e){return r(e)},minbitrate:function(e){return r(e)},maxbitrate:function(e){return r(e)},boxingallowed:function(e){return-1!==[0,1].indexOf(e)},playbackmethod:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=6})},playbackend:function(e){return-1!==[1,2,3].indexOf(e)},delivery:function(e){return-1!==[1,2,3].indexOf(e)},pos:function(e){return-1!==[0,1,2,3,4,5,6,7].indexOf(e)},api:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=6})}},i={code:"deepintent",supportedMediaTypes:[g,f],aliases:[],isBidRequestValid:function(e){var t=!1;return e&&e.params&&e.params.tagId&&(!("string"==typeof e.params.tagId||e.params.tagId instanceof String)||e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(f)&&!e.mediaTypes[f].hasOwnProperty("context")||(t=!0)),t},interpretResponse:function(e,t){var i=[];if(e&&e.body)try{var n=e.body.seatbid&&e.body.seatbid[0]?e.body.seatbid[0].bid:[];n&&n.forEach(function(e){var t={requestId:(t=e)&&t.impid?t.impid:void 0,cpm:t&&t.price?t.price:0,width:t&&t.w?t.w:0,height:t&&t.h?t.h:0,ad:t&&t.adm?t.adm:"",meta:{advertiserDomains:t&&t.adomain?t.adomain:[]},creativeId:t&&t.crid?t.crid:void 0,netRevenue:!1,currency:t&&t.cur?t.cur:"USD",ttl:300,dealId:t&&t.dealId?t.dealId:void 0},n=function(e){var t,n=new RegExp(/VAST\s+version/);e.adm&&0<=e.adm.indexOf("deepintent_wrapper")?t=g:n.test(e.adm)&&(t=f);return t}(e);n===g?t.mediaType=g:n===f&&(t.mediaType=f,t.vastXml=e.adm),i.push(t)})}catch(e){p(e)}return i},buildRequests:function(e,t){var n,i=e.map(function(e){if(e&&e.params&&e.params.user)return{id:e.params.user.id&&"string"==typeof e.params.user.id?e.params.user.id:void 0,buyeruid:e.params.user.buyeruid&&"string"==typeof e.params.user.buyeruid?e.params.user.buyeruid:void 0,yob:e.params.user.yob&&"number"==typeof e.params.user.yob?e.params.user.yob:null,gender:e.params.user.gender&&"string"==typeof e.params.user.gender?e.params.user.gender:void 0,keywords:e.params.user.keywords&&"string"==typeof e.params.user.keywords?e.params.user.keywords:void 0,customdata:e.params.user.customdata&&"string"==typeof e.params.user.customdata?e.params.user.customdata:void 0}}),r=i;for(n in r)null!==r[n]&&void 0!==r[n]||delete r[n];i={id:s(),at:1,imp:e.map(function(e){var t={};return t={id:e.bidId,tagid:e.params.tagId||"",secure:"https:"===window.location.protocol?1:0,displaymanager:"di_prebid",displaymanagerver:"1.0.0",ext:function(e){return e.params&&e.params.custom?{deepintent:e.params.custom}:{}}(e)},c(e,"mediaTypes.banner")&&(t.banner=function(e){{var t;if(c(e,"mediaTypes.banner"))return!c(e,"mediaTypes.banner.sizes")||e.params.height||e.params.width?{h:e.params.height,w:e.params.width,pos:e&&e.params&&e.params.pos?e.params.pos:0}:(t=c(e,"mediaTypes.banner.sizes"),u(t)&&0<t.length?{h:t[0][1],w:t[0][0],pos:e&&e.params&&e.params.pos?e.params.pos:0}:void 0)}}(e)),c(e,"mediaTypes.video")&&(t.video=function(e){var t={},n=c(e,"mediaTypes.video",{}),e=c(e,"params.video",{}),i={};{var r;Array.isArray(n.playerSize)&&(r=Array.isArray(n.playerSize[0])?n.playerSize[0]:n.playerSize,i.w=r[0],i.h=r[1])}var o=a(a(a({},i),n),e);return Object.keys(m).forEach(function(e){o.hasOwnProperty(e)&&(m[e](o[e])?t[e]=o[e]:l("The OpenRTB video param ".concat(e," has been skipped due to misformating. Please refer to OpenRTB 2.5 spec.")))}),t}(e)),t}),site:function(e){var t={};e&&e.refererInfo&&e.refererInfo.page&&(t.page=e.refererInfo.page,t.domain=e.refererInfo.domain);return t}(t),device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"===navigator.doNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:i&&1===i.length?i[0]:{}},t&&t.uspConsent&&d(i,"regs.ext.us_privacy",t.uspConsent),t&&t.gdprConsent&&(d(i,"user.ext.consent",t.gdprConsent.consentString),d(i,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t=i;return e=c(e,"0.userIdAsEids"),u(e)&&0<e.length&&(d(t,"user.eids",e),d(t,"user.ext.eids",e)),{method:"POST",url:"https://prebid.deepintent.com/prebid",data:JSON.stringify(i),options:{contentType:"application/json"}}},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"https://cdn.deepintent.com/syncpixel.html"}]}};t.exports=e("../shim.js").wrap({spec:i,unitIDKey:"tagId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],4:[function(e,r,a){"use strict";function j(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function E(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?t(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function C(e,t){var n,i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function s(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var n=e("../shim.js").polyfills,l=n.contains,w=n.convertTypes,k=n.deepAccess,T=n.deepClone,O=n.deepSetValue,f=n.getGptSlotInfoForAdUnitCode,x=n.inIframe,K=n.isArray,Y=n.isEmpty,I=n.isFn,z=n.isInteger,R=n.logError,m=n.logWarn,B=n.mergeDeep,h=n.parseGPTSingleSizeArray,P=n.parseQueryStringParameters,D=n.BANNER,b=n.VIDEO,v=n.NATIVE,U=n.config,S=n.CONSTANTS,A=n.getStorageManager,J=n.events,V=n.find,W=(n.registerBidder,n.INSTREAM),H=n.OUTSTREAM,$=n.Renderer,M="ix",Q="roundel",d=[D,b,v],Z=[144,144],ee={JPY:1},te={PBJS:"p",IX:"x"},ne=1,ie=2,re=3,oe=4,ae=5,se=6,de=7,ce=8,ue=9,pe={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},N={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","trustpid.com":""},le=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId"],ge=["mimes","minduration","maxduration"],fe=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"],q="ixdiag",me=!1,L=A({gvlid:10,bidderCode:M}),F=0,G="",he="",be=2;function ve(e){var t,n=c(e),i=k(e,"mediaTypes.video"),r=k(e,"params.video");if(ye(i,r).length)return{};for(t in n.video=r?T(e.params.video):{},n.ext.tid=k(e,"ortb2Imp.ext.tid"),i)-1===fe.indexOf(t)||n.video.hasOwnProperty(t)||(n.video[t]=i[t]);if(n.video.minduration>n.video.maxduration)return R("IX Bid Adapter: video minduration [".concat(n.video.minduration,"] cannot be greater than video maxduration [").concat(n.video.maxduration,"]"),{bidder:M,code:ue}),{};var o=r&&r.context||i&&i.context;if(o&&!n.video.hasOwnProperty("placement")&&(o===W?n.video.placement=1:o===H?k(r,"playerConfig.floatOnScroll")?n.video.placement=5:n.video.placement=4:m("IX Bid Adapter: Video context '".concat(o,"' is not supported"))),!n.video.w||!n.video.h){r=p(k(n,"video.playerSize"))||p(k(e,"params.size"));if(!r)return m("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};n.video.w=r[0],n.video.h=r[1],k(n,"ext.sid")||(n.ext.sid=h(r))}return y(e,n,b),n}function c(e){var t={};return t.id=e.bidId,t.ext={},t.ext.siteID=e.params.siteId.toString(),!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(t.ext.sid=String(e.params.id)),t}function y(e,t,n){var i=null,r=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(i={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),I(e.getFloor)){var o="*",a="*";n&&l(d,n)&&(a=[(n=t[o=n]).w,n.h]);try{r=e.getFloor({mediaType:o,size:a})}catch(e){m("priceFloors module call getFloor failed, error : ",e)}}r?(t.bidfloor=r.floor,t.bidfloorcur=r.currency,t.ext.fl=te.PBJS):i&&(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl=te.IX)}function o(e){return Array.isArray(e)&&2===e.length&&z(e[0])&&z(e[1])}function u(e,t){var n=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length&&void 0!==t?t:[];if(o(n))return n[0]===i[0]&&n[1]===i[1];for(var r=0;r<n.length;r++)if(n[r][0]===i[0]&&n[r][1]===i[1])return!0;return!1}function ye(e,t){var n,i=[],r=(e||m("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit"),C(ge));try{for(r.s();!(n=r.n()).done;){var o=n.value,a=e&&e.hasOwnProperty(o),s=t&&t.hasOwnProperty(o);a||s||i.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){r.e(e)}finally{r.f()}var d=e&&e.hasOwnProperty("protocol"),c=e&&e.hasOwnProperty("protocols"),u=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return d||c||u||p||i.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),i}function p(e){e=0<arguments.length&&void 0!==e?e:[];return o(e)?e:!!o(e[0])&&e[0]}function _(f,m,h,e){var b="https://htlb.casalemedia.com/openrtb/pbjs",t=function(e){var t=[],n={};if(K(e)){var i,r=C(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;N.hasOwnProperty(o.source)&&k(o,"uids.0")&&(n[o.source]=!0,""!=N[o.source]&&(o.uids[0].ext={rtiPartner:N[o.source]}),delete o.uids[0].atype,t.push(o))}}catch(e){r.e(e)}finally{r.f()}}return{toSend:t,seenSources:n}}(k(f,"0.userIdAsEids")),n=t.toSend,i=k(m,"refererInfo.page");if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo){var r=window.headertag.getIdentityInfo();if(r&&"object"===g(r))for(var o in r)!r.hasOwnProperty(o)||!(o=r[o]).responsePending&&o.data&&"object"===g(o.data)&&Object.keys(o.data).length&&!t.seenSources[o.data.source]&&n.push(o.data)}if(m&&m.bidderCode===Q&&!t.seenSources["liveramp.com"])return[];var a,v={},s=U.getConfig("bidderTimeout"),d=(v.id=f[0].bidderRequestId.toString(),v.site={},v.ext={},v.ext.source="prebid",v.ext.ixdiag={},v.imp=[],v.at=1,function(e){for(var n,i=e.map(function(e){return e.transactionId}).filter(function(e,t,n){return n.indexOf(e)===t}),r={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"7.15.0",userIds:function(e){var t=e.userId||{};return le.filter(function(e){return t[e]})}(e[0]),url:window.location.href.split("?")[0]},t=0;t<i.length;t++)!function(t){n=e.filter(function(e){return e.transactionId===i[t]})[0],k(n,"mediaTypes")&&(1<Object.keys(n.mediaTypes).length&&r.mfu++,k(n,"mediaTypes.native")&&r.nu++,k(n,"mediaTypes.banner")&&r.bu++,"outstream"===k(n,"mediaTypes.video.context")&&(r.ou++,X(n)&&(r.ren=!0)),"instream"===k(n,"mediaTypes.video.context")&&r.iu++,r.allu++)}(t);return r}(f));for(a in d)v.ext.ixdiag[a]=d[a];s&&(v.ext.ixdiag.tmax=s),U.getConfig("userSync")&&(v.ext.ixdiag.syncsPerBidder=U.getConfig("userSync").syncsPerBidder);var s=function(){if(L.localStorageIsEnabled()){var n,i={};try{n=JSON.parse(L.getDataFromLocalStorage(q)||"{}")}catch(e){return R("ix can not read ixdiag from localStorage."),null}return Object.keys(n).forEach(function(t){Object.keys(n[t]).forEach(function(e){"number"==typeof n[t][e]&&(i[e]=i[e]?i[e]+n[t][e]:n[t][e])})}),i}}(),y=(Y(s)||(v.ext.ixdiag.err=s),f[0].schain&&(v.source={ext:{schain:f[0].schain}}),0<n.length&&(v.user={},v.user.eids=n),document.referrer&&""!==document.referrer&&(v.site.ref=document.referrer),m&&(m.gdprConsent&&((G=m.gdprConsent).hasOwnProperty("gdprApplies")&&(v.regs={ext:{gdpr:G.gdprApplies?1:0}}),G.hasOwnProperty("consentString")&&(v.user=v.user||{},v.user.ext={consent:G.consentString||""},G.hasOwnProperty("addtlConsent")&&G.addtlConsent&&(v.user.ext.consented_providers_settings={consented_providers:G.addtlConsent}))),m.uspConsent&&(O(v,"regs.ext.us_privacy",m.uspConsent),he=m.uspConsent),i&&(v.site.page=i)),U.getConfig("coppa")&&O(v,"regs.coppa",1),{}),s=(F=f[0].params.siteId,y.s=F,e&&(y.v=e),y.ac="j",y.sd=1,8.1===e&&(y.nf=1),m&&m.bidderCode||"ix"),i=U.getConfig(s),_=[],w=0,x=Object.keys(h),I="".concat(b).concat(P(E(E({},y),{},{r:JSON.stringify(v)}))).length;if(8e3<I)R("IX Bid Adapter: Base request size has exceeded maximum request size.",{bidder:M,code:de});else{var S=I,A=!1;if(i){if("object"===g(i.firstPartyData)){var c,u=i.firstPartyData,p="?";for(c in u)u.hasOwnProperty(c)&&(p+="".concat(encodeURIComponent(c),"=").concat(encodeURIComponent(u[c]),"&"));p=p.slice(0,-1),(e=encodeURIComponent(p).length)<8e3?("page"in v.site?v.site.page+=p:v.site.page=p,S+=e):R("IX Bid Adapter: IX config FPD request size has exceeded maximum request size.",{bidder:M,code:se})}"number"==typeof i.timeout&&(y.t=i.timeout)}for(var l=0;l<x.length;l++)if("break"===function(e){if(8e3<=S||4<=_.length)return"break";for(var t=h[x[e]],n=t.missingImps,t=t.ixImps,i=!1,r=8e3-S,o={ixImps:void 0===t?[]:t,missingBannerImpressions:void 0===n?[]:n},a=Object.keys(o).map(function(e){return o[e]}).filter(function(e){return Array.isArray(e)}).reduce(function(e,t){return e.concat.apply(e,j(t))},[]),s=encodeURIComponent(JSON.stringify({impressionObjects:a})).length;a.length&&r<s;)i=!0,a.pop(),s=encodeURIComponent(JSON.stringify({impressionObjects:a})).length;var d,c,u=h[x[e]].gpid,t=h[x[e]].dfp_ad_unit_code,n=h[x[e]].tid,p=h[x[e]].divId,t=(!u&&t&&p&&(u="".concat(t,"#").concat(p)),a.length&&D in a[0]?(g={id:(g=a[0]).id,banner:{topframe:g.banner.topframe,format:a.map(function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}})}},l=h[x[e]].pos,z(l)&&(g.banner.pos=l),(t||u||n)&&(g.ext={},g.ext.dfp_ad_unit_code=t,g.ext.gpid=u,g.ext.tid=n),"bidfloor"in a[0]&&(g.bidfloor=a[0].bidfloor),"bidfloorcur"in a[0]&&(g.bidfloorcur=a[0].bidfloorcur),v.imp.push(g)):(a.forEach(function(e){return O(e,"ext.gpid",u)}),(l=v.imp).push.apply(l,j(a))),S+=s,k(m,"ortb2")||{}),l=(Y(t)||A||(v.ext.ixdiag.fpd=!0,d=E({},t.site||t.context),Object.keys(d).forEach(function(e){-1===pe.SITE.indexOf(e)&&delete d[e]}),c=E({},t.user),Object.keys(c).forEach(function(e){-1===pe.USER.indexOf(e)&&delete c[e]}),(n=T(v)).site=B({},n.site,d),n.user=B({},n.user,c),"".concat(b).concat(P(E(E({},y),{},{r:JSON.stringify(n)}))).length<8e3?(v.site=B({},v.site,d),v.user=B({},v.user,c),A=!0,g=encodeURIComponent(JSON.stringify(E(E({},d),c))).length,S+=g):R("IX Bid Adapter: FPD request size has exceeded maximum request size.",{bidder:M,code:ce})),h[x[e]].pbadslot),t=h[x[e]].tagId,n=h[x[e]].adUnitCode,g=((l||t||n||p)&&(g=T(v),"".concat(b).concat(P(E(E({},y),{},{r:JSON.stringify(g)}))).length<8e3&&(v.ext.ixdiag.pbadslot=l,v.ext.ixdiag.tagid=t,v.ext.ixdiag.adunitcode=n,v.ext.ixdiag.divId=p)),e===x.length-1);(i||g)&&(l=T(y),g&&!w||(v.ext.ixdiag.sn=w,l.sn=w),w++,l.r=JSON.stringify(v),_.push({method:"GET",url:b,data:l,validBidRequests:f}),S=I,v.imp=[],A=!1)}(l))break}return _}function _e(e,t){if(t)for(var n=0;n<e.length;n++){var i=e[n];if(t[0]===i[0]&&t[1]===i[1]){e.splice(n,1);break}}}function we(e,t){i=c(n=e),(r=n.nativeOrtbRequest).eventtrackers=[{event:1,methods:[1,2]}],r.privacy=1,i.native={request:JSON.stringify(r),ver:"1.2"},i.ext.tid=k(n,"ortb2Imp.ext.tid"),y(n,i,v);var n,i,r=i;0!=Object.keys(r).length&&(t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(r),t[e.transactionId].gpid=k(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=k(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=k(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=k(e,"params.tagId"),n=e.adUnitCode,i=document.getElementById(n)?n:f(n).divId,t[e.transactionId].adUnitCode=n,t[e.transactionId].divId=i)}function xe(e,t,n){(a=c(o=e)).banner={},(r=k(o,"params.size"))&&(a.banner.w=r[0],a.banner.h=r[1],k(a,"ext.sid")||(a.ext.sid=h(r))),a.banner.topframe=x()?0:1,y(o,a,D);var i,r=a,o=u(k(e,"mediaTypes.banner.sizes"),k(e,"params.size")),a=(n.hasOwnProperty(e.transactionId)||(n[e.transactionId]={}),n[e.transactionId].gpid=k(e,"ortb2Imp.ext.gpid"),n[e.transactionId].dfp_ad_unit_code=k(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.transactionId].tid=k(e,"ortb2Imp.ext.tid"),n[e.transactionId].pbadslot=k(e,"ortb2Imp.ext.data.pbadslot"),n[e.transactionId].tagId=k(e,"params.tagId"),n[e.transactionId].pos=k(e,"mediaTypes.banner.pos"),e.adUnitCode),s=document.getElementById(a)?a:f(a).divId,a=(n[e.transactionId].adUnitCode=a,n[e.transactionId].divId=s,o&&(n[e.transactionId].hasOwnProperty("ixImps")||(n[e.transactionId].ixImps=[]),n[e.transactionId].ixImps.push(r)),e),s=t,o=r,n=a.transactionId;s.hasOwnProperty(n)?(i=[],_e(i=s[n].hasOwnProperty("missingSizes")?s[n].missingSizes:i,a.params.size),s[n].missingSizes=i):k(a,"mediaTypes.banner.sizes")&&(_e(i=T(a.mediaTypes.banner.sizes),a.params.size),a={missingSizes:i,impression:o},s[n]=a)}function Ie(e){if("ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===M){var n;if(L.localStorageIsEnabled()){try{n=JSON.parse(L.getDataFromLocalStorage(q)||"{}")}catch(e){m("ix can not read ixdiag from localStorage.")}var t,i=new Date;Object.keys(n).map(function(e){var t=new Date(e);t.setDate(t.getDate()+7)-i<0&&delete n[e]}),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===M&&(t=i.toISOString().slice(0,10),(e=e.arguments[1].code)&&(n[t]=n[t]||{},Number(n[t][e])||(n[t][e]=0),n[t][e]++)),L.setDataInLocalStorage(q,JSON.stringify(n))}}}function Se(t){t.renderer.push(function(){var e=t.adUnitCode,e=document.getElementById(e)?e:f(e).divId;e?window.createIXPlayer(e,t):m("IX Bid Adapter: adUnitCode: ".concat(e," not found on page."))})}function X(e){var t;if("outstream"===k(e,"mediaTypes.video.context"))return!!("object"!==g(t=(t=k(e,"mediaTypes.video.renderer"))||k(e,"renderer"))||!t.url||!t.render)||t.backupOnly}n={code:M,gvlid:10,aliases:[{code:Q,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:d,isBidRequestValid:function(e){me||(J.on(S.EVENTS.AUCTION_DEBUG,Ie),J.on(S.EVENTS.AD_RENDER_FAILED,Ie),me=!0);var t=k(e,"params.video"),n=k(e,"params.size"),i=k(e,"mediaTypes.banner.sizes"),r=k(e,"mediaTypes.video"),o=k(e,"mediaTypes.video.playerSize"),a=e.params.hasOwnProperty("bidFloor"),s=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!l(d,e.mediaType))return m("IX Bid Adapter: media type is not supported."),!1;if(k(e,"mediaTypes.banner")&&!i)return!1;if(n){n=p(n);if(!n)return R("IX Bid Adapter: size has invalid format.",{bidder:M,code:ne}),!1;if(!u(e.sizes,n)&&!u(o,n)&&!u(i,n))return R("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:M,code:ie}),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return R("IX Bid Adapter: siteId must be string or number type.",{bidder:M,code:oe}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return R("IX Bid Adapter: siteId must valid value",{bidder:M,code:oe}),!1;if((a||s)&&!(a&&s&&(o=e.params.bidFloor,i=e.params.bidFloorCur,Boolean("number"==typeof o&&"string"==typeof i&&i.match(/^[A-Z]{3}$/)))))return R("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:M,code:ae}),!1;if(r&&t){n=ve(e).video,a=ye(r,t);if(k(e,"mediaTypes.video.context")===H&&X(e)&&n){s=[k(n,"w"),k(n,"h")];if(!(Z[0]<=s[0]&&Z[1]<=s[1]))return R("IX Bid Adapter: ".concat(s," is an invalid size for IX outstream renderer")),!1}if(a.length)return a.forEach(function(e){R(e,{bidder:M,code:re})}),!1}return void 0===k(o=e,"mediaTypes.native")||o.nativeOrtbRequest&&Array.isArray(o.nativeOrtbRequest.assets)&&0<o.nativeOrtbRequest.assets.length},buildRequests:function(e,t){var n,i,r,o=[],s={},d={},c={},u={};for(n in e.forEach(function(e){var t,n,i,r,o,a=Object.keys(k(e,"mediaTypes",{}));for(t in a)switch(a[t]){case D:xe(e,u,s);break;case b:i=d,o=r=void 0,o=ve(n=e),0!=Object.keys(o).length&&(i[n.transactionId]={},i[n.transactionId].ixImps=[],i[n.transactionId].ixImps.push(o),i[n.transactionId].gpid=k(n,"ortb2Imp.ext.gpid"),i[n.transactionId].dfp_ad_unit_code=k(n,"ortb2Imp.ext.data.adserver.adslot"),i[n.transactionId].pbadslot=k(n,"ortb2Imp.ext.data.pbadslot"),i[n.transactionId].tagId=k(n,"params.tagId"),o=n.adUnitCode,r=document.getElementById(o)?o:f(o).divId,i[n.transactionId].adUnitCode=o,i[n.transactionId].divId=r);break;case v:we(e,c);break;default:m("IX Bid Adapter: ad unit mediaTypes ".concat(t," is not supported"))}}),u)if(u.hasOwnProperty(n))for(var a=u[n].missingSizes,p=(s.hasOwnProperty(n)||(s[n]={}),s[n].hasOwnProperty("missingImps")||(s[n].missingImps=[],s[n].missingCount=0),u[n].impression),l=0;l<a.length;l++){i=e[0],r=p,g=a[l],(r=T(r)).ext.sid=h(g),r.banner.w=g[0],r.banner.h=g[1],y(i,r,D);var g=r;s[n].missingImps.push(g),s[n].missingCount++}return 0<Object.keys(s).length&&o.push.apply(o,j(_(e,t,s,7.2))),0<Object.keys(d).length&&o.push.apply(o,j(_(e,t,d,8.1))),0<Object.keys(c).length&&o.push.apply(o,j(_(e,t,c))),o},interpretResponse:function(e,t){var n=[],i=null;if(e.hasOwnProperty("body")&&e.body.hasOwnProperty("seatbid"))for(var r=e.body,o=r.seatbid,a=0;a<o.length;a++)if(o[a].hasOwnProperty("bid")){for(var s=o[a].bid,d=JSON.parse(t.data.r),c=0;c<s.length;c++){var u=function(t,e,n){if(t)return E(E({},V(n,function(e){return e.bidId===t})),V(e,function(e){return e.id===t}))}(s[c].impid,d.imp,t.validBidRequests);if((i=function(e,t,n){var i={},r=!(!k(e,"exp")||!z(e.exp)),o=k(e,"dealid")||k(e,"ext.dealid"),o=(ee.hasOwnProperty(t)?i.cpm=e.price/ee[t]:i.cpm=e.price/100,i.requestId=e.impid,o&&(i.dealId=o),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype==be?i.vastXml=e.adm:e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl),null);if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{o=JSON.parse(e.adm)}catch(e){m("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==be?(i.width=n.video.w,i.height=n.video.h,i.mediaType=b,i.mediaTypes=n.mediaTypes,i.ttl=r?e.exp:3600):o&&o.native?(i.native={ortb:o.native},i.width=e.w||1,i.height=e.h||1,i.mediaType=v,i.ttl=r?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=D,i.ttl=r?e.exp:300),i.meta={},i.meta.networkId=k(e,"ext.dspid"),i.meta.brandId=k(e,"ext.advbrandid"),i.meta.brandName=k(e,"ext.advbrand"),e.adomain&&0<e.adomain.length&&(i.meta.advertiserDomains=e.adomain),i}(s[c],r.cur,u)).mediaType===b&&X(u)){u=k(r,"ext.videoplayerurl");if(i.renderer=function(e,t){e=$.install({id:e,url:t,loaded:!1});try{e.setRender(Se)}catch(e){return m("Prebid Error calling setRender on renderer",e),null}return t?e:(m("Outstream renderer URL not found"),null)}(s[c].bidId,u),!i.renderer)continue}n.push(i)}if(k(d,"ext.ixdiag.err")&&L.localStorageIsEnabled())try{L.removeDataFromLocalStorage(q)}catch(e){R("ix can not clear ixdiag from localStorage.")}}return n},transformBidParams:function(e,t){return w({siteID:"number"},e)},getUserSyncs:function(e,t){var n=[],i=null;if(void 0!==(i=0<t.length?k(t[0],"body.ext.publishersyncsperbidderoverride"):i)&&0==i)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var r=null;0===(r=U.getConfig("userSync")?U.getConfig("userSync").syncsPerBidder:r)&&(r=i);for(var r=i&&(0===r||r)?r<i?r:i:1,o=0;o<r;o++)n.push({type:"image",url:function(e,t){var n="",i="0";G&&G.hasOwnProperty("gdprApplies")&&(i=G.gdprApplies?"1":"0");G&&G.hasOwnProperty("consentString")&&(n=G.consentString||"");return"https://dsum.casalemedia.com/pbusermatch?origin=prebid&site_id="+F.toString()+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+i+"&gdpr_consent="+n+"&us_privacy="+(he||"")}(r,o)})}return n}};r.exports=e("../shim.js").wrap({spec:n,unitIDKey:"siteId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],5:[function(e,t,D){"use strict";var p=e("../shim.js").polyfills,i=p.buildUrl,l=p.deepAccess,o=p.getGptSlotInfoForAdUnitCode,r=p.getWindowTop,a=p.isArray,g=p.isEmpty,n=p.isEmptyStr,s=p.isStr,d=p.logError,c=p.logInfo,u=p.triggerPixel,f=(p.registerBidder,p.config),m=p.BANNER,h=p.NATIVE,b=p.VIDEO,v=p.getRefererInfo,y=p.Renderer,_=p.convertOrtbRequestToProprietaryNative,w="medianet",x="https://prebid.media.net/video/bundle.js",I={NOT_DETERMINED:0,ABOVE_THE_FOLD:1,BELOW_THE_FOLD:2},S="client_timeout",A="client_bid_won",v=v(),j={};function E(e,t){var n,t=t.refererInfo,e={domain:(e=e||{}).domain||t.domain,page:e.page||t.page,ref:e.ref||function(){try{return window.top.document.referrer}catch(e){return document.referrer}}(),topMostLocation:t.topmostLocation,isTop:e.isTop||t.reachedTop};return p.utils.assign(e,(j.pageMeta||(t=C('link[rel="canonical"]',"href"),e=C('meta[property="og:url"]',"content"),n=C('meta[name="twitter:url"]',"content"),j.pageMeta=p.utils.assign({},t&&{canonical_url:t},e&&{og_url:e},n&&{twitter_url:n})),j.pageMeta))}function C(e,t){var e=function(e,t){try{var n=r().document.querySelector(e);if(null!==n&&n[t])return n[t]}catch(e){}}(e,t);return e&&(t=e,(e=r().document.createElement("a")).href=t,e.href)}function k(e,t){return e.filter(function(e){return e.type===t})}function T(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function U(e){var t={id:e.bidId,transactionId:e.transactionId,ext:{dfp_id:e.adUnitCode,display_count:e.bidRequestsCount},all:e.params},n=(e.ortb2Imp&&(t.ortb2Imp=e.ortb2Imp),l(e,"mediaTypes.banner.sizes")||[]),i=l(e,"mediaTypes.video")||{},r=l(e,"params.video")||{},r=p.utils.assign({},r,i);if(g(r)||(t.video=r),0<n.length&&(t.banner=a(i=n)&&2===i.length&&!a(i[0])?[T(i)]:i.map(T)),e.nativeParams)try{t.native=JSON.stringify(e.nativeParams)}catch(e){d("".concat(w," : Incorrect JSON : bidRequest.nativeParams"))}e.params.crid&&(t.tagid=e.params.crid.toString());r=parseFloat(e.params.bidfloor||e.params.bidFloor),r&&(t.bidfloor=r),n=e.adUnitCode,(i=document.getElementById(n))||-1===n.indexOf("/")||(n=o(n).divId,s(n)&&(i=document.getElementById(n))),r=i&&i.getBoundingClientRect?(n=i.getBoundingClientRect(),(i={}).top_left={y:n.top,x:n.left},i.bottom_right={y:n.bottom,x:n.right},i):null,r&&t.banner&&0!==t.banner.length?(n={top_left:{x:r.top_left.x+window.pageXOffset,y:r.top_left.y+window.pageYOffset},bottom_right:{x:r.bottom_right.x+window.pageXOffset,y:r.bottom_right.y+window.pageYOffset}},t.ext.coordinates=n,t.ext.viewability=R(r.top_left,z(t.banner)),.5<R(n.top_left,z(t.banner))?t.ext.visibility=I.ABOVE_THE_FOLD:t.ext.visibility=I.BELOW_THE_FOLD):t.ext.visibility=I.NOT_DETERMINED,i=function(n){var i=[];"function"==typeof n.getFloor&&[m,b,h].forEach(function(t){n.mediaTypes.hasOwnProperty(t)&&(t==m?n.mediaTypes.banner.sizes.forEach(function(e){O(n,t,e,i)}):O(n,t,"*",i))});return i}(e);return i&&0<i.length&&(t.bidfloors=i),t}function O(e,t,n,i){e=e.getFloor({currency:"USD",mediaType:t,size:n});1<n.length&&(e.size=n),e.mediaType=t,i.push(e)}function z(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}function R(e,t){var n=t.w*t.h,i=P.getWindowSize(),t={x:e.x+t.w,y:e.y+t.h};return 0==n||-1===i.w||-1===i.h?0:function(e,t,n,i){if(e.x>i.x||t.x<n.x||e.y>i.y||t.y<n.y)return 0;return(Math.min(t.x,i.x)-Math.max(e.x,n.x))*(Math.min(t.y,i.y)-Math.max(e.y,n.y))}(e,t,{x:0,y:0},{x:i.w,y:i.h})/n}function M(e,t){return{site:E(e[0].params.site,t),ext:(n=e[0],i=t,r=l(n,"params"),o=l(i,"gdprConsent"),i=l(i,"uspConsent"),a=l(n,"userId"),n=l(n,"schain")||{},s=P.getWindowSize(),d=!(!o||!o.gdprApplies),c=!!i,u=!!f.getConfig("coppa"),p.utils.assign({},{customer_id:r.cid},{prebid_version:AdBridg.globals.version},{gdpr_applies:d},d&&{gdpr_consent_string:o.consentString||""},{usp_applies:c},c&&{usp_consent_string:i||""},{coppa_applies:u},-1!==s.w&&-1!==s.h&&{screen:s},a&&{user_id:a},AdBridg.globals.medianetGlobals.analyticsEnabled&&{analytics:!0},!g(n)&&{schain:n})),id:e[0].auctionId,imp:e.map(U),ortb2:t.ortb2,tmax:t.timeout||f.getConfig("bidderTimeout")};var n,i,r,o,a,s,d,c,u}function B(e,t){var n,t={protocol:"https",hostname:"qsearch-a.akamaihd.net/log",search:(e=e,t=a(t=t)&&t||[],(n={logid:"kfk",evtid:"projectevents",project:"prebid"}).acid=l(t,"0.auctionId")||"",n.cid=AdBridg.globals.medianetGlobals.cid||"",n.crid=t.map(function(e){return l(e,"params.0.crid")||e.adUnitCode}).join("|"),n.adunit_count=t.length||0,n.dn=j.urlData.domain||"",n.requrl=j.urlData.page||"",n.istop=j.urlData.isTop||"",n.event=e.name||"",n.value=e.value||"",n.rd=e.related_data||"",n)};u(i(t))}function N(e){var t=l(e,"context")||"",n=l(e,"vto");"outstream"==t&&n&&(e.renderer=((t=y.install({url:x})).setRender(function(n){window.mnet.queue.push(function(){var e={width:n.width,height:n.height,vastTimeout:n.vto,maxAllowedVastTagRedirects:n.mavtr,allowVpaid:n.avp,autoPlay:n.ap,preload:n.pl,mute:n.mt},t=n.dfp_id,t=o(t).divId||t;window.mnet.mediaNetoutstreamPlayer(n,t,e)})}),t))}window.mnet=window.mnet||{},window.mnet.queue=window.mnet.queue||[],j.urlData={domain:v.domain,page:v.page,isTop:v.reachedTop},AdBridg.globals.medianetGlobals=AdBridg.globals.medianetGlobals||{};var P={code:w,gvlid:142,supportedMediaTypes:[m,h,b],isBidRequestValid:function(e){return e.params?e.params.cid&&s(e.params.cid)&&!n(e.params.cid)?(p.utils.assign(AdBridg.globals.medianetGlobals,!AdBridg.globals.medianetGlobals.cid&&{cid:e.params.cid}),!0):(d("".concat(w," : cid should be a string")),!1):(d("".concat(w," : Missing bid parameters")),!1)},buildRequests:function(e,t){e=M(e=_(e),t);return{method:"POST",url:(t=e.ext.customer_id,"https://prebid.media.net/rtb/prebid?cid="+encodeURIComponent(t)),data:JSON.stringify(e)}},interpretResponse:function(e,t){var n=[];return e&&e.body?(e=e.body.bidList,a(e)&&0!==e.length?(n=e.filter(function(e){return!1===(e=e).no_bid&&0<parseFloat(e.cpm)})).forEach(N):c("".concat(w," : no bids"))):c("".concat(w," : response is empty")),n},getUserSyncs:function(e,t){t=!g(t=t)&&t[0].body&&t[0].body.ext&&a(t[0].body.ext.csUrl)?t[0].body.ext.csUrl:[];return e.iframeEnabled?k(t,"iframe"):e.pixelEnabled?k(t,"image"):void 0},onTimeout:function(e){try{B({name:S,value:e.length,related_data:e[0].timeout||f.getConfig("bidderTimeout")},e)}catch(e){}},onBidWon:function(e){try{B({name:A,value:e.cpm},[e])}catch(e){}},clearMnData:function(){j={}},getWindowSize:function(){return{w:window.screen.width||-1,h:window.screen.height||-1}}};t.exports=e("../shim.js").wrap({spec:P,unitIDKey:"crid",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],6:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a=e("../shim.js").polyfills,s=a._each,d=a._map,c=a.convertTypes,u=a.deepAccess,p=a.deepSetValue,l=a.inIframe,g=a.isArray,f=a.parseSizesInput,m=a.parseUrl,h=a.config,b=(a.registerBidder,a.BANNER),v=a.VIDEO,y=a.includes,_=["startdelay","mimes","minduration","maxduration","startdelay","skippable","playbackmethod","api","protocols","boxingallowed","linearity","delivery","protocol","placement","minbitrate","maxbitrate"],w="hb_pb",x="3.0.3",I="USD",S={britepoolid:"britepoolid",criteoId:"criteoid",fabrickId:"nuestarid",hadronId:"audigentid",id5id:"id5id",idl_env:"lre",IDP:"zeotapid",idxId:"idxid",intentIqId:"intentiqid",lipb:"lipbid",lotamePanoramaId:"lotameid",merkleId:"merkleid",netId:"netid",parrableId:"parrableid",pubcid:"pubcid",quantcastId:"quantcastid",tapadId:"tapadid",tdid:"ttduuid",uid2:"uid2",admixerId:"admixerid",deepintentId:"deepintentid",dmdId:"dmdid",nextrollId:"nextrollid",novatiq:"novatiqid",mwOpenLinkId:"mwopenlinkid",dapId:"dapid",amxId:"amxid",kpuid:"kpuid",publinkId:"publinkid",naveggId:"naveggid",imuid:"imuid",adtelligentId:"adtelligentid"},a={code:"openx",gvlid:69,supportedMediaTypes:[b,v],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return u(e,"mediaTypes.banner")&&t?!!e.params.unit||0<u(e,"mediaTypes.banner.sizes.length"):!(!e.params.unit||!t)},buildRequests:function(e,t){var n,i;return 0===e.length?[]:(n=[],i=(e=r(e.reduce(function(e,t){var n;return(u(n=t,"mediaTypes.video")&&!u(n,"mediaTypes.banner")||n.mediaType===v?e[0]:e[1]).push(t),e},[[],[]]),2))[0],0<(e=e[1]).length&&n.push(function(e,t){var i=[],r=!1,t=A(e,t),n=d(e,function(e){return e.params.unit});t.aus=d(e,function(e){return f(e.mediaTypes.banner.sizes).join(",")}).join("|"),t.divids=d(e,function(e){return encodeURIComponent(e.adUnitCode)}).join(","),t.aucs=d(e,function(e){e=u(e,"ortb2Imp.ext.data.pbadslot");return encodeURIComponent(e||"")}).join(","),n.some(function(e){return e})&&(t.auid=n.join(","));e.some(function(e){return e.params.doNotTrack})&&(t.ns=1);!0!==h.getConfig("coppa")&&!e.some(function(e){return e.params.coppa})||(t.tfcd=1);e.forEach(function(n){var e;n.params.customParams?(e=d(Object.keys(n.params.customParams),function(e){var t=n.params.customParams;return t=t[e],g(t)&&(t=t.join(",")),(e.toLowerCase()+"="+t.toLowerCase()).replace("+",".").replace("/","_")}),e=window.btoa(e.join("&")),r=!0,i.push(e)):i.push("")}),r&&(t.tps=i.join(","));return E(t,b,e),{method:"GET",url:t.ph?"https://u.openx.net/w/1.0/arj":"https://".concat(e[0].params.delDomain,"/w/1.0/arj"),data:t,payload:{bids:e,startTime:new Date}}}(e,t)),0<i.length&&i.forEach(function(e){n.push(function(e,t){t=function(e,t){var n,i,r=u(e,"mediaTypes.video"),t=A([e],t),o=u(e,"params.video")||{},a=u(e,"mediaTypes.video.context"),s=u(e,"mediaTypes.video.playerSize");g(e.sizes)&&2===e.sizes.length&&!g(e.sizes[0])?(n=parseInt(e.sizes[0],10),i=parseInt(e.sizes[1],10)):g(e.sizes)&&g(e.sizes[0])&&2===e.sizes[0].length?(n=parseInt(e.sizes[0][0],10),i=parseInt(e.sizes[0][1],10)):g(s)&&2===s.length&&(n=parseInt(s[0],10),i=parseInt(s[1],10));var d={w:n,h:i},c=e.params.video||e.params.openrtb||{};c.openrtb&&(c=c.openrtb);g(c.imp)&&(c=c.imp[0].video);Object.keys(c).filter(function(e){return y(_,e)}).forEach(function(e){return d[e]=c[e]}),Object.keys(r).filter(function(e){return y(_,e)}).forEach(function(e){return d[e]=r[e]});s={imp:[{video:d}]};t.openrtb=JSON.stringify(s),t.auid=e.params.unit,t.vwd=n||o.vwd,t.vht=i||o.vht,"outstream"===a&&(t.vos="101");o.mimes&&(t.vmimes=o.mimes);e.params.test&&(t.vtest=1);s=u(e,"ortb2Imp.ext.data.pbadslot");s&&(t.aucs=encodeURIComponent(s));return E(t,v,[e]),t}(e,t);return{method:"GET",url:t.ph?"https://u.openx.net/v/1.0/avjp":"https://".concat(e.params.delDomain,"/v/1.0/avjp"),data:t,payload:{bid:e,startTime:new Date}}}(e,t))}),n)},interpretResponse:function(e,t){e=e.body;return((/avjp$/.test(t.url)?v:b)===v?function(e,t){var n=t.bid,t=(t.startTime,[]);{var i,r;void 0!==e&&""!==e.vastUrl&&0<e.pub_rev&&(i=m(e.vastUrl).search||{},(r={}).requestId=n.bidId,e.deal_id&&(r.dealId=e.deal_id),r.ttl=300,r.netRevenue=!0,r.currency=e.currency,r.cpm=parseInt(e.pub_rev,10)/1e3,r.width=parseInt(e.width,10),r.height=parseInt(e.height,10),r.creativeId=e.adid,r.vastUrl=e.vastUrl,r.mediaType=v,e.ph=i.ph,e.colo=i.colo,e.ts=i.ts,t.push(r))}return t}:function(e,t){for(var n=t.bids,i=(t.startTime,e.ads.ad),r=[],o=0;o<i.length;o++){var a=i[o],s=parseInt(a.idx,10),d={};d.requestId=n[s].bidId,a.pub_rev&&(d.cpm=Number(a.pub_rev)/1e3,(s=a.creative[0])&&(d.width=s.width,d.height=s.height),d.creativeId=s.id,d.ad=a.html,a.deal_id&&(d.dealId=a.deal_id),d.ttl=300,d.netRevenue=!0,d.currency=a.currency,a.tbd&&(d.tbd=a.tbd),d.ts=a.ts,d.meta={},a.brand_id&&(d.meta.brandId=a.brand_id),a.adomain&&0<length(a.adomain)?d.meta.advertiserDomains=a.adomain:d.meta.advertiserDomains=[],a.adv_id&&(d.meta.dspid=a.adv_id),r.push(d))}return r})(e,t.payload)},getUserSyncs:function(e,t,n,i){if(e.iframeEnabled||e.pixelEnabled)return[{type:e.iframeEnabled?"iframe":"image",url:u(t,"0.body.ads.pixels")||u(t,"0.body.pixels")||function(e,t){var n=[];e&&(n.push("gdpr="+(e.gdprApplies?1:0)),n.push("gdpr_consent="+encodeURIComponent(e.consentString||"")));t&&n.push("us_privacy="+encodeURIComponent(t));return"".concat("https://u.openx.net/w/1.0/pd").concat(0<n.length?"?"+n.join("&"):"")}(n,i)}]},transformBidParams:function(e,t){return c({unit:"string",customFloor:"number"},e)}};function A(e,t){var r,n=l(),n={ju:t.refererInfo.page,ch:document.charSet||document.characterSet,res:"".concat(screen.width,"x").concat(screen.height,"x").concat(screen.colorDepth),ifr:n,tz:(new Date).getTimezoneOffset(),tws:function(e){var t,n,i=window,r=document,o=r.documentElement;if(e){try{i=window.top,r=window.top.document}catch(e){return}e=r.body,t=i.innerWidth||o.clientWidth||e.clientWidth,n=i.innerHeight||o.clientHeight||e.clientHeight}else t=i.innerWidth||o.clientWidth,n=i.innerHeight||o.clientHeight;return"".concat(t,"x").concat(n)}(n),be:1,bc:e[0].params.bc||"".concat(w,"_").concat(x),dddid:d(e,function(e){return e.transactionId}).join(","),nocache:(new Date).getTime()},i=j("user.data",t.ortb2),i=(0<i.length&&(n.sm=i),j("site.content.data",t.ortb2));return 0<i.length&&(n.scsm=i),e[0].params.platform&&(n.ph=e[0].params.platform),t.gdprConsent&&(void 0!==(i=t.gdprConsent).consentString&&(n.gdpr_consent=i.consentString),void 0!==i.gdprApplies&&(n.gdpr=i.gdprApplies?1:0),"iab"===h.getConfig("consentManagement.cmpApi")&&(n.x_gdpr_f=1)),t&&t.uspConsent&&(n.us_privacy=t.uspConsent),u(e[0],"crumbs.pubcid")&&p(e[0],"userId.pubcid",u(e[0],"crumbs.pubcid")),r=n,i=e[0].userId,s(i,function(e,t){var n,i=S[t];if(S.hasOwnProperty(t))switch(t){case"merkleId":case"uid2":r[i]=e.id;break;case"lipb":r[i]=e.lipbid,Array.isArray(e.segments)&&0<e.segments.length&&(n="liveintent:"+e.segments.join("|"),r.sm="".concat(r.sm?r.sm+",":"").concat(n));break;case"parrableId":r[i]=e.eid;break;case"id5id":r[i]=e.uid;break;case"novatiq":r[i]=e.snowflake;break;default:r[i]=e}}),n=r,e[0].schain&&(n.schain=(t=e[0].schain,"".concat(t.ver,",").concat(t.complete,"!").concat(function(e){var n=["asi","sid","hp","rid","name","domain"];return e.map(function(t){return n.map(function(e){return t[e]||""}).join(",")}).join("!")}(t.nodes)))),n}function j(e,t){var n,t=u(t,e);return Array.isArray(t)&&t.length?(n=t.filter(function(e){return Array.isArray(e.segment)&&0<e.segment.length&&void 0!==e.name&&0<e.name.length}).reduce(function(e,t){var n="object"===i(t.ext)&&t.ext.segtax?"".concat(t.name,"/").concat(t.ext.segtax):t.name;return e[n]=(e[n]||[]).concat(t.segment.map(function(e){return e.id})),e},{}),Object.keys(n).map(function(e,t){return e+":"+n[e].join("|")}).join(",")):""}function E(e,t,n){var i=[],r=!1;n.forEach(function(e){e=function(e,t){var n={},i=h.getConfig("currency.adServerCurrency")||I;"function"==typeof e.getFloor&&(n=e.getFloor({currency:i,mediaType:t,size:"*"}));i=n.floor||e.params.customFloor||0;return Math.round(1e3*i)}(e,t);e?(i.push(e),r=!0):i.push(0)}),r&&(e.aumfs=i.join(","))}t.exports=e("../shim.js").wrap({spec:a,unitIDKey:"unit",floorKey:"customFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],7:[function(e,r,u){"use strict";function g(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function t(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function q(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?t(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=e("../shim.js").polyfills,v=f.logWarn,n=f._each,p=f.isBoolean,y=f.isStr,_=f.isArray,w=f.inIframe,m=f.mergeDeep,x=f.deepAccess,o=f.isNumber,I=f.deepSetValue,S=f.logInfo,a=f.logError,L=f.deepClone,l=f.convertTypes,h=f.uniques,A=(f.registerBidder,f.BANNER),j=f.VIDEO,E=f.NATIVE,C=f.config,F=f.Renderer,k=f.bidderSettings,G=f.convertOrtbRequestToProprietaryNative,s="pubmatic",T="PubMatic: ",O=void 0,X="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),K="Video.Placement param missing",z={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},d={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},c={mimes:d.ARRAY,minduration:d.NUMBER,maxduration:d.NUMBER,startdelay:d.NUMBER,playbackmethod:d.ARRAY,api:d.ARRAY,protocols:d.ARRAY,w:d.NUMBER,h:d.NUMBER,battr:d.ARRAY,linearity:d.NUMBER,placement:d.NUMBER,minbitrate:d.NUMBER,maxbitrate:d.NUMBER,skip:d.NUMBER},R={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},B={ICON:1,LOGO:2,IMAGE:3},P=[{id:R.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:R.TITLE.ID,required:!0},{id:R.IMAGE.ID,required:!0}],Y={1:"PMP",5:"PREF",6:"PMPG"},D={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,i=D.getRendererId("pubmatic",e.rendererCode),e=document.getElementById(e.adUnitCode),r=0;r<window.bluebillywig.renderers.length;r++)if(window.bluebillywig.renderers[r]._id===i){n=window.bluebillywig.renderers[r];break}n?n.bootstrap(t,e):v("".concat(T,": Couldn't find a renderer with ").concat(i))}else v("".concat(T,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){e=X.replace("$RENDERER",e),e=F.install({url:e,loaded:!1,adUnitCode:t});try{e.setRender(D.outstreamRender)}catch(e){v("".concat(T,": Error tying to setRender on renderer"),e)}return e},outstreamRender:function(e){e.renderer.push(function(){D.bootstrapPlayer(e)})},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},J=[A,j,E],U=0,V=!1,W={},H={},M=["pubmatic"],$=["all"];function N(e,t){if(!y(t))return t&&v(T+"Ignoring param key: "+e+", expects string-value, found "+b(t)),O;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map(function(e){return e.trim()}).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||O;case"yob":return parseInt(t)||O;default:return t}}function Q(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(n=e.params.adSlot,y(n)?n.replace(/^\s+/g,"").replace(/\s+$/g,""):(n&&v(s+": adSlot must be a string. Ignoring adSlot"),""));var t=(n=e.params.adSlot).split(":"),n=t[0];if(2==t.length&&(e.params.adUnitIndex=t[1]),t=n.split("@"),e.params.adUnit=t[0],1<t.length)2!=(t=t[1].split("x")).length?v(T+"AdSlot Error: adSlot not in required format"):(e.params.width=parseInt(t[0],10),e.params.height=parseInt(t[1],10));else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(A)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,r=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&r.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=r,1<=e.mediaTypes.banner.sizes.length&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function Z(e){var t,n,i=m(x(e.mediaTypes,"video"),e.params.video);if(i!==O){for(var r in t={},n=e.adUnitCode,x(i,"placement")||v(K+" for "+n),c)i.hasOwnProperty(r)&&(t[r]=function(e,t,n){var i,e="Ignoring param key: "+e+", expects "+n+", found "+b(t);switch(n){case d.BOOLEAN:i=p;break;case d.NUMBER:i=o;break;case d.STRING:i=y;break;case d.ARRAY:i=_}return i(t)?t:(v(T+e),O)}(r,i[r],c[r]));_(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):o(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=O,v(T+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function ee(e,t,n){var i=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==i&&""!==i&&i.hasOwnProperty("segments")){var o=i.segments.length;r+="jw-id="+i.content.id;for(var a=0;a<o;a++)r+="|jw-"+i.segments[a]+"=1";n?void 0===e.dctr||0==e.dctr.length?e.dctr=r:e.dctr+="|"+r:(t=e.ext)&&void 0===t.key_val?t.key_val=r:t.key_val+="|"+r}}function te(e){var t,n,i,r,o,a,s,d,c={},u={},p=e.hasOwnProperty("sizes")?e.sizes:[],l="",g=[],c={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:N("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:N("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?N("currency",e.params.currency):"USD"};if(i=c,(r=e).params.deals&&(_(r.params.deals)?r.params.deals.forEach(function(e){y(e)&&3<e.length?(i.pmp||(i.pmp={private_auction:0,deals:[]}),i.pmp.deals.push({id:e})):v(T+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+e)}):v(T+"Error: bid.params.deals should be an array of strings.")),r=c,a="",(o=e).params.dctr&&(a=o.params.dctr,y(a)&&0<a.length?(o=a.split("|"),a="",o.forEach(function(e){a+=0<e.length?e.trim()+"|":""}),o=a.length,"|"===a.substring(o,o-1)&&(a=a.substring(0,o-1)),r.ext.key_val=a.trim()):v(T+"Ignoring param : dctr with value : "+a+", expects string-value, found empty or non-string value")),ee(c,e),e.hasOwnProperty("mediaTypes"))for(l in e.mediaTypes)switch(l){case A:(t=function(e){var t,n=e.mediaTypes.banner.sizes,i=[];if(n!==O&&_(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=O,v(T+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}0<n.length&&(i=[],n.forEach(function(e){1<e.length&&i.push({w:e[0],h:e[1]})}),0<i.length&&(t.format=i)),t.pos=0,t.topframe=w()?0:1}else v(T+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=O;return t}(e))!==O&&(c.banner=t);break;case E:u.request=JSON.stringify(function(e){var t,n,i,r={assets:[]};for(t in e){if(e.hasOwnProperty(t)){var o={};if(!(r.assets&&0<r.assets.length&&r.assets.hasOwnProperty(t)))switch(t){case R.TITLE.KEY:e[t].len||e[t].length?o={id:R.TITLE.ID,required:e[t].required?1:0,title:{len:e[t].len||e[t].length,ext:e[t].ext}}:v(T+"Error: Title Length is required for native ad: "+JSON.stringify(e));break;case R.IMAGE.KEY:e[t].sizes&&0<e[t].sizes.length?o={id:R.IMAGE.ID,required:e[t].required?1:0,img:{type:B.IMAGE,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:O),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:O),wmin:e[t].wmin||e[t].minimumWidth||(e[t].minsizes?e[t].minsizes[0]:O),hmin:e[t].hmin||e[t].minimumHeight||(e[t].minsizes?e[t].minsizes[1]:O),mimes:e[t].mimes,ext:e[t].ext}}:v(T+"Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case R.ICON.KEY:e[t].sizes&&0<e[t].sizes.length?o={id:R.ICON.ID,required:e[t].required?1:0,img:{type:B.ICON,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:O),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:O)}}:v(T+"Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case R.VIDEO.KEY:o={id:R.VIDEO.ID,required:e[t].required?1:0,video:{minduration:e[t].minduration,maxduration:e[t].maxduration,protocols:e[t].protocols,mimes:e[t].mimes,ext:e[t].ext}};break;case R.EXT.KEY:o={id:R.EXT.ID,required:e[t].required?1:0};break;case R.LOGO.KEY:o={id:R.LOGO.ID,required:e[t].required?1:0,img:{type:B.LOGO,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:O),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:O)}};break;case R.SPONSOREDBY.KEY:case R.BODY.KEY:case R.RATING.KEY:case R.LIKES.KEY:case R.DOWNLOADS.KEY:case R.PRICE.KEY:case R.SALEPRICE.KEY:case R.PHONE.KEY:case R.ADDRESS.KEY:case R.DESC2.KEY:case R.DISPLAYURL.KEY:case R.CTA.KEY:n=H[t],i=void 0,i=n.KEY,o={id:n.ID,required:e[i].required?1:0,data:{type:n.TYPE,len:e[i].len,ext:e[i].ext}}}}o&&o.id&&(r.assets[r.assets.length]=o)}var a=P.length,s=0;return P.forEach(function(e){for(var t=r.assets.length,n=0;n<t;n++)if(e.id==r.assets[n].id){s++;break}}),V=a!=s,r}(e.nativeParams)),V?v(T+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):c.native=u;break;case j:(n=Z(e))!==O&&(c.video=n)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:w()?0:1},_(p)&&1<p.length&&((p=p.splice(1,p.length-1)).forEach(function(e){g.push({w:e[0],h:e[1]})}),t.format=g),c.banner=t;s=c,d=q({},x(e,"ortb2Imp.ext.data")),Object.keys(d).forEach(function(e){"pbadslot"===e?"string"==typeof d[e]&&d[e]&&I(s,"ext.data.pbadslot",d[e]):"adserver"===e?["name","adslot"].forEach(function(e){var t=x(d,"adserver.".concat(e));"string"==typeof t&&t&&(I(s,"ext.data.adserver.".concat(e.toLowerCase()),t),"adslot"===e&&I(s,"ext.dfp_ad_unit_code",t))}):I(s,"ext.data.".concat(e),d[e])});var f=c,m=e,h=-1;return"function"!=typeof m.getFloor||C.getConfig("pubmatic.disableFloors")||[A,j,E].forEach(function(n){var t;f.hasOwnProperty(n)&&(t=[],"banner"===n&&(f[n].w&&f[n].h&&t.push([f[n].w,f[n].h]),_(f[n].format)&&f[n].format.forEach(function(e){return t.push([e.w,e.h])})),0===t.length&&t.push("*"),t.forEach(function(e){var t=m.getFloor({currency:f.bidfloorcur,mediaType:n,size:e});S(T,"floor from floor module returned for mediatype:",n," and size:",e," is: currency",t.currency,"floor",t.floor),"object"!==b(t)||t.currency!==f.bidfloorcur||isNaN(parseInt(t.floor))||(e=parseFloat(t.floor),S(T,"floor from floor module:",e,"previous floor value",h,"Min:",Math.min(e,h)),h=-1===h?e:Math.min(e,h),S(T,"new floor value:",h))}))}),f.bidfloor&&(S(T,"floor from floor module:",h,"impObj.bidfloor",f.bidfloor,"Max:",Math.max(h,f.bidfloor)),h=Math.max(h,f.bidfloor)),f.bidfloor=!isNaN(h)&&0<h?h:O,S(T,"new impObj.bidfloor value:",f.bidfloor),c.hasOwnProperty(A)||c.hasOwnProperty(E)||c.hasOwnProperty(j)?c:O}function ne(e,t){0<(t=t.filter(function(e){return"string"==typeof e||(v(T+"acat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,n){return n.indexOf(e)===t})).length&&(v(T+"acat: Selected: ",t),e.ext.acat=t)}function ie(e){return!0===_(e)&&0<e.length}n(R,function(e){W[e.ID]=e.KEY}),n(R,function(e){H[e.KEY]=e});n={code:s,gvlid:76,supportedMediaTypes:[A,j,E],isBidRequestValid:function(e){if(e&&e.params){if(!y(e.params.publisherId))return v(T+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(j)){var t=x(e.mediaTypes,"video.mimes"),n=x(e,"params.video.mimes");if(!1===ie(t)&&!1===ie(n))return v(T+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[j].hasOwnProperty("context"))return a("".concat(T,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[j].context&&!y(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[j].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(A)||e.mediaTypes.hasOwnProperty(E)?(delete e.mediaTypes[j],v("".concat(T,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(a("".concat(T,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){e=G(e),t&&t.refererInfo&&(n=t.refererInfo);var n,i,r,o,a,s={pageURL:(null==(a=n)?void 0:a.page)||window.location.href,refURL:(null==a?void 0:a.ref)||window.document.referrer},d=(a=s,{id:""+(new Date).getTime(),at:1,cur:["USD"],imp:[],site:{page:a.pageURL,ref:a.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}),c="",u=[],p=[],l=[];if(e.forEach(function(e){(i=L(e)).params.adSlot=i.params.adSlot||"",Q(i),i.mediaTypes&&i.mediaTypes.hasOwnProperty("video")||i.params.hasOwnProperty("video")||i.hasOwnProperty("mediaTypes")&&i.mediaTypes.hasOwnProperty(E)||0!==i.params.width||0!==i.params.height?(s.pubId=s.pubId||i.params.publisherId,(s=function(e,t){var n,i,r;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),z)z.hasOwnProperty(n)&&(i=e[n])&&("object"===b(r=z[n])&&(i=r.f(i,t)),y(i)?t[n]=i:v(T+"Ignoring param : "+n+" with value : "+z[n]+", expects string-value, found "+b(i)));return t}(i.params,s)).transactionId=i.transactionId,""===c?c=i.params.currency||O:i.params.hasOwnProperty("currency")&&c!==i.params.currency&&v(T+"Currency specifier ignored. Only one currency permitted."),i.params.currency=c,i.params.hasOwnProperty("dctr")&&y(i.params.dctr)&&u.push(i.params.dctr),i.params.hasOwnProperty("bcat")&&_(i.params.bcat)&&(p=p.concat(i.params.bcat)),i.params.hasOwnProperty("acat")&&_(i.params.acat)&&(l=l.concat(i.params.acat)),(e=te(i))&&d.imp.push(e)):v(T+"Skipping the non-standard adslot: ",i.params.adSlot,JSON.stringify(i))}),0!=d.imp.length)return d.site.publisher.id=s.pubId.trim(),U=s.pubId.trim(),d.ext.wrapper={},d.ext.wrapper.profile=parseInt(s.profId)||O,d.ext.wrapper.version=parseInt(s.verId)||O,d.ext.wrapper.wiid=s.wiid||t.auctionId,d.ext.wrapper.wv="prebid_prebid_7.15.0",d.ext.wrapper.transactionId=s.transactionId,d.ext.wrapper.wp="pbjs",void 0!==(a=t?k.get(t.bidderCode,"allowAlternateBidderCodes"):void 0)&&(d.ext.marketplace={},t&&1==a&&(a=k.get(t.bidderCode,"allowedAlternateBidderCodes"),M=!_(a)||(a=a.map(function(e){return e.trim().toLowerCase()}).filter(function(e){return!!e}).filter(h)).includes("*")?$:[].concat(g(M),g(a))),d.ext.marketplace.allowedbidders=M.filter(h)),d.user.gender=s.gender?s.gender.trim():O,d.user.geo={},d.user.geo.lat=N("lat",s.lat),d.user.geo.lon=N("lon",s.lon),d.user.yob=N("yob",s.yob),d.device.geo=d.user.geo,d.site.page=s.kadpageurl.trim()||d.site.page.trim(),d.site.domain=(a=d.site.page,(r=document.createElement("a")).href=a,r.hostname),"object"===b(C.getConfig("content"))&&(d.site.content=C.getConfig("content")),"object"===b(C.getConfig("device"))&&(d.device=f.utils.assign(d.device,C.getConfig("device"))),d.device.language=d.device.language&&d.device.language.split("-")[0],I(d,"source.tid",s.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(d.test=1),e[0].schain&&I(d,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(I(d,"user.ext.consent",t.gdprConsent.consentString),I(d,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&I(d,"regs.ext.us_privacy",t.uspConsent),!0===C.getConfig("coppa")&&I(d,"regs.coppa",1),a=d,r=x(r=e,"0.userIdAsEids"),_(r)&&0<r.length&&I(a,"user.eids",r),(e=t&&t.ortb2||{}).site&&(r=(a=d.site).page,o=a.domain,a=a.ref,m(d,{site:e.site}),d.site.page=r,d.site.domain=o,d.site.ref=a),e.user&&m(d,{user:e.user}),e.bcat&&(p=p.concat(e.bcat)),null!=(r=e.ext)&&null!=(o=r.prebid)&&null!=(a=o.bidderparams)&&null!=(r=a[t.bidderCode])&&r.acat?(o=e.ext.prebid.bidderparams[t.bidderCode].acat,ne(d,o)):l.length&&ne(d,l),a=d,0<(r=(r=p).filter(function(e){return"string"==typeof e||(v(T+"bcat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,n){if(3<e.length)return n.indexOf(e)===t;v(T+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)})).length&&(v(T+"bcat: Selected: ",r),a.bcat=r),null!=t&&t.timeout?d.tmax=t.timeout||C.getConfig("bidderTimeout"):d.tmax=null==(e=window)||null==(o=e.PWT)||null==(a=o.versionDetails)?void 0:a.timeout,d.ext.epoch=(new Date).getTime(),"object"===b(C.getConfig("app"))&&(d.app=C.getConfig("app"),d.app.publisher=d.site.publisher,d.app.ext=d.site.ext||O,"object"!==b(d.app.content)&&(d.app.content=d.site.content||O),delete d.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(d),bidderRequest:t}},interpretResponse:function(e,g){var t=[],n="USD",i=JSON.parse(g.data),r=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&_(e.body.seatbid)&&(n=e.body.cur||n,e.body.seatbid.forEach(function(e){e.bid&&_(e.bid)&&e.bid.forEach(function(p){var l={requestId:p.impid,cpm:(parseFloat(p.price)||0).toFixed(2),width:p.w,height:p.h,creativeId:p.crid||p.id,dealId:p.dealid,currency:n,netRevenue:!0,ttl:300,referrer:r,ad:p.adm,pm_seat:e.seat||null,pm_dspid:p.ext&&p.ext.dspid?p.ext.dspid:null,partnerImpId:p.id||""};i.imp&&0<i.imp.length&&i.imp.forEach(function(e){if(p.impid===e.id){var t=l;if((i=p).ext&&null!=i.ext.bidtype)t.mediaType=J[i.ext.bidtype];else{S(T+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n,i=i.adm,r=new RegExp(/VAST\s+version/);if(0<=i.indexOf('span class="PubAPIAd"'))t.mediaType=A;else if(r.test(i))t.mediaType=j;else try{(n=JSON.parse(i.replace(/\\/g,"")))&&n.native&&(t.mediaType=E)}catch(e){v(T+"Error: Cannot parse native reponse for ad response: "+i)}}switch(l.mediaType){case A:break;case j:l.width=(p.hasOwnProperty("w")?p:e.video).w,l.height=(p.hasOwnProperty("h")?p:e.video).h,l.vastXml=p.adm;var o,a,s,d=l,c=g;if(c.bidderRequest&&c.bidderRequest.bids){for(var u=0;u<c.bidderRequest.bids.length;u++)c.bidderRequest.bids[u].bidId===d.requestId&&(o=c.bidderRequest.bids[u].params,a=c.bidderRequest.bids[u].mediaTypes[j].context,s=c.bidderRequest.bids[u].adUnitCode);a&&"outstream"===a&&o&&o.outstreamAU&&s&&(d.rendererCode=o.outstreamAU,d.renderer=D.newRenderer(d.rendererCode,s))}break;case E:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return v(T+"Error: Cannot parse native reponse for ad response: "+t.adm)}if(n&&n.native&&n.native.assets&&0<n.native.assets.length){t.mediaType=E;for(var i=0,r=n.native.assets.length;i<r;i++)switch(n.native.assets[i].id){case R.TITLE.ID:t.native.title=n.native.assets[i].title&&n.native.assets[i].title.text;break;case R.IMAGE.ID:t.native.image={url:n.native.assets[i].img&&n.native.assets[i].img.url,height:n.native.assets[i].img&&n.native.assets[i].img.h,width:n.native.assets[i].img&&n.native.assets[i].img.w};break;case R.ICON.ID:t.native.icon={url:n.native.assets[i].img&&n.native.assets[i].img.url,height:n.native.assets[i].img&&n.native.assets[i].img.h,width:n.native.assets[i].img&&n.native.assets[i].img.w};break;case R.SPONSOREDBY.ID:case R.BODY.ID:case R.LIKES.ID:case R.DOWNLOADS.ID:case R.PRICE:case R.SALEPRICE.ID:case R.PHONE.ID:case R.ADDRESS.ID:case R.DESC2.ID:case R.CTA.ID:case R.RATING.ID:case R.DISPLAYURL.ID:t.native[W[n.native.assets[i].id]]=n.native.assets[i].data&&n.native.assets[i].data.value}t.native.clickUrl=n.native.link&&n.native.link.url,t.native.clickTrackers=n.native.link&&n.native.link.clicktrackers||[],t.native.impressionTrackers=n.native.imptrackers||[],t.native.jstracker=n.native.jstracker||[],t.width||(t.width=0),t.height||(t.height=0)}}}(p,l)}}}),p.ext&&p.ext.deal_channel&&(l.dealChannel=Y[p.ext.deal_channel]||null),l.meta={},p.ext&&p.ext.dspid&&(l.meta.networkId=p.ext.dspid),p.ext&&p.ext.advid&&(l.meta.buyerId=p.ext.advid),p.adomain&&0<p.adomain.length&&(l.meta.advertiserDomains=p.adomain,l.meta.clickUrl=p.adomain[0]),e.ext&&e.ext.buyid&&(l.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),p.ext&&p.ext.marketplace&&(l.bidderCode=p.ext.marketplace),t.push(l)})}))}catch(e){a(e)}return t},getUserSyncs:function(e,t,n,i){var r=""+U;return n&&(r=(r+="&gdpr="+(n.gdprApplies?1:0))+"&gdpr_consent="+encodeURIComponent(n.consentString||"")),i&&(r+="&us_privacy="+encodeURIComponent(i)),!0===C.getConfig("coppa")&&(r+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+r}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+r}]},transformBidParams:function(e,t,n,i){return ee(e,n.bids[0],!0),l({publisherId:"string",adSlot:"string"},e)}};r.exports=e("../shim.js").wrap({spec:n,unitIDKey:"adSlot",floorKey:"kadfloor",floorStr:!0,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],8:[function(e,t,D){"use strict";function i(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=e("../shim.js").polyfills,n=g._each,o=g.convertTypes,f=g.deepAccess,m=g.deepSetValue,a=g.formatQS,h=g.isArray,s=g.isNumber,d=g.isStr,b=g.logError,v=g.logMessage,y=g.logWarn,_=g.mergeDeep,w=g.parseSizesInput,x=(g.registerBidder,g.config),I=g.BANNER,S=g.VIDEO,U=g.find,M=g.Renderer,N=g.getGlobal,A={},j=(x.getConfig("rubicon",function(e){_(A,e.rubicon)}),{1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656"}),E=(n(j,function(e,t){return j[e]=t}),{code:"rubicon",gvlid:52,supportedMediaTypes:[I,S],isBidRequestValid:function(e){if("object"!==l(e.params))return!1;for(var t=0,n=["accountId","siteId","zoneId"];t<n.length;t++)if(e.params[n[t]]=parseInt(e.params[n[t]]),isNaN(e.params[n[t]]))return b("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i,r,o,a,s=z(e,!0);return!!s&&("video"!==s||(i=e,r=!0,s=Object.prototype.toString.call([]),o=Object.prototype.toString.call(0),a={mimes:s,protocols:s,linearity:o,api:s},Object.keys(a).forEach(function(e){Object.prototype.toString.call(f(i,"mediaTypes.video."+e))!==a[e]&&(r=!1,b("Rubicon: mediaTypes.video."+e+" is required and must be of type: "+a[e]))}),r))},buildRequests:function(e,c){var r,t=e.filter(function(e){return"video"===z(e)}).map(function(e){e.startTime=(new Date).getTime();var t,n,i,r,o={id:e.transactionId,test:x.getConfig("debug")?1:0,cur:["USD"],source:{tid:e.transactionId},tmax:c.timeout,imp:[{exp:x.getConfig("s2sConfig.defaultTtl"),id:e.adUnitCode,secure:1,ext:u({},e.bidder,e.params),video:f(e,"mediaTypes.video")||{}}],ext:{prebid:{channel:{name:"pbjs",version:AdBridg.globals.version},cache:{vastxml:{returnCreative:!0===A.returnVast}},targeting:{includewinners:!0,includebidderkeys:!1,pricegranularity:{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:(o=x).getConfig("customPriceBucket")&&o.getConfig("customPriceBucket").buckets}[o.getConfig("priceGranularity")]}},bidders:{rubicon:{integration:A.int_type||"pbjs"}}}}},a=("rubicon"!==e.bidder&&(o.ext.prebid.aliases=u({},e.bidder,"rubicon")),N().installedModules);if(!a||a.length&&-1===a.indexOf("rubiconAnalyticsAdapter")||m(o,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),"function"!=typeof e.getFloor||A.disableFloors)r=parseFloat(f(e,"params.floor"));else{try{t=e.getFloor({currency:"USD",mediaType:"video",size:k(e,"video")})}catch(e){b("Rubicon: getFloor threw an error: ",e)}r="object"!==l(t)||"USD"!==t.currency||isNaN(parseInt(t.floor))?void 0:parseFloat(t.floor)}isNaN(r)||(o.imp[0].bidfloor=r),"object"===l(e.floorData)&&(o.ext.prebid.floors={enabled:!1}),o.imp[0].ext[e.bidder].video.size_id=(a=e,t=parseInt(f(a,"params.video.size_id")),isNaN(t)?"outstream"===f(a,"mediaTypes.".concat(S,".context"))?203:201:t),i=e,r=c,(n=o)&&("object"===l(x.getConfig("app"))?n.app=x.getConfig("app"):n.site={page:C(i,r)},"object"===l(x.getConfig("device"))&&(n.device=x.getConfig("device")),i.params.video.language&&["site","device"].forEach(function(e){n[e]&&("site"===e?n[e].content=g.utils.assign({language:i.params.video.language},n[e].content):n[e]=g.utils.assign({language:i.params.video.language},n[e]))}));var a=o,s=e,a=("object"===l(a.imp[0].video)&&void 0===a.imp[0].video.skip&&(a.imp[0].video.skip=s.params.video.skip),"object"===l(a.imp[0].video)&&void 0===a.imp[0].video.skipafter&&(a.imp[0].video.skipafter=s.params.video.skipdelay),"object"===l(a.imp[0].video)&&void 0===a.imp[0].video.pos&&("atf"===s.params.position?a.imp[0].video.pos=1:"btf"===s.params.position&&(a.imp[0].video.pos=3)),s=k(s,"video"),a.imp[0].video.w=s[0],a.imp[0].video.h=s[1],c.gdprConsent&&("boolean"==typeof c.gdprConsent.gdprApplies&&(d=c.gdprConsent.gdprApplies?1:0),m(o,"regs.ext.gdpr",d),m(o,"user.ext.consent",c.gdprConsent.consentString)),c.uspConsent&&m(o,"regs.ext.us_privacy",c.uspConsent),f(c,"bids.0.userIdAsEids")),s=(a&&a.length&&m(o,"user.ext.eids",a),x.getConfig("user.id")),d=(s&&m(o,"user.id",s),!0===x.getConfig("coppa")&&m(o,"regs.coppa",1),e.schain&&R(e.schain)&&m(o,"source.ext.schain",e.schain),x.getConfig("multibid"));return d&&m(o,"ext.prebid.multibid",d.reduce(function(e,t){var n={};return Object.keys(t).forEach(function(e){n[e.toLowerCase()]=t[e]}),e.push(n),e},[])),T(e,S,o),m(o.imp[0],"ext.prebid.auctiontimestamp",c.auctionStart),o.ext.prebid.storedrequest=void 0,o.imp[0].ext.prebid.storedrequest=void 0,{method:"POST",url:"https://".concat(A.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:e}});return!0!==A.singleRequest?t.concat(e.filter(function(e){return"banner"===z(e)}).map(function(e){var i=E.createSlotParams(e,c);return{method:"GET",url:"https://".concat(A.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:E.getOrderedParams(i).reduce(function(e,t){var n=i[t];return d(n)&&""!==n||s(n)?"".concat(e).concat(B(t,n),"&"):e},"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})):(r=e.filter(function(e){return"banner"===z(e)}).reduce(function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e},{}),t.concat(Object.keys(r).reduce(function(t,e){var n,i;return n=r[e],i=10,n.map(function(e,t){return t%i==0?n.slice(t,t+i):null}).filter(function(e){return e}).forEach(function(e){var i=E.combineSlotUrlParams(e.map(function(e){return E.createSlotParams(e,c)}));t.push({method:"GET",url:"https://".concat(A.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:E.getOrderedParams(i).reduce(function(e,t){var n=i[t];return d(n)&&""!==n||s(n)?"".concat(e).concat(B(t,n),"&"):e},"")+"slots=".concat(e.length,"&rand=").concat(Math.random()),bidRequest:e})}),t},[])))},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,i=/^eid_|^tpid_/,r=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter(function(e){return i.test(e)})).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(Object.keys(e).filter(function(e){return n.test(e)})).concat(["tk_flint","x_source.tid","l_pb_bid_id","x_source.pchain","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return r.concat(Object.keys(e).filter(function(e){return-1===r.indexOf(e)}))},combineSlotUrlParams:function(r){var i,o;return 1===r.length?r[0]:(i=r.reduce(function(t,n,i){return Object.keys(n).forEach(function(e){t.hasOwnProperty(e)||(t[e]=new Array(r.length)),t[e].splice(i,1,n[e])}),t},{}),o=new RegExp("^([^;]*)(;\\1)+$"),Object.keys(i).forEach(function(e){var t=i[e].join(";"),n=t.match(o);i[e]=n?n[1]:t}),i)},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var n,i=e.params,r=k(e,"banner"),o=p(i.latLong||[],2),a=o[0],o=o[1],s={account_id:i.accountId,site_id:i.siteId,zone_id:i.zoneId,size_id:r[0],alt_size_ids:r.slice(1).join(",")||void 0,rp_floor:.01<=(i.floor=parseFloat(i.floor))?i.floor:void 0,rp_secure:"1",tk_flint:"".concat(A.int_type||"pbjs_lite","_v7.15.0"),"x_source.tid":e.transactionId,l_pb_bid_id:e.bidId,"x_source.pchain":i.pchain,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:i.userId,"p_geo.latitude":isNaN(parseFloat(a))?void 0:parseFloat(a).toFixed(4),"p_geo.longitude":isNaN(parseFloat(o))?void 0:parseFloat(o).toFixed(4),"tg_fl.eid":e.code,rf:C(e,t)};if("function"==typeof e.getFloor&&!A.disableFloors){try{n=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){b("Rubicon: getFloor threw an error: ",e)}s.rp_hard_floor="object"!==l(n)||"USD"!==n.currency||isNaN(parseInt(n.floor))?void 0:n.floor}r={1:"atf",3:"btf"}[f(e,"mediaTypes.banner.pos")]||"",s.p_pos="atf"===i.position||"btf"===i.position?i.position:r,a=x.getConfig("user.id");return a&&(s.ppuid=a),e.userIdAsEids&&e.userIdAsEids.forEach(function(t){try{var e;"adserver.org"===t.source?(s.tpid_tdid=t.uids[0].id,s["eid_adserver.org"]=t.uids[0].id):"liveintent.com"===t.source?(s["tpid_liveintent.com"]=t.uids[0].id,s["eid_liveintent.com"]=t.uids[0].id,t.ext&&Array.isArray(t.ext.segments)&&t.ext.segments.length&&(s["tg_v.LIseg"]=t.ext.segments.join(","))):"liveramp.com"===t.source?s.x_liverampidl=t.uids[0].id:"id5-sync.com"===t.source?s["eid_id5-sync.com"]="".concat(t.uids[0].id,"^").concat(t.uids[0].atype,"^").concat(t.uids[0].ext&&t.uids[0].ext.linkType||""):s["eid_".concat(t.source)]="".concat(t.uids[0].id,"^").concat(t.uids[0].atype||""),s.ppuid||(e=U(t.uids,function(e){return e.ext&&"ppuid"===e.ext.stype}))&&e.id&&(s.ppuid=e.id)}catch(e){y("Rubicon: error reading eid:",t,e)}}),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(s.gdpr=Number(t.gdprConsent.gdprApplies)),s.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(s.us_privacy=encodeURIComponent(t.uspConsent)),s.rp_maxbids=t.bidLimit||1,T(e,I,s),!0===x.getConfig("coppa")&&(s.coppa=1),e.schain&&R(e.schain)&&(s.rp_schain=E.serializeSupplyChain(e.schain)),s},serializeSupplyChain:function(e){var t,n;return R(e)?(t=e.ver,n=e.complete,e=e.nodes,"".concat(t,",").concat(n,"!").concat(E.serializeSupplyChainNodes(e))):""},serializeSupplyChainNodes:function(e){var n=["asi","sid","hp","rid","name","domain"];return e.map(function(t){return n.map(function(e){return encodeURIComponent(t[e]||"")}).join(",")}).join("!")},interpretResponse:function(s,e){var r,d,c,u=e.bidRequest;return(s=s.body)&&"object"===l(s)?s.seatbid?(e=f(s,"ext.errors.rubicon"),Array.isArray(e)&&0<e.length&&y("Rubicon: Error in video response"),r=[],s.seatbid.forEach(function(i){(i.bid||[]).forEach(function(e){var t={requestId:u.bidId,currency:s.cur||"USD",creativeId:e.crid,cpm:e.price||0,bidderCode:i.seat,ttl:300,netRevenue:!1!==A.netRevenue,width:e.w||f(u,"mediaTypes.video.w")||f(u,"params.video.playerWidth"),height:e.h||f(u,"mediaTypes.video.h")||f(u,"params.video.playerHeight")},n=(e.id&&(t.seatBidId=e.id),e.dealid&&(t.dealId=e.dealid),e.adomain&&m(t,"meta.advertiserDomains",Array.isArray(e.adomain)?e.adomain:[e.adomain]),f(e,"ext.bidder.rp.advid")&&m(t,"meta.advertiserId",e.ext.bidder.rp.advid),f(s,"ext.responsetimemillis.rubicon"));u&&n&&(u.serverResponseTimeMs=n),f(e,"ext.prebid.type")===S?(t.mediaType=S,m(t,"meta.mediaType",S),(n=f(e,"ext.prebid.targeting"))&&"object"===l(n)&&(t.adserverTargeting=n),e.ext.prebid.cache&&"object"===l(e.ext.prebid.cache.vastXml)&&e.ext.prebid.cache.vastXml.cacheId&&e.ext.prebid.cache.vastXml.url?(t.videoCacheKey=e.ext.prebid.cache.vastXml.cacheId,t.vastUrl=e.ext.prebid.cache.vastXml.url):n&&n.hb_uuid&&n.hb_cache_host&&n.hb_cache_path&&(t.videoCacheKey=n.hb_uuid,t.vastUrl="https://".concat(n.hb_cache_host).concat(n.hb_cache_path,"?uuid=").concat(n.hb_uuid)),e.adm&&(t.vastXml=e.adm),e.nurl&&(t.vastUrl=e.nurl),!t.vastUrl&&e.nurl&&(t.vastUrl=e.nurl),"outstream"===f(u,"mediaTypes.video.context").toLowerCase()&&(t.renderer=function(e){e=M.install({id:e.adId,url:A.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:A.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{e.setRender(q)}catch(e){y("Prebid Error calling setRender on renderer",e)}return e}(t))):y("Rubicon: video response received non-video media type"),r.push(t)})}),r):(e=s.ads,c=0,"object"!==l(u)||Array.isArray(u)||"video"!==z(u)||"object"!==l(e)||(e=e[u.adUnitCode]),!Array.isArray(e)||e.length<1?[]:e.reduce(function(e,t,n){var i,r,o,a;return t.impression_id&&d===t.impression_id?c++:d=t.impression_id,"ok"===t.status&&((i=Array.isArray(u)?u[n-c]:u)&&"object"===l(i)?(r={requestId:i.bidId,currency:"USD",creativeId:t.creative_id||"".concat(t.network||"","-").concat(t.advertiser||""),cpm:t.cpm||0,dealId:t.deal,ttl:300,netRevenue:!1!==A.netRevenue,rubicon:{advertiserId:t.advertiser,networkId:t.network},meta:{advertiserId:t.advertiser,networkId:t.network,mediaType:I}},t.creative_type&&(r.mediaType=t.creative_type),t.adomain&&(r.meta.advertiserDomains=Array.isArray(t.adomain)?t.adomain:[t.adomain]),t.creative_type===S?(r.width=i.params.video.playerWidth,r.height=i.params.video.playerHeight,r.vastUrl=t.creative_depot_url,r.impression_id=t.impression_id,r.videoCacheKey=t.impression_id):(r.ad=(o=t.script,a=t.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(a,"'>\n<script type='text/javascript'>").concat(o,"<\/script>\n</div>\n</body>\n</html>")),a=p(j[t.size_id].split("x").map(function(e){return Number(e)}),2),r.width=a[0],r.height=a[1]),r.rubiconTargeting=(Array.isArray(t.targeting)?t.targeting:[]).reduce(function(e,t){return e[t.key]=t.values[0],e},{rpfl_elemid:i.adUnitCode}),e.push(r)):b("Rubicon: bidRequest undefined at index position:".concat(n),u,s)),e},[]).sort(function(e,t){return(t.cpm||0)-(e.cpm||0)})):[]},getUserSyncs:function(e,t,n,i){if(!P&&e.iframeEnabled)return e={},n&&("boolean"==typeof n.gdprApplies&&(e.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(e.gdpr_consent=n.consentString)),i&&(e.us_privacy=encodeURIComponent(i)),e=Object.keys(e).length?"?".concat(a(e)):"",P=!0,{type:"iframe",url:"https://".concat(A.syncHost||"eus",".rubiconproject.com/usync.html")+e}},transformBidParams:function(e,t){return o({accountId:"number",siteId:"number",zoneId:"number"},e)}});function C(e,t){t=e.params.referrer||t.refererInfo.page;return e.params.secure?t.replace(/^http:/i,"https:"):t}function q(e){var t,n=document.getElementById(e.adUnitCode),i=((t=(t=n).querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),(t=(t=(t=n).querySelector("script[id^='sas_script']"))&&t.nextSibling)&&"iframe"===t.localName&&t.style.setProperty("display","none"),e.renderer.getConfig());e.renderer.push(function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:i.align||"center",position:i.position||"append"},closeButton:i.closeButton||!1,label:i.label||void 0,collapse:i.collapse||!0})})}function k(e,t){var r,n=e.params;return"video"===t?(t=[],n.video&&n.video.playerWidth&&n.video.playerHeight?t=[n.video.playerWidth,n.video.playerHeight]:Array.isArray(f(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?t=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&0<e.sizes.length&&Array.isArray(e.sizes[0])&&1<e.sizes[0].length&&(t=e.sizes[0]),t):(t=[],Array.isArray(n.sizes)?t=n.sizes:void 0!==f(e,"mediaTypes.banner.sizes")?t=O(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&0<e.sizes.length?t=O(e.sizes):y("Rubicon: no sizes are setup or found"),r=[15,2,9],t.sort(function(e,t){var n=r.indexOf(e),i=r.indexOf(t);return-1<n||-1<i?-1===n?1:-1===i?-1:n-i:e-t}))}function T(e,t,a){function n(e,t,n){var i,r,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],e=(e=e,r=t,"data"===(i=n)&&Array.isArray(e)?e.filter(function(e){return e.segment&&f(e,"ext.segtax")&&s[r]&&-1!==s[r].indexOf(f(e,"ext.segtax"))}).map(function(e){e=e.segment.filter(function(e){return e.id}).reduce(function(e,t){return e.push(t.id),e},[]);if(0<e.length)return e.toString()}).toString():"object"===l(e)&&!Array.isArray(e)||void 0===e?void 0:(Array.isArray(e)?e.filter(function(e){if("object"!==l(e)&&void 0!==e)return e.toString();y("Rubicon: Filtered value: ",e,"for key",i,": Expected value to be string, integer, or an array of strings/ints")}):e).toString()),o=d[n]&&o?"".concat(d[n]):"data"===n?"".concat(d[t],"iab"):"".concat(d[t]).concat(n);a[o]=a[o]?a[o].concat(",",e):e}var i={user:{ext:{data:c({},e.params.visitor)}},site:{ext:{data:c({},e.params.inventory)}}},r=(e.params.keywords&&(i.site.keywords=h(e.params.keywords)?e.params.keywords.join(","):e.params.keywords),_({},e.ortb2||{},i)),i=f(e.ortb2Imp,"ext")||{},o=f(e.ortb2Imp,"ext.data")||{},e=f(e,"ortb2Imp.ext.gpid"),s={user:[4],site:[1,2,5,6]},d={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"};t===I?(["site","user"].forEach(function(t){Object.keys(r[t]).forEach(function(e){"site"===t&&"content"===e&&r[t][e].data?n(r[t][e].data,t,"data"):"ext"!==e?n(r[t][e],t,e):r[t][e].data&&Object.keys(r[t].ext.data).forEach(function(e){n(r[t].ext.data[e],t,e,!1)})})}),Object.keys(o).forEach(function(e){"adserver"!==e?n(o[e],"site",e):"gam"===o[e].name&&n(o[e].adslot,name,e)}),e&&(a.p_gpid=e),a["tg_i.pbadslot"]&&delete a["tg_i.dfp_ad_unit_code"]):(Object.keys(i).length&&_(a.imp[0].ext,i),e&&(a.imp[0].ext.gpid=e),_(a,r))}function O(e){return w(e).reduce(function(e,t){t=parseInt(j[t],10);return t&&e.push(t),e},[])}function z(e,t){var n,t=1<arguments.length&&void 0!==t&&t;if("object"===l(f(n=e,"params.video"))&&void 0!==f(n,"mediaTypes.".concat(S)))if(-1===["outstream","instream"].indexOf(f(e,"mediaTypes.".concat(S,".context"))))t&&b("Rubicon: mediaTypes.video.context must be outstream or instream");else{if(!(k(e,"video").length<2))return t&&v("Rubicon: making video request for adUnit",e.adUnitCode),"video";t&&b("Rubicon: could not determine the playerSize of the video")}else{if(0!==k(e,"banner").length)return t&&v("Rubicon: making banner request for adUnit",e.adUnitCode),"banner";t&&b("Rubicon: could not determine the sizes for banner request")}}function R(e){var t=!1,n=["asi","sid","hp"];return e.nodes&&!(t=e.nodes.reduce(function(e,t){return e&&n.every(function(e){return t.hasOwnProperty(e)})},!0))&&b("Rubicon: required schain params missing"),t}function B(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var P=!1;t.exports=e("../shim.js").wrap({spec:E,unitIDKey:"zoneId",floorKey:"floor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],9:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function a(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function s(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var d=e("../shim.js").polyfills,c=d.tryAppendQueryString,u=d.logMessage,p=d.logError,l=d.isEmpty,g=d.isStr,f=d.isPlainObject,m=d.isArray,h=d.logWarn,b=d.BANNER,v=d.VIDEO,y=(d.registerBidder,d.config),_=d.getStorageManager,w="triplelift",x=!0,I=null,S=_({gvlid:28,bidderCode:w}),_={gvlid:28,code:w,supportedMediaTypes:[b,v],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var n,i="https://tlx.3lift.com/header/auction?",e=function(e,t){var n={},i=e[0].schain,t=function(e){var t={},n={},i={},e=e.ortb2||{},r=function(){var e=S.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return p("Triplelift: error parsing JSON: ",e),null}}(),o=d.utils.assign({},e.site),e=d.utils.assign({},e.user);if(r){e.data=e.data||[];try{e.data.push({name:"www.1plusx.com",ext:r})}catch(e){p("Triplelift: error adding 1plusX segments: ",e)}}C(n,o),C(i,e),l(n)||(t.context=n);l(i)||(t.user=i);return t}(t),e=(n.imp=e.map(function(e,t){t={id:t,tagid:e.params.inventoryCode,floor:function(e){var t=null;if("function"==typeof e.getFloor)try{var n=e.getFloor({currency:"USD",mediaType:A(e)?"video":"banner",size:"*"});"object"!==r(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){p("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}(e)};return A(e)&&(t.video=function(e){e=a(a({},e.params.video),e.mediaTypes.video);try{e.w||(e.w=e.playerSize[0][0]),e.h||(e.h=e.playerSize[0][1])}catch(e){h("Video size not defined",e)}"instream"===e.context&&(e.placement=1);"outstream"===e.context&&(e.placement?-1===[3,4,5].indexOf(e.placement)&&(u("video.placement value of ".concat(e.placement," is invalid for outstream context. Setting placement to 3")),e.placement=3):e.placement=3);return delete e.playerSize,e}(e)),e.mediaTypes.banner&&!j(e)&&(t.banner={format:e.sizes.filter(O).map(function(e){return{w:e[0],h:e[1]}})}),l(e.ortb2Imp)||(t.fpd=function(e){var t={},n={};C(n,e.ext),l(n)||(t.context=n);return t}(e.ortb2Imp)),t}),[].concat(s(function(e){return k(e,"tdid","adserver.org","TDID")}([e[0]])),s(function(e){return k(e,"idl_env","liveramp.com","idl")}([e[0]])),s(function(e){return k(e,"criteoId","criteo.com","criteoId")}([e[0]])),s(function(e){return k(e,"pubcid","pubcid.org","pubcid")}([e[0]])),s(function(e){var n=["adserver.org","liveramp.com","criteo.com","pubcid.org"],i=[];e.userIdAsEids&&e.userIdAsEids.forEach(function(t){try{var e;-1===n.indexOf(t.source)&&(e=t.uids.map(function(e){return{id:e.id,ext:{rtiPartner:t.source}}}),i.push({source:t.source,uids:e}))}catch(e){h("Triplelift: Error attempting to add ".concat(t," to bid request"),e)}});return i}(e[0]))));0<e.length&&(n.user={ext:{eids:e}});e=function(e,t){var n={};l(e)||(n.schain=a({},e));l(t)||(n.fpd=a({},t));return n}(i,t);l(e)||(n.ext=e);return n}(e,t);return i=c(i,"lib","prebid"),i=c(i,"v","7.15.0"),t&&t.refererInfo&&(n=t.refererInfo.page,i=c(i,"referrer",n)),t&&t.timeout&&(i=c(i,"tmax",t.timeout)),t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(x=t.gdprConsent.gdprApplies,i=c(i,"gdpr",x.toString())),void 0!==t.gdprConsent.consentString&&(I=t.gdprConsent.consentString,i=c(i,"cmp_cs",I))),t&&t.uspConsent&&(i=c(i,"us_privacy",t.uspConsent)),(i=!0===y.getConfig("coppa")?c(i,"coppa",!0):i).lastIndexOf("&")===i.length-1&&(i=i.substring(0,i.length-1)),u("tlCall request built: "+i),{method:"POST",url:i,data:e,bidderRequest:t}},interpretResponse:function(e,t){var s=t.bidderRequest;return(e.body.bids||[]).map(function(e){var t=s,n={},i=e.width||1,r=e.height||1,o=e.deal_id||"",a=e.crid||"",t=t.bids[e.imp_id];return 0!=e.cpm&&e.ad&&(n={requestId:t.bidId,cpm:e.cpm,width:i,height:r,netRevenue:!0,ad:e.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:e.tl_source,meta:{}},A(t)&&"video"===e.media_type&&(n.vastXml=e.ad,n.mediaType="video",n.ttl=3600),e.advertiser_name&&(n.meta.advertiserName=e.advertiser_name),e.adomain&&e.adomain.length&&(n.meta.advertiserDomains=e.adomain),e.tl_source&&"hdx"==e.tl_source&&(A(t)&&"video"===e.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),e.tl_source&&"tlx"==e.tl_source&&(n.meta.mediaType="native")),n})},getUserSyncs:function(e,t,n,i){var r,e=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(e)return r="https://eb2.3lift.com/sync?","image"===e&&(r=c(r,"px",1),r=c(r,"src","prebid")),null!==I&&(r=c(r,"gdpr",x),r=c(r,"cmp_cs",I)),[{type:e,url:r=i?c(r,"us_privacy",i):r}]}};function A(e){return E(e)&&(j(e)||E(e=e)&&"outstream"===e.mediaTypes.video.context.toLowerCase())}function j(e){return E(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function E(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function C(t,n){l(n)||Object.keys(n).forEach(function(e){null!=n[e]&&(t[e]=n[e])})}function k(e,t,n,i){return e.map((a=t,function(e){return e&&e.userId&&e.userId[a]})).filter(T(t)).map((r=n,o=i,function(e){return{source:r,uids:[{id:e.id||e,ext:{rtiPartner:o}}]}}));var r,o,a}function T(i){return function(e,t,n){e=!!e&&(g(e)?!!e:f(e)&&!m(e)&&!l(e)&&e.id&&g(e.id)&&!!e.id);return e||void 0===n[0]||h("Triplelift: invalid ".concat(i," userId format")),e}}function O(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.exports=e("../shim.js").wrap({spec:_,unitIDKey:"inventoryCode",floorKey:"floor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":43}],10:[function(e,t,n){t.exports=e(9)},{"../shim.js":43}],11:[function(e,t,n){var o=e("./utils.js");t.exports=o.wrapAsync(function(n,i){var r,e=!1,t=n.method||(n.data?"POST":"GET");window.XMLHttpRequest?(r=new window.XMLHttpRequest).onreadystatechange=o.wrapAsync(function(){if(4===r.readyState){var e=r.status;if(200<=e&&e<300||304===e){if(n.rawProcessor)try{n.rawProcessor(r)}catch(e){o.err("AjaxRawProcFail",e)}if(n.parseResponseJson)try{var t=JSON.parse(r.responseText||"null");i(null,t,r)}catch(e){i({err:e,type:"parse"},"",r)}else i(null,r.responseText,r)}else i(0===e?{err:"",type:"timeout"}:{err:r.statusText,type:"status="+e},"",r)}}):(e=!0,(r=new window.XDomainRequest).onload=o.wrapAsync(function(){if(n.rawProcessor)try{n.rawProcessor(r)}catch(e){o.err("AjaxRawProcFail",e)}if(n.parseResponseJson)try{var e=JSON.parse(r.responseText||"null");i(null,e,r)}catch(e){i({err:e,type:"parse"},"",r)}else i(null,r.responseText,r)}),r.onerror=o.wrapAsync(function(e){i({err:e,type:"error"},"",r)}),r.ontimeout=o.wrapAsync(function(e){i({err:e,type:"timeout"},"",r)}),r.onprogress=function(){}),r.open(t,n.url),0!==n.max_ms&&(r.timeout=n.max_ms||3e3,o.logl("at","Ajax >",n.url,r.timeout)),e||(n.withCredentials&&(r.withCredentials=!0),o.each(n.headers,function(e,t){r.setRequestHeader(t,e)}),n.preflight&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",n.contentType||"text/plain")),r.send("POST"===t&&n.data)})},{"./utils.js":45}],12:[function(e,n,d){function i(){for(var e="",t=0;t<10;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e}function s(e,t,n,i,r){x[e]||(x[e]=[]),x[e].push(r),I[e]=i,S[e]||(S[e]=setTimeout(function(){o(e,t)},n))}function o(e,t){var n,i;clearTimeout(S[e]),S[e]=!1,x[e]&&x[e].length&&(n=I[e],i=e===b?"1//"+x[e].length+n:"",i+=x[e].join(n),x[e]=[],A(e,t,i))}function r(e,t){return j(e)+"`"+j(t)}function a(e){var t=[];return m.each(e,function(e){e=e.split("x");2==e.length&&t.push(r(e[0],e[1]))}),t.join(".")}function l(e,i){var r="";return e.rawbid&&e.rawbid.meta&&(r=[],m.each(e.rawbid.meta,function(e,t){var n=O[String(t).toLowerCase()];n&&(m.isarr(e)||(e=[e]),m.each(e,function(e){r.push(n+i.id(e))}))}),r=r.join(".")),r}function c(e,t){var n,i,r,o,a,s,d,c,u=e._origin?t.id(e._origin.config.unit.unique_id):"",p=(u?(p=(m.dts()-e.ts)/1e3,p=0|Math.max(0,e.extras.ttl-p),u+="@"+m.b62(p)):u=m.b62(0|e.ms),[u]);return(e._bid_cpm||e.extras.dealid)&&(u=t.id(e.width+"x"+e.height),n=m.b62(e.extras.ttl),i=e.extras.cur?t.id(e.extras.cur):"",r=e.extras.nr?1:0,o=v[e.extras.mediaType]||0,a=e.extras.crid!==e.config.id?t.id(e.extras.crid):"",s=e.extras.dealid?t.id(e.extras.dealid):"",d=e.cpm,c=l(e,t),p=p.concat([u,n,i,r,o,a,s,d,c]),e._bid_cpm!=e.cpm&&(p.push(e._bid_cpm),p.push(e._min_cpm),e.blocked&&p.push(t.id(e.blocked)))),p.join(",")}function u(){this.reset()}function p(){var e,n,i;clearTimeout(g),g=!1,f?g=setTimeout(p,100):(e=B,B={},f=R,R=new u,n=[],i=0,m.each(e,function(e,t){t=t+":"+e.join(":");i+=t.length,n.push(t),3e3<i+f.length&&(A(13,3,n.join("&b=")+"&bi="+f.data.join(",")),n=[],i=0)}),i&&A(13,3,n.join("&b=")+"&bi="+f.data.join(",")),f=!1)}var g,f,m=e("./utils.js"),h=e("./config.js"),b=3,v={banner:1,native:2,video:3},y=i(),_="aX0",w=(d.id=[2,_,y].join(","),""),x=(h.afterConsent(function(e,t,n){try{w=(window.__tcfapi?"2":window.__cmp?"1":"0")+(window.__uspapi?"1":"0")+n,e&&(w+=".g"+(e.gdprApplies?"Y":"N")+(e.consentString||"")),t&&(w+=".u"+(t.version||0)+(t.uspString||""))}catch(e){m.err("ClogErr",e)}e&&e.gdprApplies||(_=(_=String((document.cookie.match(/_adb=([^;]+)/)||[""]).pop()))||"a2"+(new Date).getTime().toString(36)+i(),m.cw("_adb",_,365),d.id=[2,_,y].join(","))}),{}),I={},S={},A=(d.flushNow=function(){for(var e in x)o(e)},function(e,t,n){if(document.body){var i=d.id,r=x[b]&&x[b].length?(r=x[b].join("&e="),x[b]=[],r):"",o=m.vp(),a=m.url(),o=j(o.w)+"."+j(o.h)+"."+j(o.y)+"."+j(document.body.clientHeight)+"."+(a.is_top?1:0)+"."+(document.hidden?1:0),s="https://adspsp.com/pt/"+h.getId()+"/"+e+"/"+t+"/?a="+i+"&aa="+w+"&b="+n+"&e="+r+"&c="+encodeURIComponent(a.href)+"&d="+encodeURIComponent(a.referrer)+"&f="+m.pgts().join(".")+"&g="+m.perfts()+"&u=cccf961b:l83ccofe:2zt&v="+o,i=E();for(i&&(s+="&m="+i),s=h.deca(s),m.each(C,function(e,t){m.isarr(e)||(e=[e]),m.each(e,function(e){s+="&"+t+"="+encodeURIComponent(e)})});k.length;)delete C[k.pop()];m.each(T,function(e,t){s+="&"+t+"="+encodeURIComponent(e)}),T={},s+=D(),m.mock()?m.logl("mock","bypass px",s):m.pixel(s,!0)}else setTimeout(function(){A(e,t,n)},50)}),j=function(e){return(parseInt(e,10)||0).toString(36)},t=[],E=(d.mod=function(e){-1===t.indexOf(e)&&t.push(e)},function(){return t.length?t.join(""):""}),C={},k=(d.meta=m.thread(function(e,t){C[e]=t}),[]),T=(d.metaqx=m.thread(function(e,t){-1==k.indexOf(e)&&k.push(e),C[e]?m.isarr(C[e])||(C[e]=[C[e]]):C[e]=[],C[e].push(t)}),{}),O=(d.ctr=m.thread(function(e,t){(t=void 0===t?1:t)&&(T[e]=(T[e]||0)+t)}),d.auctionConfigured=m.thread(function(e){var i=[],n=(e.eachUnit(function(e){var n=[],t=a(e.all_sizes);e.eachBidReqConf(function(e){var t=e.bidder_id+"@"+(t=e.bidder_unit_id,String(t).replace(/[^\d\w-]/,"")),e=a(e.all_sizes);n.push(t+"^"+e)}),i.push(e.id+"^"+t+":"+n.join(","))}),e.instancectr+"//"+i.length+"-"+i.join("_"));e.eachUnit(function(e){var t=z("auctionConfigured",e);n+="&bu="+[e.unique_id,encodeURIComponent(t.dom_id),encodeURIComponent(t.gpt_path)].join(",")}),A(1,2,n)}),{advertisername:"0",advertiserdomains:"1",adomain:"1",advertiserid:"2",buyerid:"3",networkid:"4",brandid:"5",brandname:"6",dspid:"7",primarycatid:"8"}),z=function(t,e){var n="",i="";try{n=e.get("dom_id").replace(/[:,]+/g,""),i=e.get("gpt_slot").getAdUnitPath().replace(/[:,]+/g,"")}catch(e){m.log(t,"failed to encode ids",e)}return{dom_id:n,gpt_path:i}},R=(u.prototype.reset=function(){this.ids={},this.data=[],this.length=0},u.prototype.id=function(e){var t;return e=String(e).replace(/,/,"_"),this.ids[e]||(t=encodeURIComponent(e),this.length+=t.length,this.ids[e]=m.b62(this.data.push(t)-1)),this.ids[e]},d.auctionCompleted=m.thread(function(t){var a=new u,n=[],i=0;t.eachUnit(function(r){var e=z("bidRendered",r),e=[a.id(t.instancectr),a.id(t.id),a.id(r.id),a.id(r.unique_id),a.id(e.dom_id),a.id(e.gpt_path)].join(","),o=[];r.eachBidReqConf(!1,function(e){var i=a.id(e.bidder_id)+","+a.id(e.bidder_unit_id);e.responses.length?m.each(e.responses,function(e){var t=r.getWinner()===e?1:"",n=i,e=c(e,a);e&&(n+=","+t+","+e),o.push(n)}):o.push(i)}),encoded_unit=e+":"+o.join(":"),i+=encoded_unit.length,n.push(encoded_unit),3e3<i+a.length&&(A(11,3,n.join("&b=")+"&bi="+a.data.join(",")),a.reset(),n=[],i=0)}),i&&A(11,3,n.join("&b=")+"&bi="+a.data.join(","))}),d.bidRendered=m.thread(function(e,t,n){var i=z("bidRendered",e.config.unit),r=[e.config.unit.auction.instancectr,e.config.unit.id],t=(r.push(e.config.bidder_id),r.push(e.config.bidder_unit_id),r.push(e.cpm),r.push(e.width),r.push(e.height),r.push(e.config.unit.unique_id),r.push(t),r.push(encodeURIComponent(i.dom_id)),r.push(encodeURIComponent(i.gpt_path)),new u),i=l(e,t),t=t.data,i=(i&&(e.extras.anfo=i,e.extras.anfd=t),JSON.stringify(e.extras));"{}"!=i&&r.push(encodeURIComponent(i));t=(n?5:1)+":"+r.join(",");h.libSettings().record_bidids&&(t+="&b=4:"+[e.config.unit.unique_id,e.config.unit.id,e.id].join(",")),s(12,2,100,"&b=",t)}),d.enhRendered=m.thread(function(e,t,n){e=[e,t,j(n.advertiserId),j(n.campaignId),j(n.creativeId),j(n.versionId)];s(12,1,100,"&b=","3:"+e.join(","))}),d.gptRendered=m.thread(function(e,t,n){var i=z("gptRendered",t);s(12,2,100,"&b=","2:"+[e.instancectr,t.id,j(n.advertiserId),j(n.campaignId),j(n.creativeId),n.isEmpty||"",j(n.lineItemId),n.size?r(n.size[0],n.size[1]):"",j(n.sourceAgnosticCreativeId),j(n.sourceAgnosticLineItemId),t.unique_id,encodeURIComponent(i.dom_id),encodeURIComponent(i.gpt_path)].join(","))}),d.gptViewed=m.thread(function(e,t,n){var i=z("gptViewed",t);s(15,2,100,"&b=","1:"+[e.instancectr,t.id,t.unique_id,encodeURIComponent(i.dom_id),encodeURIComponent(i.gpt_path)].join(","))}),new u),B={},P=(d.lateBid=m.thread(function(e){var t=z("lateBid",e.config.unit),t=[R.id(e.config.unit.auction.instancectr),R.id(e.config.unit.auction.id),R.id(e.config.unit.id),R.id(e.config.unit.unique_id),R.id(t.dom_id),R.id(t.gpt_path)].join(","),e=[R.id(e.config.bidder_id),R.id(e.config.bidder_unit_id),"",c(e,R)].join(",");B[t]||(B[t]=[]),B[t].push(e),g=g||setTimeout(p,500)}),m.onerr(function(){try{var t="";m.each(arguments,function(e){null!=e&&("object"==typeof e?e=e.stack?(e.message||"")+" "+e.stack:JSON.stringify(e):"string"!=typeof e&&"number"!=typeof e&&(e=e.toString?e.toString():String(e)),t+=" "+e)}),t=t.substr(0,300)+(300<t.length?"...":""),t="500.1:"+m.perfts()+":"+t,s(b,1,1e3,"&e=",t)}catch(e){m.isdebug()&&console.error("AdBridg error report failed: ",e)}}),d.rec=m.thread(function(e){s(17,1,500,"&b=",e)}),m.onrec(d.rec),{}),D=(d.sqz=m.thread(function(e,t,n,i,r){var o,a=t+"."+i;P[a]||(P[a]={qk:t,qd:i,s:!1,d:[]},t&&(P[a].s=new u)),!1===t?P[a].d.push(r):(m.isarr(n)||(n=[n]),o=[],m.each(n,function(e){o.push(P[a].s.id(e))}),o=o.join(","),P[a].d.push(o+":"+r)),s(18,1,e,"","")}),function(){var e=P,n=(P={},x[18]=[],"");return m.each(e,function(t,e){t.qk&&(n+="&"+t.qk+"="+t.s.data.join(",")),m.each(t.d,function(e){n+="&"+t.qd+"="+e})}),n});d.init=m.thread(function(){s(19,1,100,"","")})},{"./config.js":14,"./utils.js":45}],13:[function(e,t,n){var h=e("./utils"),b=(e("./unit"),e("./analytics")),v=e("./modules"),y=e("./config"),_=0;t.exports=function(){this.instancectr=++_,this.id=h.genID("A"),this.uuid=h.genUUID(),this.ts=0,this.jsts=0,this.jstsend,this.max_ms,y.afterConsent(function(e,t){i=e,r=t}),this.ajax_ms=y.libSettings().ajax_ms,"function"==typeof this.ajax_ms&&(this.ajax_ms=this.ajax_ms());var i,r,d,o=this,a={},s=[],c=[],u=[],p=!1,l=[],g=!1,f=[],t=(this.addUnit=function(e){return c.push(e),u.push(e.alias),e.auction=o,e.eachBidder(function(e,t){!t.uspSupport&&r&&"Y"===r.uspString[2]||a[e]||(a[e]=t,.5<Math.random()?s.push(e):s.unshift(e))}),o.max_ms=o.max_ms?Math.min(o.max_ms,e.max_ms):e.max_ms,(!o.ajax_ms||o.ajax_ms<o.max_ms)&&(o.ajax_ms=o.max_ms+200),o},this.ctUnits=function(){return c.length},this.hasUnit=function(){return 0<c.length},this.eachUnit=function(e){h.each(c,e)},this.findUnit=function(e){for(var t=0;t<c.length;++t)if(e(c[t]))return c[t];return!1},this.eachBidRequest=function(e,n){"function"==typeof e&&(n=e,e=!1),this.eachUnit(function(t){t.eachBidReqConf(e,function(e){n(t,e)})})},this.getUnitByBidReqId=function(t){var n=!1;return o.eachUnit(function(e){e.getBidReqConf(t)&&(n=e)}),n},this.getBidRequest=function(t){var n=!1;return o.eachUnit(function(e){n=n||e.getBidReqConf(t)}),n},this.getBid=function(e){for(var t=0;t<c.length;++t){var n=c[t].getBid(e);if(n)return n}return!1},this.markBidEmpty=function(e){var t=o.getUnitByBidReqId(e);t?t.addEmptyBid(e):h.err("Cannot mark bid empty: unknown id",e)},this.markBidderEmpty=function(t){o.eachUnit(function(e){e.markEmpty(t)})},this.isDone=function(){return p},this.lock=function(e){-1==l.indexOf(e)&&(h.log("Auction ",o.id," locked: ",e),l.push(e))},this.unlock=h.wrapAsync(function(e){var t=l.indexOf(e);-1==t?h.log("Auction ",o.id," lock not found: ",e):(l.splice(t,1),h.log("Auction ",o.id," unlocked: ",e,l),!l.length&&g&&g())}),this.onHalt=function(e){f.push(e)},this.execute=function(e){o.ts=h.dts(),o.jsts=(new Date).getTime();var t=y.libSettings().fbo,n=("function"==typeof t&&(s=t(a)),d="started",v.trigger("auction.before_bids",o),h.log("Auction",o.id,"starting with",c.length,"units:",u,"/ bidders:",s,"/ timeout:",o.max_ms),d="inProgress",b.auctionConfigured(o),v.trigger("auction.start",o),h.wrapAsync(function(){p||(p=!0,v.trigger("auction.bidding_done",o),o.eachUnit(function(e){e.halt()}),d="completed",o.jstsend=(new Date).getTime(),b.auctionCompleted(o),v.trigger("auction.complete",o),h.each(f,function(e){h.thread(e)()}),e(o))})),i=h.wrapAsync(function(){l.length?(h.log("Auction ",o.id,"waiting on locks",l),g=n):n()}),r=0;o.eachUnit(function(e){e.onReady(h.wrapAsync(function(){p||++r>=c.length&&(h.log("Auction ",o.id," received bids for ",r," / ",c.length," units. Duration: ",h.dts()-o.ts,"ms"),i())}))}),h.each(s,function(e){var t=a[e];h.thread(function(){t.execute(o)})()}),setTimeout(function(){p||(h.log("Auction ",o.id," timing out with ",r," / ",c.length," units completed. Duration: ",h.dts()-o.ts,"ms"),i())},o.max_ms)},[]),m={};this.getBdrReqId=function(e){return t[e]||(t[e]=h.genID("R")),t[e]},this.toPrebidBidderReq=function(e){var n,t;return m[e]||(a[e],n=[],this.eachBidRequest(e,function(e,t){n.push(t.toPrebid())}),t={referer:(t=h.url()).href,stack:[t.href],reachedTop:window.top===window,numIframes:0|!(window.top===window),domain:t.domain,page:t.href,topmostLocation:t.href},m[e]={auctionId:this.uuid,auctionStart:this.jsts,bidderCode:e,bidderRequestId:this.getBdrReqId(e),bids:n,gdprConsent:i,uspConsent:(r||{}).uspString,timeout:this.max_ms,refererInfo:t}),m[e]},this.toPrebidBidderReqs=function(){var n=[];return h.each(a,function(e,t){n.push(this.toPrebidBidderReq(t))}.bind(this)),n},this.toPrebid=function(){var e=this.toPrebidBidderReqs(),n=[],i=[],r=[],o=[],a=[],s=[];return this.eachUnit(function(e){var t=e.toPrebidAdUnit(),t=(n.push(t),i.push(t.code),e.toPrebidResults());r=r.concat(t.noBids),o=o.concat(t.bidsReceived),a=a.concat(t.winningBids),s=s.concat(t.prebidWinningBids)}),{auctionId:this.uuid,timestamp:this.jsts,auctionEnd:this.jstsend,auctionStatus:d,adUnits:n,adUnitCodes:i,labels:void 0,bidderRequests:e,noBids:r,bidsReceived:o,winningBids:a,timeout:this.max_ms,prebidWinningBids:s}}}},{"./analytics":12,"./config":14,"./modules":18,"./unit":44,"./utils":45}],14:[function(g,e,t){function f(e,t,n){var i=t.mapping_rules;if(!i)return h.log("NO MAPPING RULES: ",t),0;var r,o=e.get("gpt_slot"),a=o.getAdUnitPath(),s=e.get("gpt_sizes"),d=e.get("dom_id"),c=e.get("dom_ad_class");for(r in i){if(!i.hasOwnProperty(r))return;var u=i[r],p=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if("vp.max_width"==r&&u<p)return;if("vp.min_width"==r&&p<u)return;if("lib"==r.substr(0,3)){p=n[r.substr(4)];if(("function"==typeof p&&p(o,a,s,d))!=u)return}if("gpt.adunit"==r&&u!=a)return;if("gpt.adunit_regex"==r&&!new RegExp(u,"i").test(a))return;if("gpt.domid"==r&&u!=d)return;if("gpt.domid_regex"==r&&!new RegExp(u,"i").test(d))return;if("gpt.has_size"==r&&!s.match(u))return;if("gpt.no_size"==r&&s.match(u))return;if("adb.ad_class"==r&&u!=c)return;if("adb.ad_class_regex"==r&&!new RegExp(u,"i").test(c))return}return h.log("Unit mapped: ",d,"->",t.alias),1}function m(e,t){return{id:t[0],alias:t[1],size:t[2],other_sizes:t[3]||[],min_cpm:t[4],max_ms:t[5],settings:t[6]||{},rule_order:t[7],mapping_rules:t[8],bid_req_confs:t[9]}}function n(n,i,r){t.afterConsent(function(e){if(e&&e.gdprApplies&&!e.consentString)return h.log("GDPR skip register",n,e);var t;v[n]?h.err("Duplicate bidder alias "+n):(t={bidder_id:r[0],settings:r[1]||{},mutate:r[2]||!1},v[n]=new i(n,t.bidder_id,t.settings,e,o),v[n].alias=n,v[n].id=t.bidder_id,v[n].settings=t.settings,v[n].mutate=t.mutate||!1,y[String(t.bidder_id)]=n)})}var h=g("./utils"),b=(g("./ajax"),{c:2418030,s:{track_imps:!0,bid_strategy:".05:.01-.3,.01:.3-1.2,.05:1.2-5.5,.01:5.5-5.7,.05:5.7-6.35,.01:6.35-6.6,.05:6.6-6.85,.01:6.85-7.05,.05:7.05-7.35,.01:7.35-7.55,.05:7.55-9,.1:9-10.5,.5:10.5-21,1:21-35,.25:35-37,1:37-40,.5:40-44,2:44-50",usp:{image:!0,iframe:!0,delay:3e3},gamconfig_defer:function(e){window.useAdBridgGamConfig=!0,window.useAdBridg="a",e()},gamconfig_fulfillment:function(e){990<h.vp().w&&h.url().title.match(/homepage/i)&&h.each(e,function(e){"dlb1"==!e.ad_class||(e.size_map=[{sizes:[[728,90],[970,90]],viewport:[800,0]}],e.size=[[728,90],[970,90]]),AdBridg.cmd.push([e])}),String(window.location.search).match("disableDFP")?h.each(e,function(e){var t=document.getElementById(e.dom_id),n=h.isarr(e.size[0]),i=n?e.size[0]:e.size,n=n?e.size.map(function(e){return e.join("x")}).join(", "):e.size.join("x"),r="display:inline-block;margin:1px 5px;background:rgba(255,255,255,0.3)";t.innerHTML="<div style='display:block; width: "+i[0]+"px; height: "+i[1]+"px; background: rebeccapurple; color: white;'><span style='"+r+"'><b>DOM ID</b> <span>"+e.dom_id+"</span></span><span style='"+r+"'><b>GAM Pos</b> <span>"+e.targeting.pos+"</span></span><br><span style='"+r+"'><b>GAM Path</b> <span>"+e.gpt_path+"</span></span><br><span style='"+r+"'><b>Allowed Sizes</b> <span>"+n+"</span></span></div>"}):AdBridg.cmd.push(e)},initfn:function(){h.load("https://js-sec.indexww.com/ht/p/180447-192872210293780.js"),h.cfuspfn(function(e){return"i"===e.t||18===e.a&&(e=!AdBridg.global("hltlpx"),AdBridg.global("hltlpx",!0),e)})},gpt_clear_kvps:["hb_bidder","hb_pb","hb_adid"],gpt_kvp_overrides:{adb_bdr:"hb_bidder",adb_hbc:"hb_pb",adb_adid:"hb_adid"},gpt_keep_oop:1,allow_serve_from_refresh:!0,preconfigure_init:function(){googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){googletag.pubads().enableLazyLoad=function(){h.log("AdBridg ignoring GPT lazy load.")}})},new_tl_test:function(e){return!h.qs("adb_tl_new_only")&&e},gamconfig_filter:function(e){return"div-gpt-ad-out-of-page"!=e.dom_id||!AdBridg.global("has_preroll")},gamconfig_ad_class_mutate:function(e,t){if("grt-incontent"==e)return!1;if((t.id+"").match(/^t?\d?_?ina$/))return"ina";var n=h.dom_invisible(t.id);if(n)return h.log("GamConfig ignore CSS hidden element",e,t.id,n),!1;var n=e,i=(e=e.replace(/^t\d+_(.*)$/i,"$1")).match(/(sticky|inline)/);if(i?i=i[1]:e.match(/^DMR/)?i="sticky":e.match(/^MMR/)&&(i="inline"),i){var r="grtbac_"+(parseInt((t.id.match(/^t(\d+)_/)||["0"]).pop())+1)+"_"+i,o=AdBridg.global(r)||0;if(o+=1,AdBridg.global(r,o),"inline"===i){r=h.vp().w;if(1190<=r){if(3<(o+=1))return h.err("grtSlotMax_LD_"+i+"__"+n+"__"+t.id),!1}else{if(r<990&&5<o)return h.err("grtSlotMax_MT_"+i+"__"+n+"__"+t.id),!1;if(990<=r)return!1}}e=i+o}return n!==e&&h.log("GamConfig ad class mutation: ",n," -> ",e),e},gamconfig_curly:function(e,t,n,i){return"grt_prefix"===e?"/4788/grt/pagenumber"+(n=parseInt((n.match(/^t(\d+)_/)||["0"]).pop())+1)+"/"+(1==n?"":n):"device_code"===e?h.vp().w<768?"M":"D":"inline_code"===e?1190<=h.vp().w?"LB":"MR":void 0},gamconfig_skip_element:function(e,t,n){var i,r;if(!AdBridg.global("has_preroll"))return AdBridg.global("setup_grtoop")||(AdBridg.global("setup_grtoop",1),i=!1,r=function(){i||(i=!0,h.log("Manually trigger GamConfig scanner"),h.off(window,"scroll",r),h.gamconfig_scanner&&h.gamconfig_scanner())},h.on(window,"scroll",r)),"div-gpt-ad-out-of-page"===e&&0<!h.vp().y},lazy:function(e,t,n,i){t=t.getAdUnitPath();return t.match(/MMR(4|5|_extra)/)?(h.log("Lazy gam path",t),h.vp().h):62!=e.id&&1},before_gpt:function(){h.qs("no_sandbox")||(h.log("Requiring GPT Sandbox SafeFrames"),googletag.pubads().setSafeFrameConfig({sandbox:!0}));var e,t="XX",t=(b.s.pub&&b.s.pub.cc&&"AE,AR,AT,AU,BD,BE,BG,CA,CH,CO,CY,CZ,DE,DK,EE,ES,FI,FR,GB,GH,GR,HR,HU,ID,IE,IN,IS,IT,KE,LI,LT,LU,LV,MT,MX,MY,NG,NL,NO,NZ,PH,PK,PL,PT,RO,SA,SE,SG,SI,SK,US,ZA".match(b.s.pub.cc)&&(t=b.s.pub.cc),h.log("Setting KVP hlcc",b.s.pub&&b.s.pub.cc,"=",t),googletag.pubads().setTargeting("hlcc",t),h.qs("test"));t&&-1===(e=googletag.pubads().getTargeting("test")).indexOf(t)&&(e.push(t),googletag.pubads().setTargeting("test",e))},alter_adb_pixel:function(e){try{b.s.pub&&b.s.pub.cc&&(e+="&hlcc="+b.s.pub.cc),window.useAdBridg&&(AdBridg.global("hl_1133s")||AdBridg.global("hl_1133s",window.useAdBridg+Math.floor(100*Math.random()/5).toString(36)),e+="&hl33="+AdBridg.global("hl_1133s"))}catch(e){}return e},gpt_refresh_options:function(e){var t=Object.assign({},e||{},{changeCorrelator:!1});return h.log("GPT correlator enforcement",e,t),t},dynamic_configuration:function(e,t,n){var i=t.pub.cc;return t.pub.sponsorship&&"US"===i?(AdBridg.global("HLSPReported")||(AdBridg.global("HLSPReported",1),h.err("GRTSponsorshipPage"),h.log("Greatist page has been reserved for a sponsorship; all bidding is disabled.")),!1):(i.match(/^(PH|IN)$/i)&&(e.min_cpm=.05),e)},post_render:function(e){var t=e.config.unit.get("dom_id");t.match("dlb1")&&h.resize_element(document.getElementById(t),e.width,e.height)},nodbkeys:!0},u:{50:[50,"GRT Desktop LB1","728x90",["970x90","970x250"],.1,1500,0,0,{"gpt.adunit_regex":"dlb1"},[[2,"1231958",{siteId:248884,position:"atf"},0],[3,"4531341",0,0],[4,"540785679",0,0],[5,"15506669",0,0],[10,"354423",{size:"728x90"},0],[10,"354423",{size:"970x250"},0],[10,"354423",{size:"970x90"},0],[18,"Greatist_Desktop_DLB1_728x90_AB",0,0],[116,"814147833",0,0],[174,"Greatist_Desktop_DLB1_728x90",0,function(e,t){return t.new_tl_test(e)}],[186,"1032",{size:"728x90"},0],[186,"1033",{size:"970x250"},0]]],51:[51,"GRT Desktop LB2","728x90",[],.1,1500,0,0,{"gpt.adunit_regex":"dlb2"},[[2,"1231966",{siteId:248884},0],[3,"4531342",0,0],[4,"540785680",0,0],[5,"15506679",0,0],[10,"354424",{size:"728x90"},0],[10,"354424",{size:"970x250"},0],[10,"354424",{size:"970x90"},0],[18,"Greatist_Desktop_DLB2_728x90_AB",0,0],[116,"275526781",0,0],[174,"Greatist_Desktop_DLB2_728x90",0,function(e,t){return t.new_tl_test(e)}],[186,"1034",0,0]]],52:[52,"GRT Desktop LB3","728x90",[],.1,1500,0,0,{"gpt.adunit_regex":"dlb3"},[[2,"1231972",{siteId:248884},0],[4,"540785681",0,0],[5,"15506692",0,0],[10,"354425",{size:"728x90"},0],[10,"354425",{size:"970x250"},0],[10,"354425",{size:"970x90"},0],[18,"Greatist_Desktop_DLB3_728x90_AB",0,0],[116,"679392274",0,0],[174,"Greatist_Desktop_DLB3_728x90",0,function(e,t){return t.new_tl_test(e)}],[186,"1035",0,0]]],53:[53,"GRT Desktop LB4","728x90",[],.1,1500,0,0,{"gpt.adunit_regex":"dlb4"},[[2,"1231974",{siteId:248884},0],[4,"540785682",0,0],[5,"15506822",0,0],[10,"354426",{size:"728x90"},0],[10,"354426",{size:"970x250"},0],[10,"354426",{size:"970x90"},0],[116,"679392274",0,0],[174,"Greatist_Desktop_DLB3_728x90",0,function(e,t){return t.new_tl_test(e)}]]],54:[54,"GRT Desktop LB5","728x90",[],.1,1500,0,0,{"gpt.adunit_regex":"dlb5"},[[2,"1231976",{siteId:248884},0],[4,"540785683",0,0],[5,"15506823",0,0],[10,"354427",{size:"728x90"},0],[10,"354427",{size:"970x250"},0],[10,"354427",{size:"970x90"},0],[116,"679392274",0,0],[174,"Greatist_Desktop_DLB1_728x90",0,function(e,t){return t.new_tl_test(e)}]]],55:[55,"GRT Desktop MR1","300x250",["300x600"],.1,1500,0,0,{"gpt.adunit_regex":"dmr1$"},[[2,"1231978",{siteId:248884},0],[3,"4531339",0,0],[4,"540785684",0,0],[5,"15506681",0,0],[10,"354421",{size:"300x250"},0],[10,"354421",{size:"300x600"},0],[18,"Greatist_Desktop_DMR1_MREC_AB",0,0],[116,"482160476",0,0],[174,"Greatist_Desktop_DMR2_300x250",0,function(e,t){return t.new_tl_test(e)}],[186,"1016",{size:"300x250"},0],[186,"1017",{size:"300x600"},0]]],56:[56,"GRT Desktop MR2","300x250",["300x600"],.1,1500,0,0,{"gpt.adunit_regex":"dmr2"},[[2,"1231982",{siteId:248884},0],[3,"4531340",0,0],[4,"540785685",0,0],[5,"15506689",0,0],[10,"354422",{size:"300x250"},0],[10,"354422",{size:"300x600"},0],[116,"157131625",0,0],[174,"Greatist_Desktop_DMR3_300x250",0,function(e,t){return t.new_tl_test(e)}],[186,"1018",0,0]]],57:[57,"GRT Mobile MR1","300x250",[],.1,1500,0,0,{"gpt.adunit_regex":"mmr1"},[[2,"1232000",{siteId:248886},0],[3,"4531337",0,0],[4,"540785672",0,0],[5,"15506629",0,0],[10,"354428",{size:"300x250"},0],[18,"Greatist_Mobile_MMR1_300x250_AB",0,0],[116,"339384118",0,0],[154,"b0LqlK6wOr66W9aKj0P0Le",0,0],[174,"Greatist_Mobile_MMR1_300x250",0,function(e,t){return t.new_tl_test(e)}],[186,"1037",0,0]]],58:[58,"GRT Mobile MR2","300x250",[],.1,1500,0,0,{"gpt.adunit_regex":"mmr2"},[[2,"1232002",{siteId:248886},0],[3,"4531338",0,0],[4,"540785675",0,0],[5,"15506637",0,0],[10,"354429",{size:"300x250"},0],[18,"Greatist_Mobile_MMR2_300x250_AB",0,0],[116,"189578804",0,0],[154,"cC5tvi6wOr67ScaKlKyvbs",0,0],[174,"Greatist_Mobile_MMR2_300x250",0,function(e,t){return t.new_tl_test(e)}],[186,"1038",0,0]]],59:[59,"GRT Mobile MR3","300x250",[],.1,1500,0,0,{"gpt.adunit_regex":"mmr3"},[[2,"1232004",{siteId:248886},0],[4,"540785676",0,0],[5,"15506638",0,0],[10,"354430",{size:"300x250"},0],[18,"Greatist_Mobile_MMR3_300x250_AB",0,0],[116,"416732783",0,0],[154,"cS8L7O6wOr66W9aKj0P0Le",0,0],[174,"Greatist_Mobile_MMR3_300x250",0,function(e,t){return t.new_tl_test(e)}],[186,"1039",0,0]]],60:[60,"GRT Mobile MR4","300x250",[],.1,1500,0,0,{"gpt.adunit_regex":"mmr4"},[[2,"1232006",{siteId:248886},0],[4,"540785677",0,0],[5,"15506641",0,0],[10,"354431",{size:"300x250"},0],[18,"Greatist_Mobile_MMR4_300x250_AB",0,0],[116,"579762571",0,0],[154,"c7SyWU6wOr67ScaKlKyvbs",0,0],[174,"Greatist_Mobile_MMR4_300x250",0,function(e,t){return t.new_tl_test(e)}],[186,"1040",0,0]]],61:[61,"GRT Mobile MR5","300x250",[],.1,1500,0,0,{"gpt.adunit_regex":"mmr5"},[[2,"1232008",{siteId:248886},0],[4,"540785678",0,0],[5,"15506644",0,0],[10,"354432",{size:"300x250"},0],[18,"Greatist_Mobile_MMR5_300x250_AB",0,0],[116,"823314966",0,0],[154,"djj6QQ6wOr67ScaKlKyvbs",0,0],[174,"Greatist_Mobile_MMR5_300x250",0,function(e,t){return t.new_tl_test(e)}],[186,"1041",0,0]]],62:[62,"GRT Mobile LB1","320x50",["300x50","320x100"],.1,1500,0,0,{"gpt.adunit_regex":"mlb1"},[[2,"1231990",{siteId:248886,position:"atf"},0],[3,"4531336",0,0],[4,"540785670",0,0],[5,"15506626",0,0],[10,"354433",{size:"300x50"},0],[10,"354433",{size:"320x100"},0],[10,"354433",{size:"320x50"},0],[116,"917839699",0,0],[154,"aUUS4w6wOr64qxaKj0P0Le",0,0],[174,"Healthline_Mobile_MLB1_320x50",0,function(e,t){return t.new_tl_test(e)}],[186,"1036",0,0]]],63:[63,"GRT Mobile LB2","320x50",["300x50","320x100"],.1,1500,0,0,{"gpt.adunit_regex":"mlb2"},[[2,"1231996",{siteId:248886},0],[4,"540785671",0,0],[5,"15506627",0,0],[10,"354434",{size:"300x50"},0],[10,"354434",{size:"320x100"},0],[10,"354434",{size:"320x50"},0],[116,"917839699",0,0],[174,"Healthline_Mobile_MLB1_320x50",0,function(e,t){return t.new_tl_test(e)}]]],109:[109,"GRT Mobile MMR_Extra","300x250",[],.1,1500,0,0,{"gpt.adunit_regex":"MMR_extra"},[[2,"2166378",{siteId:248886},0],[5,"22763969",0,0],[10,"720463",{size:"300x250"},0],[116,"431904676",0,0],[154,"dYWGsWiHWr7ikFaKj0P0Le",0,0]]]}}),v={},y={},i={},r=(window.AdBridg=window.AdBridg||{cmd:[]},window.AdBridg.global=function(e,t){if(void 0===t)return h.logl("g","Global read: ",e,i[e]),i[e];i[e]=t,h.logl("g","Global set: ",e,t)},window.AdBridg.globals={version:"v7.15.0"},b.s.preconfigure_init&&h.wrapAsync(b.s.preconfigure_init)(b.s),t.getId=function(){return b.c},t.libSettings=function(t){if(t){var e,n;try{n="function"==typeof b.s[t]?(e=Array.prototype.slice.apply(arguments,[1]),b.s[t].apply(null,e)):b.s[t]}catch(e){h.err("ConfigKeyFail",t,e)}return n}return b.s},t.kvp=function(e){var t=b.s.gpt_kvp_overrides;return t&&t[e]?t[e]:e},t.proc=function(e){b.s.pub=b.s.pub||{},h.each(e,function(e,t){b.s.pub[t]=e}),h.log("Publisher config update: ",JSON.stringify(b.s.pub)),g("./modules.js").trigger("pub.config",b.s.pub)},t.deca=function(e){if(b.s.alter_adb_pixel)try{e=b.s.alter_adb_pixel(e)}catch(e){h.err("Alter adb fail",e)}return e},t.configureUnit=function(e,t){var n,i=!1,r=[];for(n in b.u)if(b.u.hasOwnProperty(n)){var o=m(0,b.u[n]);if(g("./modules.js").trigger("unit.dynamic",o,b.s,e),b.s.dynamic_configuration)try{var a=b.s.dynamic_configuration(o,b.s,e);if(!(o="object"!=typeof a&&!1!==a?o:a))continue}catch(e){h.err("Failed dynamic configuration",e)}if(t){if(t!==o.id)continue;i=o;break}if(o.rule_order)r[o.rule_order]=o;else if(f(e,o,b.s)){i=o;break}}if(!i&&r.length)for(var s=0;s<r.length;++s)if(r[s]&&f(e,r[s],b.s)){i=r[s];break}if(i){e.configure(i);var d=e,c=i;if(c.bid_req_confs&&c.bid_req_confs.length)for(var u=0;u<c.bid_req_confs.length;++u){var p=c.bid_req_confs[u],p={bidder_id:p[0],bidder_unit_id:p[1],settings:p[2]||{},mutate:p[3]||!1},l=y[String(p.bidder_id)];h.qsab(l,p.bidder_id)&&(d.addBidder(l,v[l]),d.addBidReqConf(l,p,b.s))}}},t.units=function(n){h.each(b.u,function(e,t){n(m(0,e))})},b.s.usp),o=((r="function"==typeof r?r():r)&&h.cfusp(r.image,r.iframe,r.delay),t.afterConsent=g("./consent.js")(b),g("./modules.js")),r=(o.setup(t),g("./adapters/deepintent.js")),a=g("./adapters/triplelift_direct.js"),s=g("./adapters/33across.js"),d=g("./adapters/medianet.js"),c=g("./adapters/triplelift.js"),u=g("./adapters/index.js"),p=g("./adapters/appnexusast.js"),l=g("./adapters/openx.js"),_=g("./adapters/pubmatic.js");n("rubicon",g("./adapters/rubicon.js"),[2,{accountId:11314},function(e,t){try{e.params=e.params||{},e.params.inventory={k1:""+googletag.pubads().getTargeting("k1")||t.pub&&t.pub.k1||"",k2:""+googletag.pubads().getTargeting("k2")||t.pub&&t.pub.k2||"",msiteactive:""+googletag.pubads().getTargeting("msiteactive")||t.pub&&t.pub.msiteactive||"",url:""+h.url().href||"",pos:""+e.unit.get("gpt_slot").getTargeting("pos")[0]||""},h.log("Rubicon KVP",e.params.inventory)}catch(e){h.err("GRT Rubicon KVP fail",e)}return e}]),n("pubmatic",_,[3,{publisherId:"162008"},0]),n("openx",l,[4,{delDomain:"healthline-d.openx.net"},0]),n("appnexus",p,[5,0,function(e,t){return e.params=e.params||{},e.params.keywords={k1:t.pub&&t.pub.k1||"",k2:t.pub&&t.pub.k2||""},e}]),n("ix",u,[10,0,0]),n("triplelift",c,[18,{check_gdpr:!0},0]),n("medianet",d,[116,{cid:"8CUPK277N"},0]),n("33across",s,[154,{productId:"siab",test:!0},function(e,t){return-1<["US","CA"].indexOf(t.pub.cc.toUpperCase())&&e}]),n("tpl_direct",a,[174,0,0]),n("deepintent",r,[186,{test:!0},0]),t.afterConsent(function(e){g("./modules.js").trigger("consent.check_complete",e)})},{"./adapters/33across.js":1,"./adapters/appnexusast.js":2,"./adapters/deepintent.js":3,"./adapters/index.js":4,"./adapters/medianet.js":5,"./adapters/openx.js":6,"./adapters/pubmatic.js":7,"./adapters/rubicon.js":8,"./adapters/triplelift.js":9,"./adapters/triplelift_direct.js":10,"./ajax":11,"./consent.js":15,"./modules.js":18,"./utils":45}],15:[function(i,e,D){function t(){if(y&&_)for(;x.length;){var e=x.shift();I(e)}}function r(){j||(j=!0,l.log("Consent: removing action configurations."),d.u=[],f("N"))}function o(){googletag&&googletag.cmd&&!E&&(E=!0,l.log("Consent: set GPT setRequestNonPersonalizedAds(1)."),f("L"),googletag.cmd.push(function(){googletag.pubads().setRequestNonPersonalizedAds(1)}))}function a(){googletag&&googletag.cmd&&!C&&(C=!0,l.log('Consent: set GPT setPrivacySettings({ "restrictDataProcessing": true }).'),f(b),googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})}))}var d,n,s,c,u,p,l=i("./utils.js"),g=(e.exports=l.wrapAsync(function(e){return d=e,function(e){U(e)}}),""),f=function(e,t){g+=e,t&&(g+=t)},m={iab:"A",conversant:"B"},h={geoblock:"C",geoblockbids:"D",geocmp:"E"},b="M",v="AT,BE,BG,CR,CY,CZ,DK,EE,FI,FR,DE,GR,HU,IE,IT,LV,LI,LU,MT,NL,PL,PT,RO,SK,SI,SP,SE,GB,NO,IS,LI,GI,AX,GF,GP,MQ,YT,RE,MF,FK,CH,AD,MC,SM,VA,",y=!1,_=!1,w=!1,x=[],U=(l.qs("adb_skip_consent")&&(l.log("Consent: skipped by qs"),_=y=!0),l.wrapAsync(function(e){"function"!=typeof e?l.err("Consent: invalid cb",e):(e=l.wrapAsync(e),y&&_?I(e):(x.push(e),w||(w=!0,M(),N())))})),I=function(e){e(n,s,g)},S=l.wrapAsync(function(e){l.log("Consent: done gathering GDPR consent",e),n=e,y=!0,f("u"),t()}),A=l.wrapAsync(function(e){l.log("Consent: done gathering USP consent",e),s=e,_=!0,f("h"),t()}),j=!1,E=!1,C=!1,M=function(){var e=d.s.cmp;"function"==typeof e?(f("t"),e(d.s,l.wrapAsync(function(e){k(e)}))):k(e)},k=l.wrapAsync(function(n){n?"pubblock"===n?(l.log("Consent: gdpr: pubblock"),f("F"),r(),o(),S({gdprApplies:!0,consentString:""})):"iab"===n||"conversant"===n?(f(m[n]),O(n)):"geoblock"===n||"geoblockbids"===n||"geocmp"===n?(f(h[n]),P(function(e){var t;-1===v.indexOf(e.slice(0,2))?(l.log("Consent: gdpr: not in EU:",e),f("y"),S({gdprApplies:!1,consentString:""})):"geocmp"===n?(t=d.s.cmp_for_geo,l.log("Consent: gdpr: in EU, checking cmp:",t),f("x"),setTimeout(function(){k(t)},0)):"geoblock"===n?(f("v"),l.rec("GDPRBlockAll"),l.log("Consent: gdpr: in EU, disabling ads")):(f("w"),l.log("Consent: gdpr: geoblockbids - preventing auctions and continuing to GAM"),r(),o(),S({gdprApplies:!0,consentString:""}))})):(f("z"),l.err("Consent: unrecognized cmp value",n),S()):(f("G"),S())}),T=0,O=l.wrapAsync(function(){var e,t,n,a,s;if("function"!=typeof window.__cmp&&"function"!=typeof window.__tcfapi)return e=d.s.cmp_check_interval,t=d.s.cmp_check_max,e&&T<t?(0===T&&(f("p"),l.log("Consent: gdpr: cmp not found yet - checking every ",e,"ms; max ",t,"intervals")),T+=1,void setTimeout(O,e)):(n=d.s.cmp_fallback)?(l.log("Consent: gdpr: fallback to",n),f("o"),void setTimeout(function(){k(n)},0)):(f("n"),void l.log("Consent: gdpr: CMP object not found, preventing further execution."));window.__tcfapi?(l.log("Consent: gdpr: calling TCFv2"),f("U"),a=!1,(s=function(){window.__tcfapi("getTCData",2,l.wrapAsync(function(e,t){var n,i,r,o;if(e){if(f("s"),o=e.eventStatus,n=e.tcString,(r=(i=e).gdprApplies)&&(!n||"cmpuishown"===o))return a||(a=!0,l.log("Consent: gdpr: TCFv2 not ready yet. Waiting...")),void setTimeout(s,200)}else f("r");S({consentString:n,vendorData:i,gdprApplies:r})}))})()):(l.log("Consent: gdpr: calling CMP"),f("q"),window.__cmp("getVendorConsents",null,l.wrapAsync(function(e){var t,n,i;l.log("Consent: gdpr: CMP result",e),e?(t=e.metadata||e.consentData,n=e.vendorConsents,i=e.gdprApplies,f("s")):f("r"),S({consentString:t,vendorData:n,gdprApplies:i})})))}),N=function(){var t,e=d.s.ccpa;"optout"===e?(l.log("Consent: ccpa: opting out all users, restricting gpt processing"),f("l"),a(),A({version:1,uspString:z()})):0===(e||"").indexOf("geoblock,")?(t=e.split(",").slice(1),P(function(e){-1!==t.indexOf(e)?(l.log("Consent: ccpa: opting out ",t," users, restricting gpt processing"),f("O"),a(),A({version:1,uspString:z()})):(l.log("Consent: ccpa: region OK",e),f("T"),A({version:1,uspString:"1---"}))})):(!e&&window.__uspapi&&(e="iab",f("k")),(e?"iab"===e?(f("j"),B):(l.log("Consent: ccpa: unknown strategy, continuing as normal; strategy=",e),f("i"),A):(l.log("Consent: ccpa: no strategy defined, continuing as normal"),f("m"),A))())},z=function(){var e=d.s.ccpa_signatory||"N";return"1"+(d.s.ccpa_button||"N")+"Y"+e},R=0,B=l.wrapAsync(function(){var n=d.s.usp_check_interval||500,i=d.s.usp_check_max||30;if(!window.__uspapi)return n&&R<i?(0===R&&(l.log("Consent: usp: __uspapi not found yet - checking every ",n,"ms; max ",i,"intervals"),f("b")),R+=1,void setTimeout(B,n)):(l.log("Consent: usp: __uspapi not found, preventing further execution."),void f("a"));0===R&&f("c"),window.__uspapi("getUSPData",1,l.wrapAsync(function(e,t){if(l.log("Consent: usp: result",e,t),!(t||e&&e.uspString))return n&&R<i?(0===R&&(l.log("Consent: usp: result empty, re-checking in ",n,"ms"),f("e")),R+=1,void setTimeout(B,n)):(l.log("Consent: usp: __uspapi returned invalid, defaulting to Opt Out"),f("f"),a(),void A({version:1,uspString:z()}));e&&e.uspString?(f("g"),"Y"===e.uspString.substr(2,1)&&a()):f("d"),A(e)}))}),P=(p=[],function(e){var t,n;"function"!=typeof e?l.err("Consent: bad region cb",e):(e=l.wrapAsync(e),c||(t=l.cr("adbrgn"))&&(l.log("Consent: region cookie found",t),f("S"),c=t),c?e(c):(p.push(e),u||(l.log("Consent: geo region requested"),u=!0,n=function(){for(;p.length;)p.shift()(c)},i("./ajax.js")({url:"https://geo.adspsp.com",withCredentials:!1,parseResponseJson:!1},l.wrapAsync(function(e,t){if(e)return l.err("geo/region",e),d.s.cmp_allow_geofail?(c="????",l.log("Consent: error getting region, continuing"),f("P"),void n()):(l.log("Consent: region check failed; preventing further action"),void f("Q"));c=t,l.log("Consent: region check result",c),l.cw("adbrgn",c),l.log("Consent: cached region",c),f("R"),n()})))))})},{"./ajax.js":11,"./utils.js":45}],16:[function(e,U,M){if(window.AdBridg=window.AdBridg||{cmd:[]},window.googletag=window.googletag||{cmd:[]},window.pbjs=window.pbjs||{que:[]},AdBridg.gpt=window.googletag,!(AdBridg.exists||window.googletag&&googletag.cmd&&googletag.cmd===AdBridg.cmd)){AdBridg.exists=!0;var v=e("../utils.js"),p=e("../unit.js"),l=e("../auction.js"),y=e("../config.js"),m=e("../analytics.js"),_=e("../modules.js"),N=e("../mockprebid.js");if(!v.qs("adb_off"))if(e=v.vp(),/headless/i.test(navigator.userAgent)||0===e.w||0===e.h)v.log("headless browser detected; shutting down"),v.rec("headless");else{s={enableSingleRequest:D,disableInitialLoad:D,addEventListener:(a={add:function(e,t){a[e]=(a[e]||[]).concat(t)},remove:function(e,t){a[e]=(a[e]||[]).filter(function(e){return e!==t})},trigger:function(){var t=[].slice.apply(arguments),e=t.shift();(a[e]||[]).forEach(function(e){e.apply(0,t)})}}).add,removeEventListener:a.remove,safeFrameConfig:!1,setSafeFrameConfig:function(e){s.safeFrameConfig=e},targeting:{},setTargeting:function(e,t){s.targeting[e]=t},refresh:function(e){e.forEach(function(e){var n=document.createElement("iframe"),t=document.getElementById(e.getSlotElementId()),i=!s.safeFrameConfig||e.getTargeting("unsafe")[0],r=(n.height=e.sizes[0][1],n.width=e.sizes[0][0],n.border="0px",n.hspace="0",n.vspace="0",n.marginWidth="0",n.marginHeight="0",n.style.border="0",n.scrolling="no",{slot:e,advertiserId:0,campaignId:0,creativeId:0,isEmpty:!(n.frameBorder="0"),lineItemId:0,size:null,sourceAgnosticCreativeId:0,sourceAgnosticLineItemId:0}),o=e.getTargeting(y.kvp("adb_adid"))[0];i?n.src="about:blank":(s.safeFrameConfig&&s.safeFrameConfig.sandbox&&(n.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),n.src="https://prod.adspsp.com/iframe.html"),t.innerHTML="",t.appendChild(n),o?(n.contentDocument.open(),n.contentDocument.write(i?'<script>try { top.AdBridg.render(document, "'+o+'") } catch(e) {}<\/script>':'<html><head><script type="text/javascript" src="https://prod.adspsp.com/adbpmc2.js"><\/script><script type="text/javascript">AdBridgServe("'+location.href+'", "'+o+'");<\/script></head><body></body></html>'),a.trigger("slotRenderEnded",r)):"function"==typeof(t=y.libSettings().getHouseAd)?t(e,function(e,t){n.contentDocument.open(),n.contentDocument.write(e),r.isEmpty=!1,a.trigger("slotRenderEnded",v.assign(r,t))}):(v.log(e.getAdUnitPath(),"nothing to render"),r.isEmpty=!0,a.trigger("slotRenderEnded",r))})}},AdBridg.gptStub={cmd:{push:function(e){e()}},pubads:function(){return s},defineSlot:function(e,t,n){var i={sizes:t,targeting:{},addService:D,getSlotElementId:function(){return n},getAdUnitPath:function(){return e},setTargeting:function(e,t){i.targeting[e]=t},getTargeting:function(e){return[].concat(i.targeting[e],s.targeting[e]).filter(Boolean)},getTargetingMap:D};return i},enableServices:D,display:D},("function"==typeof y.libSettings().nogpt&&y.libSettings().nogpt()||v.qs("adb_nogpt"))&&(v.log("Disabling GPT"),AdBridg.gpt=AdBridg.gptStub);function g(e){return function(){var d=v.mock();J||(J=!0,_.on("icu.iab",V)),v.each(e,function(e){var t,n,i,r,o,a,s=e.getSlotElementId(),s=document.getElementById(s);s&&(s.innerHTML="",n=t=!1,r=i=0,v.each(e.getSizes(),function(e){"fluid"===e?t=!0:(0===r||"small"===d&&r>e.height||"large"===d&&r<e.height||"native"===d&&Math.random()<.5)&&(i=e.width,r=e.height)}),t&&!r?(n=!0,i="100%",r=v.random(90,600)+"px"):(i+="px",r+="px"),o="border: 0pt none; display: inline-block; width: "+i+"; height: "+r+"; background: #dbbdf1;",(a=document.createElement("div")).setAttribute("style",o),a.innerText=i+" x "+r+" // "+e.getAdUnitPath(),s.appendChild(a),t&&"native"===d&&setTimeout(function(){i="100%",r=v.random(90,600)+"px",a.style.width=i,a.style.height=r,a.innerText=i+" x "+r+" (native resize) // "+e.getAdUnitPath()},v.random(100,500)),fe({mocked:!0,slot:e,isEmpty:!1,size:n?"fluid":[i,r],serviceName:"publisher_ads",advertiserId:1,campaignId:1,comoanyIds:null,creativeId:1,creativeTemplateId:null,isBackfill:!1,labelIds:null,lineItemId:1,slotContentChanged:!0,sourceAgnosticCreativeId:1,sourceAgnosticLineItemId:1}))})}}function f(i,r,b){return v.wrapAsync(function(h){P("ra",function(){var t,e,m=[],n=(h.eachUnit(function(t){if(h===x){if(!t.get("gpt_slot")||t.get("preload_used"))return;t.set("preload_used",1)}try{var e=y.libSettings().post_auc_ufilter;if(e){var n=e(t,b);if(n)return void v.log("Ignoring",t.alias,t.get("dom_id"),n)}}catch(e){v.err("Err auc unit filter ",t.alias,t.get("dom_id"),e)}try{var i=t.getWinner();if(t.settings.require_bid&&!i)v.log("Discarding unit ",t.alias,t.get("dom_id")," -- requires bid but had none."),v.thread(function(){AdBridg.destroySlots([t.get("gpt_slot")])})();else{i&&(i.config.unit.setImpData("adb_mtype",i.extras.mediaType),t.gptTargetSet(i));var r,o=t,a=y.libSettings().bid_strategy,s=o.getWinner(),d=o.get("gpt_slot");if(te(d),_.trigger("gpt.set_targeting",o,d),(c=o.get("adb_imp_data"))&&(r=d.getTargeting("adb_imp")||[],v.isarr(r)||(r=[r]),v.each(c,function(e){e&&-1===r.indexOf(e)&&r.push(e)}),r.length&&d.setTargeting(y.kvp("adb_imp"),r)),y.libSettings().track_alias&&d.setTargeting(y.kvp("adb_cfg"),o.alias),s){AdBridg.gpt!==window.googletag&&(d.setTargeting("unit",o),(y.libSettings().unsafeBidders||"").split(",").filter(function(e){return e===s.config.bidder_name}).length&&d.setTargeting("unsafe",!0));var c=(ee[s.id]=s).config.dfp_bidder_name||s.config.bidder_name,u=s.cpm,p=y.libSettings().cur,l=(p&&(p.exclude&&-1<p.exclude.indexOf(s.config.bidder_id)?v.log("Currency conversion skipped: ",s.config.bidder_name):(v.log("Currency conversion: USD = ",u,"; Rate = ",p.rate,"; DFP = ",p.rate*u),u*=p.rate)),v.toRange(u,a)),g=l.kv,p=(_.trigger("gpt.modify_hbc",o,d,{bid:s,range:l,mod:function(e){return u=e,l=v.toRange(u,a),g=l.kv,l}}),v.qs("adb_force_bidder")?(c="force",g=""):v.qs("adb_force_sf_bidder")&&(c="forcesf",g=""),v.qs("adb_force_pbuc")&&(c="force_pbuc",g="",v.log("Forcing PBUC")),y.libSettings().vs_threshold);if("function"==typeof p)try{var f=p(u);f&&d.setTargeting(y.kvp("adb_vs"),f)}catch(e){v.err("HVfail",e)}d.setTargeting(y.kvp("adb_bdr"),[c]),d.setTargeting(y.kvp("adb_hbc"),[g]),d.setTargeting(y.kvp("adb_adid"),[s.id]),y.libSettings().track_mtype&&s.extras&&s.extras.mediaType&&d.setTargeting(y.kvp("adb_mtype"),[s.extras.mediaType]),v.log("Set GPT targeting for ",d.getAdUnitPath()," / ",d.getSlotElementId(),": ",c,g),ie(d,u)}else d.setTargeting(y.kvp("adb_bdr"),["none"]),ie(d,-1),_.trigger("gpt.no_hbc",o,d,function(e){return v.toRange(e,a)},function(e,t){ne(e),ie(e,t)});m.push(t.get("gpt_slot"))}}catch(e){v.err("Err setting unit ",t.alias,t.get("dom_id"),e)}}),j.concat(m));if(j=[],w(n),"function"==typeof i&&i(h),k&&!(n=oe("AC",n)).length)return v.err("All units cancelled",h.id);(k||b)&&(B(),t=[],v.each(n,function(e){t.push(e.getAdUnitPath()+"#"+e.getSlotElementId())}),v.log(C,"GPT Batch: ",n.length,t),(e=y.libSettings("gpt_refresh_options",r))&&(r=e),_.trigger("gpt.before_request",n,r,b),v.mock()?(e=Math.floor(1900*Math.random())+100,v.logl("mock","bypass gpt",e,b),setTimeout(g(n),e)):AdBridg.gpt.pubads().refresh(n,r),_.trigger("gpt.request_adbridg",h,b))})})}function q(){var e,t;Z&&(e=A.length,(A=oe("PT",A)).length?(v.isdebug()&&(t=[],v.each(A,function(e){t.push(e.getAdUnitPath()+" / "+e.getSlotElementId())}),v.log("Non-bid request with",A.length," units: ",t)),P("rp",function(){var e,t,n=A;A=[],n.length&&(B(),w(n),v.log(C,"GPT PT Batch: ",n.length),e=y.libSettings("gpt_refresh_options")||{},_.trigger("gpt.before_request",n,e),v.mock()?(t=Math.floor(1900*Math.random())+100,v.logl("mock","bypass gpt-pt",t),setTimeout(g(n),t)):AdBridg.gpt.pubads().refresh(n,e),_.trigger("gpt.request_passthrough",n))})):e&&v.err("PT units cancelled"))}function w(e){v.each(e,function(e){var t=e.getSlotElementId(),n=(T[t]||0)+1,t=(T[t]=n,y.libSettings().track_imps);if(t)try{"string"!=typeof t&&(t="1:1-11");for(var i=Math.floor(v.toRange(n,t).kv.split("-")[0]),r=e.getTargeting("adb_imp"),o=r.length-1;0<=o;--o)String(r[o]).match(/^\d+$/)&&r.splice(o,1);r.push(i),e.setTargeting(y.kvp("adb_imp"),r)}catch(e){v.err("Counter failed: ",e)}})}function L(e){return r[e.getSlotElementId()]}function h(e){v.log("Locked slot: ",e.getSlotElementId()),r[e.getSlotElementId()]=!0}function F(e,i,r){var o=[],o=Number(e[0])===e[0]?[e]:[].concat(e),a=[];if(v.each(o,function(e,t){var n;"string"==typeof e[t]?(0!==(n=e[t].split("x"))[0]&&0!==n[1]||v.err("0 size in",i,r,e[t]),e[t].match(/^\d+x\d+$/)||a.push(t)):(0!==e[0]&&0!==e[1]||v.err("0 size in",i,r,e.join?e.join("x"):e),o[t]=e.join("x"))}),a.length)for(var t=a.length-1;0<=t;--t)o.splice(t,1);return o}function G(e,t,n){return e?(e=e.replace(/\$\{AUCTION_PRICE\}/g,t),n&&n.clickThrough?e.replace(/\$\{CLICKTHROUGH\}/g,n.clickThrough):e):""}function X(e){for(var t,n,i=E.length-1;0<=i&&!(t=(n=E[i]).findUnit(e));--i);return!!(t=!t&&x?(n=x).findUnit(e):t)&&{auction:n,unit:t}}function t(){AdBridg.cmd.unshift(function(){window.AdBridg.lock("window.focus"),_e<=99&&(_e+=1),m.meta("wb",_e)})}function K(){AdBridg.cmd.push(function(){window.AdBridg.unlock("window.focus",!0),m.meta("wb",0)})}var a,s,Y,J=!1,V=function(e,t){for(var n=AdBridg.gpt.pubads().getSlots(),i=0;i<n.length;++i){var r=n[i];if(r.getSlotElementId()===t.d)return v.log("MOCK VIEWED SLOT!",t.d),void he({mocked:!0,slot:r})}},W=!1,H=[],x=!1,$=[],Q=!1,b=[],d=[],I={},S={},u={},c={},Z=!1,A=[],j=[],ee={},E=[],C="Workflow |",k=!0,e=y.libSettings().sra_if,te=((e&&!e()||y.libSettings().no_sra)&&(k=!1),function(e){var t,n,i=y.libSettings().gpt_clear_kvps,r=[],o=e.getTargetingMap(),a=!1;for(n in o)o.hasOwnProperty(n)&&("adb_"===n.substr(0,4)||i&&0<=i.indexOf(n)?a=!0:r.push([n,o[n]]));if(a)for(e.clearTargeting(),t=0;t<r.length;++t)e.setTargeting(r[t][0],r[t][1]);ne(e)}),ne=v.wrapAsync(function(e){var t=y.libSettings().gpt_exclusions;if(t){for(var n=!1,i=e.getCategoryExclusions(),r=i.length-1;0<=r;--r){var o=i[r];t.hasOwnProperty(o)&&(i.splice(r,1),n=!0)}if(n)for(e.clearCategoryExclusions(),r=0;r<i.length;++r)e.setCategoryExclusion(i[r])}}),ie=v.wrapAsync(function(e,t){var n=y.libSettings().gpt_exclusions;if(n){var i,r=[];for(i in n){var o=n[i];("function"==typeof o&&o(e,t)||o<=t)&&(e.setCategoryExclusion(i),r.push(i))}r.length&&v.log("Set GPT category exclusions for ",e.getAdUnitPath()," / ",e.getSlotElementId(),": ",r)}}),re={},T={},r={},oe=(AdBridg.has_gpt_lock=L,v.wrapAsync(function(r,e,o){var a=y.libSettings().max_imp_ctr,s=("function"==typeof a&&(a=a()),[]);return v.each(e,function(e){var t=e&&e.getSlotElementId?e:e.get("gpt_slot");if(t){var n=t.getSlotElementId();if(!u[n]){if(O("F"+r,n))return v.log("Slot excluded; element hidden",n);if(o){if(L(t))return v.log("Cannot refresh locked dom_id: ",t.getSlotElementId());if(a){var i=T[n]||0;if(a<=i)return re[n]?v.log("Slot excluded; too many imps: ",t,i+" > "+a):v.err("Slot imp max: ",t.getAdUnitPath(),n,a)}}i=[];if(_.trigger("gpt.filter_slot",r,t,o,i),i.length)return v.log("Module blocking",r,t,i);s.push(e)}}}),s})),O=function(e,t,n){var i=v.dom_invisible(t);if(i){n=n||0;var r=y.libSettings().block_invisible;if(r="function"==typeof r?r(e,t,i):r)return v.logl("dei","DEI.R",e,t,i,n),i;v.logl("dei","DEI.A",e,t,i,n)}return!1},ae=(window.AdBridg.defineSlot=v.wrapAsync(function(e,t,n){var i=O("DS",n);if(i)return v.log("Slot definition blocked: ",n,i),!1;i=y.libSettings().block_slot;if("function"==typeof i)try{if(i(e,n))return void v.err("Blocking slot:  ",e," with dom_id: ",n)}catch(e){v.err("DefineOverride",e)}i=y.libSettings().override_define;if("function"==typeof i)try{var r=i(e,t,n);if(!1===r)return v.log("Param override prevented defineSlot",e," dom_id=",n),!1;"object"==typeof r&&(r.dfp_ad_unit_path&&(e=r.dfp_ad_unit_path),r.dfp_sizes&&(t=r.dfp_sizes),r.dom_id&&(n=r.dom_id))}catch(e){v.err("DefineOverride",e)}t&&(!v.isarr(t)||t.length)||(m.ctr("dsea"),t=[1,1]);var o,a,s,i=AdBridg.gpt.defineSlot(e,t,n);return i&&(i.addService(AdBridg.gpt.pubads()),h(i),o=(r=F(t,e,n)).join(","),(a=new p({dom_id:n,gpt_slot:i,gpt_sizes:o,imp_ctr:(T[n]||0)+1})).restrictSizesTo(r),I[n]=o,r=400,"object"==typeof(s="function"==typeof(s=y.libSettings().lazy)?s(a,i,n,y.libSettings()):s)?(s.distance&&(r=s.distance),s.duration&&s.duration):"number"==typeof s&&(r=s),s&&(v.log("Requiring lazy: ",n,"distance=",r),a.set("lock.lazy",1),s=y.libSettings().lazy_measurement_filter,v.dom(n,r,0,function(){v.logl("wf",C,"unit triggered lazy load",a.alias,a.get("dom_id")),a.set("lock.lazy",!1),k?AdBridg.serve():AdBridg.display(n)},s,y.libSettings().lazy_compatible_collapse)),b.push(a),v.log(C,"Defined slot: ",e,n,o),_.trigger("gpt.define",a,i,e,t,n),y.libSettings().allow_serve_from_display&&c[n]&&(v.logl("wf",C,"triggering serve from define after display",n),AdBridg.serve()),k||(r="function"==typeof(r=y.libSettings().nonsra_poll)?r():r)&&(v.log("Nonsra poll for DOM ids"),se(n))),i}),window.AdBridg.defineOutOfPageSlot=v.wrapAsync(function(e,t){var n,i=AdBridg.gpt.defineOutOfPageSlot(e,t);return i&&(i.addService(AdBridg.gpt.pubads()),h(i),n=new p({dom_id:t,gpt_slot:i,gpt_sizes:""}),b.push(n),v.log(C,"Defined OOP slot: ",e,t),_.trigger("gpt.define",n,i,e,!1,t),y.libSettings().allow_serve_from_display&&c[t]&&(v.logl("wf",C,"triggering serve from defineOOP after display",t),AdBridg.serve())),i}),{}),se=function(t){ae[t]=ae[t]||{ct:0,tx:-1};var n=ae[t];clearTimeout(n.tx),10===n.ct?v.log("Nonsra display poll is giving up on",t):(n.ct+=1,n.tx=setTimeout(v.wrapAsync(function(){var e;c[t]||(e=!!document.getElementById(t),v.log("Nonsra display poll #"+n.ct+": ",t,"; display received =",!!c[t],"; dom exists =",e),e?(v.log("Nonsra issuing display from poll",t),AdBridg.display(t)):se(t))}),1e3))},de=(window.AdBridg.display=v.wrapAsync(function(e,t,n){if(n?(AdBridg.defineSlot(e,t,n),AdBridg.serve()):n=e,c[n]=!0,v.logl("wf",C,"display received",n),y.libSettings().allow_serve_from_display&&b.length&&(v.logl("wf",C,"triggering serve from display",n),AdBridg.serve()),Z=!0,!k){b.length&&(d=d.concat(b),b=[]);for(var i=d.length-1;0<=i;--i){var r,o=d[i].get("dom_id");c[o]&&((r=d.splice(i,1)[0]).get("gpt_sizes")?b.push(r):v.logl("Ignoring display for unit with no sizes",o))}return b.length?(v.logl("wf",C,"nonsra issuing serve",b.length),void pe(function(i,r){P("dn",function(){i?i.eachUnit(function(e){v.logl("wf",C,"display resolved",e.get("dom_id"),"auction=",i),AdBridg.gpt.display(e.get("dom_id")),_.trigger("gpt.request_nosra",e.get("dom_id"))}):(v.logl("wf",C,"display resolved",r," as passthrough"),AdBridg.gpt.display(r),_.trigger("gpt.request_nosra",r));var e=d.length;if(e){v.logl("wf",C,"nonsra units queued: ",e);for(var t=e-1;0<=t;--t){var n=d[t].get("dom_id");if(c[n]){setTimeout(function(){AdBridg.display(n)},0);break}}}})})):void v.logl("wf",C,"nonsra display waiting on definition/serve")}P("ds",function(){B(),v.logl("wf",C,"display resolved",n),AdBridg.gpt.display(n)}),q()}),window.AdBridg.refresh=v.wrapAsync(function(e,t,n){var i,r,o,a,s,d,c=AdBridg.gpt.pubads().getSlots();if(e){for(i=e.length-1;0<=i;i--)-1===c.indexOf(e[i])&&(v.err("RFCancelInvalidSlot",e[i].getSlotElementId()),e.splice(i,1));if(!e.length)return}else e=c;if(y.libSettings().allow_serve_from_refresh&&b.length){for(i=e.length-1;0<=i;i--)for(var u=b.length-1;0<=u;u--)e[i]===b[u].get("gpt_slot")&&e.splice(i,1);if(AdBridg.serve(),!e.length)return}_.trigger("gpt.filter_refresh",e,t),e.length&&(r=e.length,e=oe("RF",e,!0),v.logl("wf",C,"refresh: ",r,"slots requested; ",r-e.length,"filtered out;",e.length,"remaining."),e.length?(o=new l,!(a=!0)!==n&&"no_auction"!==y.libSettings().refresh||(a=!1),s=[],d=[],v.each(e,function(e){try{te(e)}catch(e){return v.err("Failed to clear slot: ",e)}var t,n=e.getSlotElementId(),i=(h(e),I[n]||""),r=(S[n]&&(r=(t=S[n].adb||S[n].gpt)&&"0x0"!==t&&t.match(/^\d{2,}x\d{2,}\d/),v.logl("sz","Refresh size restriction for",n,"=",t,"; is_valid=",r),r&&(i=t)),new p({dom_id:n,gpt_slot:e,gpt_sizes:i,is_refresh:!0,imp_ctr:(T[n]||0)+1}));a&&(y.configureUnit(r),v.logl("sz","Refresh restricting sizes to ",i),r.restrictSizesTo(i.split(","))),r.hasBidReqConf()?o.addUnit(r):(d.push(e.getAdUnitPath()+" / "+e.getSlotElementId()),s.push(e))}),s.length&&(v.log("Refreshing",s.length,"non-bid units: ",d),P("rn",function(){B(),w(s),v.log(C,"GPT RF Batch: ",s.length);var e=y.libSettings("gpt_refresh_options",t);e&&(t=e),_.trigger("gpt.before_request",s,t,!0),v.mock()?(e=Math.floor(1900*Math.random())+100,v.logl("mock","bypass gpt-pt-rf",e),setTimeout(g(s),e)):AdBridg.gpt.pubads().refresh(s,t),_.trigger("gpt.request_passthrough",s,!0)})),o.hasUnit()&&(E.push(o),o.execute(f(null,t,!0)))):r&&v.err("RF units cancelled"))}),{}),e=v.wrapAsync(function(e){var t=String(e.message||e.data);if("string"==typeof e.data)try{var n=JSON.parse(e.data);if("Prebid Request"===n.message)return void AdBridg.render({safeframe:!0,source:e.source,origin:e.origin,pbuc:!0},n.adId)}catch(e){}var n=t.substr(0,9),t=t.substr(10);return"adbsrverr"===n?v.err("Safeframe error: ",t):"adbsrvlog"===n?v.log("Safeframe: ",t):"adbvidend"===n?_.trigger("bid.outstream_end",t):"adbductag"!==n?"adbconfbl"===n?_.trigger("adb.confiant_block_sf",t):"adbsrvreq"===n?de.hasOwnProperty(t)?v.err("SafeframeDupe:",t):void AdBridg.render({safeframe:!0,source:e.source},t):void 0:(t=JSON.stringify((n=ge(n=t),t={},n&&(n=n.pbjsBid.adserverTargeting,t.targetingMap=n,t.hbPb=n.hb_pb,t.size=n.hb_size),t)),void e.source.postMessage("adbductape:"+t,e.origin))}),z=(window.addEventListener?window.addEventListener("message",e,!1):document.attachEvent&&window.attachEvent("onmessage",e),window.AdBridg.render=v.wrapAsync(function(t,e,n){var i=ee[e],r=!1;if(i||(r=!0,i=ge(e))){r?v.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," [override] creative from ",i.config.bidder_name," BR ",i.config.id):(o=i._origin?"(pooled bid from "+i._origin.config.unit.unique_id+")":"",v.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," creative from ",i.config.bidder_name,o," BR ",i.config.id));var o=i.config.unit.get("dom_id"),a=v.dom_invisible(o),a=(O("AR",o,i.config.bidder_id),a&&v.log("AdBridg render detected invisible container at time of render:",o,a),{config:i.config.unit.alias,bidder:i.config.bidder_name,size:i.width+"x"+i.height,extras:i.extras,dom_id:o}),s=(r&&(a.override=1),JSON.stringify(a)),d=(i.creative=G(i.creative,i.cpm,n),i.creative_url=G(i.creative_url,i.cpm,n),i.config.unit.bidRendered(i,a),0),n=n&&n.pbuc;if(t.pbuc)i.creative&&(i.creative="\x3c!-- AdBridg Delivery PBUC (SF): "+s+" --\x3e"+i.creative),t.source.postMessage(JSON.stringify({message:"Prebid Response",ad:i.creative,adUrl:i.creative_url,adId:e,width:i.width,height:i.height}),t.origin),d=1;else if(t.safeframe&&t.source&&t.source.postMessage){var c=y.libSettings().pmmutatefn;if(!i.creative)return v.err("AD1245F Safeframe render fail: no creative");var u={ad:"\x3c!-- AdBridg Delivery (SF): "+s+" --\x3e"+i.creative},p=JSON.stringify(u);"function"==typeof c?u=c(i,u):_.trigger("adb.confiant_pmmutate",i,u);d=JSON.stringify(u)!==p?2:3;t.source.postMessage("adbsrvad:"+JSON.stringify(u),"*")}else if(i.creative){var c=y.libSettings().pubrenderfn,p="pubrenderfn",u={},l=(_.trigger("adb.get_ff_renderer",u),Object.keys(u)),l=(l.length&&(c?v.log("Module renderers ignored; dbmock pubrenderfn set"):(p=l[0],1<l.length&&v.err("More than one module provided renderer; using",p,"of",JSON.stringify(l)),c=u[p])),!1);"function"==typeof c&&(t.write("\x3c!-- AdBridg Delivery (ER="+p+"): "+s+" --\x3e"),c(t,i.creative,i.config.bidder_name,i.width,i.height,i,n)?(l=!0,v.log("Creative rendered externally"),d=n?"B":4):v.log("External render skipped")),l||(t.write("\x3c!-- AdBridg Delivery: "+s+" --\x3e"),t.write(i.creative),t.close(),d=n?8:5)}else if(i.creative_url)try{var g=v.iiframe();g.width=i.width,g.height=i.height,g.style.display="inline",g.style.overflow="hidden",g.src=i.creative_url,t.body.appendChild(document.createComment("AdBridg Delivery: "+s)),t.body.appendChild(g),d=n?9:6}catch(e){return v.err("AD1245F Delivery failure from ",i.config.bidder_name," / ",i.config.bidder_unit_id,e)}else{if("function"!=typeof i.render)return v.err("AD1245F No creative from ",i.config.bidder_name," / ",i.config.bidder_unit_id);i.rawbid.adUnitCode=document.getElementById(o).children[0].id,document.getElementById(i.rawbid.adUnitCode).innerHTML="";try{i.render(),v.rec("winner.render:"+i.id)}catch(e){return v.err("AD1245F Renderer",e)}d=n?"A":7}m.bidRendered(i,d,r);u=i.resize_pad_top||!1,p=document.getElementById(o);if(p.style.textAlign="center",(l=(c=p).getElementsByClassName("adbridg-dyn-pad")).length&&v.each(l,function(e){e.parent.removeChild(e)}),u&&((l=v.prepend(c,"span")).className="adbridg-dyn-pad",l.innerHTML="&nbsp;",l.style="display:block;width:1px;height:"+u+"px;overflow:hidden;",(l=document.createElement("span")).className="adbridg-dyn-pad",l.innerHTML="&nbsp;",l.style="display:block;width:1px;height:"+u+"px;overflow:hidden;",c.appendChild(l)),t.safeframe)try{var f=p.getElementsByTagName("iframe");v.each(f,function(e){e.contentWindow===t.source&&(v.logl("RS","RS SF element: ",e.id,i.width,i.height),v.resize_element(e,i.width,i.height),String(e.parentNode.id).match(/google_ads_iframe.*container/)&&(v.logl("RS","RS SF parent: ",e.parentNode.id,i.width,i.height),v.resize_element(e.parentNode,i.width,i.height)))})}catch(e){v.err("Frame resize fail: ",e)}else t.defaultView&&t.defaultView.frameElement&&(t.defaultView.frameElement.width=i.width,t.defaultView.frameElement.height=i.height),v.logl("RS","RS iframe: ",i.width,i.height),v.resize_iframe(window,t,i.width,i.height);y.libSettings().refresh_keep_size&&(S[o]||(S[o]={gpt:"",adb:""}),S[o].adb=a.size,v.log("SIZE REFRESH KEEPING ADB: ",o,S[o]));s=y.libSettings().post_render;"function"==typeof s&&s(i)}else v.err("AD1245F Render failed for ID ",e)}),window.AdBridg.getSizes=v.wrapAsync(function(e){var t=[];return v.each(e,function(e){t.push([e.viewport,e.sizes])}),Se(t)}),[]),R=(R=v.qs("adb_restrict_size"))&&R.split(","),ce=(window.AdBridg.sizeMapping=v.wrapAsync(function(){var e,r=[],o=AdBridg.gpt.sizeMapping(),a={addSize:v.wrapAsync(function(e,t){if(R){for(var n=t.length-1;0<=n;--n){var i=t[n].join("x");0<=R.indexOf(i)&&(v.log("adb_restrict_size - Size ignored",i),t.splice(n,1))}if(!t.length)return a}return o.addSize(e,t),r.push([e,t]),a}),build:v.wrapAsync(function(){return e=o.build(),z.push({gpt_map:e,sizes:r}),e})};return a}),window.AdBridg.useSizeMapping=v.wrapAsync(function(e,t,n){var i,r=!1,o=e.getSlotElementId(),a=e.getAdUnitPath();for(e.defineSizeMapping(t),i=z.length-1;0<=i;--i)if(z[i].gpt_map===t){r=z[i].sizes;break}if(r){var s=Se(r),s=F(s,a,o),d=s.join(","),c=(I[o]=d,n||!1);if(!c)for(i=b.length-1;0<=i;--i)if(b[i].get("gpt_slot")===e){c=b[i];break}if(!c)return v.err("No unit for size map: ",a,o);c.set("gpt_sizes",d),c.restrictSizesTo(s),I[o]?v.log("Applied size mapping to ",o," / ",a,": ",d):(u[o]=1,v.log("Excluding unit ",o," / ",a," because it has no valid sizes"))}else v.err("Size mapping not found: ",a,o)}),window.AdBridg.resetInternals=function(){},!(window.AdBridg.destroySlots=function(e){e=e||AdBridg.gpt.pubads().getSlots();var n=[];return v.each(e,function(e){var t;e&&(t=e.getSlotElementId(),delete T[t],delete I[t],delete S[t],delete u[t],delete r[t],delete c[t],v.undom(t),_.trigger("gpt.destroy",e,t),n.push(t))}),v.log("Destroyed slots: ",n),AdBridg.gpt.destroySlots(e)})),B=function(){var e;ce||(ce=!0,"function"==typeof(e=y.libSettings().before_gpt)&&v.wrapAsync(e)(),_.trigger("gpt.before_enable_services"),AdBridg.gpt.enableServices(),_.trigger("gpt.after_enable_services"))},ue=!1,pe=v.wrapAsync(function(e){v.logl("wf",C,"serve called with",b.length,"pending units");for(var t=!1,n=(B(),!1),i=0;b.length>i;){var r=b.shift(),o=r.get("lock.lazy"),a=r.get("lock.batch");if(o||a)v.logl("wf",C,"serve skipped ("+(o?"lazy":"batch")+")",r.alias,r.get("dom_id")),i+=1,b.push(r);else{a=r.get("dom_id");if(!u[a]&&O("AS",a))v.err("Slot rejected before auction, element hidden:",a);else if(y.configureUnit(r),r.hasBidReqConf()){if(x){var s=$.indexOf(r.id);if(0<=s){var d=!1;if(x.eachUnit(function(e){var t,n,i;e.id===r.id&&(d=!0,$.splice(s,1),v.log("Proxy into preload ",r.alias),t=r.get("gpt_slot"),n=r.get("dom_id"),i=I[n]||r.get("gpt_sizes")||"",e.set({dom_id:n,gpt_slot:t,gpt_sizes:i}),e.restrictSizesTo(i.split(",")),_.trigger("unit.pre_attach",e))}),d){n=!0;continue}}}(t=t||new l).addUnit(r)}else k?A.push(r.get("gpt_slot")):(w([r.get("gpt_slot")]),v.thread(e)(!1,r.get("dom_id")))}}(t||x)&&y.libSettings().gpt_keep_oop&&A.length&&(v.log("Batching passthrough units with auction units"),j=j.concat(A),A=[]),t&&(E.push(t),t.execute(f(e)),t=!1),n&&!ue&&(ue=!0,Ie(f())),q()}),le=!1,ge=(window.AdBridg.serve=function(e){if(clearTimeout(le),k){v.logl("wf",C,"queuing serve");var t=y.libSettings().batch_delay;if(0===(t="function"==typeof t?t(b):t))return v.log("Starting auctions ASAP."),pe(e);t=t||100,le=setTimeout(function(){pe(e)},t)}else for(var n=b.length-1;0<=n;--n){var i=b[n].get("dom_id");if(c[i]){setTimeout(function(){AdBridg.display(i)},0);break}}},function(e){for(var t=E.length-1;0<=t;--t){var n=E[t].getBid(e);if(n)return n}return!1}),fe=v.wrapAsync(function(t){var e=t.slot.getSlotElementId();!t.isEmpty&&O("RE",e)&&v.log("Slot rendered from GPT, but element hidden by CSS:",e);try{n=t.slot,v.log("Unlocked slot: ",n.getSlotElementId()),r[n.getSlotElementId()]=!1,te(n)}catch(e){v.err("Unlock failed")}var n=T[e],i={};if(_.trigger("gpt.render_raw",t,n,i),!i.stop){i=X(function(e){return e.get("gpt_slot")===t.slot});if(y.libSettings().refresh_keep_size&&t.size&&2===t.size.length&&(S[e]||(S[e]={gpt:"",adb:""}),S[e].gpt=t.size.join("x")),i){if(!i.auction)return v.err("AUQ",t.slot.getAdUnitPath(),t.slot.getSlotElementId());AdBridg.gpt===window.googletag?m.gptRendered(i.auction,i.unit,t):m.enhRendered(i.auction.instancectr,i.unit.id,t),_.trigger("gpt.render",i.unit,t,n),v.qdusp()}else _.trigger("gpt.render_pt",!1,t,n)}}),me=v.wrapAsync(function(e){_.trigger("gpt.loaded_raw",e)}),he=v.wrapAsync(function(t){_.trigger("gpt.viewed_raw",t);var e=X(function(e){return e.get("gpt_slot")===t.slot});if(e){m.gptViewed(e.auction,e.unit);try{var n=y.libSettings().post_view;"function"==typeof n&&n(t,e.unit)}catch(e){v.err("PostView fail",e)}_.trigger("gpt.viewed",t.slot,e.unit);n=t.slot.getSlotElementId();O("VE",n)&&v.log("Slot viewed from GPT, but element hidden by CSS:",n)}}),o=[],be={},ve=!1,n=(window.AdBridg.lock=function(e){if(be[e])return be[e]=null,v.log("-== GPT lock already cleared: ",e);v.log("-== GPT locked by: ",e),o.push(e)},window.AdBridg.unlock=function(e,t){for(var n=!1,i=0;i<o.length;++i)if(o[i]===e){v.log("-== GPT lock cleared: ",e),o.splice(i,1),n=!0;break}n||t||(be[e]=!0,v.log("-== GPT unrecognized lock cleared: ",e)),ye()},[]),P=function(e,t){n.push({n:e,f:v.wrapAsync(t)}),ye()},ye=function(){if(!o.length&&!ve){for(ve=!0;n.length;)n.shift().f();setTimeout(function(){ve=!1,n.length&&ye()},0)}},_e=0;try{window.document.addEventListener("visibilitychange",function(e){(document.hidden?t:K)()})}catch(e){v.log("-== GPT lock : Page API not supported, using fallback"),window.addEventListener?(window.addEventListener("blur",t),window.addEventListener("focus",K)):window.attachEvent&&(window.attachEvent("onblur",t),window.attachEvent("onfocus",K))}v.isdebug()&&(AdBridg.auctions=E,AdBridg.utils=v);function we(){return E}var xe=v.wrapAsync(function(){clearTimeout(Y);var e={delay:!1};if(_.trigger("adb.init_check",e),"number"==typeof e.delay)Y=setTimeout(xe,e.delay);else{_.trigger("adb.init"),AdBridg.gpt.pubads().addEventListener("slotRenderEnded",fe),AdBridg.gpt.pubads().addEventListener("slotOnload",me),AdBridg.gpt.pubads().addEventListener("impressionViewable",he),W=!0;e=y.libSettings().initfn;for(e&&AdBridg.cmd.push(e);H.length;){var t=H.shift();AdBridg.cmd.push(t)}}}),Ie=(window.AdBridg.lazy=function(e,t,n,i){"function"==typeof n&&(i=n,n=0),v.dom(e,t,n,i)},v.log("First execution."),y.afterConsent(function(e){if(!e||!e.gdprApplies||e.consentString){e=y.libSettings().preload&&y.libSettings().preload()||[];if(e.length){function t(n){function i(e){function t(e){2===e.length&&1<e[0]&&1<e[1]?n.push(e):v.err("Invalid preload size: ",e)}var n=[];return v.isarr(e)&&(v.isarr(e[0])?v.each(e,t):t(e)),n}var r=i(n.size||[]);return function(){var t,e=AdBridg.defineSlot(n.gpt_path,r,n.dom_id);v.isarr(n.size_map)&&(t=AdBridg.sizeMapping(),v.each(n.size_map,function(e){t.addSize(e.viewport,i(e.sizes))}),t=t.build(),e.defineSizeMapping(t),AdBridg.useSizeMapping(e,t)),AdBridg.serve()}}for(var n=AdBridg.cmd.length;0<=n;n--){var i=AdBridg.cmd[n];i&&i.gpt_path&&AdBridg.cmd.splice(n,1,t(i))}e&&e.length&&(x=new l,v.each(e,function(e){if(e=parseInt(e),v.log("Preloading",e),e){var t=new p;if(y.configureUnit(t,e),!t.hasBidReqConf())return v.err("Preload bad id",e);$.push(e),x.addUnit(t)}}),x.hasUnit()&&(v.log("Preload kickoff",x),x.execute(v.wrapAsync(function(e){v.log("Preload complete"),Q&&Q(e)}))))}}}),function(e){x.isDone()?e(x):Q=e});y.afterConsent(function(){AdBridg.gpt.cmd.push(function(){v.log("Initializing. SRA is",(k?"enabled":"disabled")+"."),k&&(AdBridg.gpt.pubads().enableSingleRequest(),AdBridg.gpt.pubads().disableInitialLoad()),xe()})});v.wrapAsync(function(){for(m.init(),AdBridg.cmd.push=AdBridg.cmd.unshift=function(t){if(v.qs("adb_critfail"))throw new Error("Simulating critical failure");if("function"==typeof y.libSettings().cmd_override)try{var e=y.libSettings().cmd_override(t);if(!e)return void v.log("AdBridg command cancelled",t);t=e}catch(e){v.err("CmdOverrideFail",e)}var n,i;if("object"==typeof t&&((t=v.copy(t)).targeting&&(n=t.targeting,delete t.targeting,v.log("Publisher targeting set queued:",n),i=v.genID("gpt_targeting_"),AdBridg.lock(i),_.trigger("pub.set_targeting",n),AdBridg.gpt.cmd.push(function(){v.each(n,function(e,t){AdBridg.gpt.pubads().setTargeting(t,e)}),v.log("Publisher targeting set complete:",n),AdBridg.unlock(i)})),t.config&&(y.proc(t.config),delete t.config),!t.gpt_path&&t.events&&(v.each(t.events,function(e,t){_.on(t,e)}),delete t.events),t.action&&(v.log("Publisher event triggered: ","pub."+t.action),_.trigger("pub."+t.action),delete t.action),!Object.getOwnPropertyNames(t).length))return;if(W){if("object"==typeof t&&(t.gpt_path||t.length))try{v.log("Initialization command object processing:",t);function r(r){AdBridg.gpt.cmd.push(function(){var n,e;if(r.oop)n=AdBridg.defineOutOfPageSlot(r.gpt_path,r.dom_id);else if((n=AdBridg.defineSlot(r.gpt_path,r.size||[1,1],r.dom_id))&&r.size_map){for(var t=AdBridg.sizeMapping(),i=0;i<r.size_map.length;i++)t=t.addSize(r.size_map[i].viewport,r.size_map[i].sizes);t=t.build(),n.defineSizeMapping(t),AdBridg.useSizeMapping(n,t)}n&&r.targeting&&v.each(r.targeting,function(e,t){n.setTargeting(t,e)}),n&&r.events&&(r.events["gpt.defined"]&&r.events["gpt.defined"](n),(e=function(t,e){r.events[t]&&AdBridg.gpt.pubads().addEventListener(e,function(e){e.slot===n&&r.events[t](n,e)})})("gpt.rendered","slotRenderEnded"),e("gpt.viewed","impressionViewable"),e("gpt.visibilityChanged","slotVisibilityChanged")),n&&AdBridg.display(r.dom_id)})}if(t.length)for(var o=0;o<t.length;++o)r(t[o]);else r(t);t=function(){AdBridg.serve()}}catch(e){v.err("CmdObj fail",e)}"function"==typeof t&&setTimeout(function(){try{t.call()}catch(e){v.err("AdBridg.cmd had error: ",String(t).substr(0,30),e)}},0)}else H.push(t)};AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}N(we)})()}}function D(){}function Se(e){var t=v.vp(),n=t.w,r=t.h,o=!1,a=[];for(i=e.length-1;0<=i;--i){var s=e[i][0];if(n>=s[0]&&r>=s[1]){if(o){if(o[0]>s[0])continue;if(o[0]===s[0]&&o[1]>s[1])continue}o=s,a=e[i][1]}}return a}},{"../analytics.js":12,"../auction.js":13,"../config.js":14,"../mockprebid.js":17,"../modules.js":18,"../unit.js":44,"../utils.js":45}],17:[function(e,t,n){var i=e("./utils");t.exports=function(d){for(window.pbjs.renderAd=function(e,t,n){i.log("PBJS renderAd override",t,n),(n=n||{}).pbuc=!0,window.AdBridg.render(e,t,n)},window.pbjs.que.push=AdBridg.cmd.push;window.pbjs.que.length;){var e=window.pbjs.que.shift();AdBridg.cmd.push(e)}window.pbjs.getBidResponses=function(){for(var e=d(),t={},n={},i=e.length-1;0<=i;--i)for(var r=e[i].toPrebid(),o=0;o<r.bidsReceived.length;++o){var a=r.bidsReceived[o],s=a.adUnitCode;n[s]||(n[s]=r.auctionId),n[s]===r.auctionId&&(t[s]||(t[s]=[]),t[s].push(a))}return t},window.pbjs.getAllWinningBids=function(){var t=[];return i.each(d(),function(e){t=t.concat(e.toPrebid().winningBids)}),t},window.pbjs.getAllPrebidWinningBids=function(){var t=[];return i.each(d(),function(e){t=t.concat(e.toPrebid().prebidWinningBids)}),t},window.pbjs.getAdserverTargeting=function(){var n={};return i.each(d(),function(e){i.each(e.toPrebid().prebidWinningBids,function(t){n[t.adUnitCode]={},i.assign(n[t.adUnitCode],t.adserverTargeting),i.each(Object.keys(t.adserverTargeting),function(e){n[t.adUnitCode][e+"_"+t.bidder]=t.adserverTargeting[e]})})}),n},window.pbjs.getBidResponsesForAdUnitCode=function(t){var n=[];return i.each(d(),function(e){i.each(e.toPrebid().bidsReceived,function(e){e.adUnitCode===t&&n.push(e)})}),n},window.pbjs.getHighestCpmBids=function(){var t=[];return i.each(d(),function(e){e=e.toPrebid().bidsReceived.reduce(function(e,t){return e.cpm===t.cpm?e.timeToRespond<t.timeToRespond?e:t:e.cpm<t.cpm?t:e});t.push(e)}),t},window.pbjs.findBidByAdId=function(e){for(var t=null,n=0;n<d().length;n+=1){for(var i=d()[n].toPrebid().bidsReceived,r=0;r<i.length;r+=1){var o=i[r];if(o.adId===e){t=o;break}}if(t)break}return t}}},{"./utils":45}],18:[function(d,e,t){function n(e){i.push(e)}var c=d("./utils.js"),o={},i=[],r=["gpt.after_enable_services","consent.check_complete"],a={},s={},u={on:function(e,t){c.isarr(e)||(e=e.split(",")),c.each(e,function(e){a[e]?t(e):(s[e]||(s[e]=[]),s[e].push(t))})},trigger:null},p=(u.trigger=t.trigger=c.wrapAsync(function(e){var t=arguments,n=(s[e]||[]).concat(s["*"]||[]);c.each(n,c.wrapAsync(function(e){e.apply(null,t)})),-1<r.indexOf(e)&&(a[e]=1)}),!1);c.onerr(c.wrapAsync(function(){p?(console&&console.log("AdBridg nested module errors"),c.pixel("https://adspsp.com/$CUSTOMER_PUBLIC_ID$/500/2/1/?e=errnest")):(p=!0,t.trigger("error",arguments),p=!1)})),t.on=c.wrapAsync(function(e,t){u.on(e,t)}),t.setup=function(e){o=e};try{{var l=d("./modules/id5id.js"),g=(n(new l({partner:1151,google_esp:!0},u)),d("./modules/ias.js")),f=(n(new g({defer:function(e){function n(){if(!t){if(t=!0,!(o.libSettings().pub.has_ias&&!o.libSettings().pub.sponsorship))return c.log("IAS Control group activated");c.log("IAS Treatment group activated"),e()}}var t=!1;o.libSettings&&o.libSettings().pub?n():u.on("pub.config",function(e,t){n()})},pubId:"930806"},u)),d("./modules/connectid.js")),m=(n(new f({pixelId:58452,email:function(e){e(c.qs("rvid"))}},u)),d("./modules/33acrossid.js")),h=(n(new m({pid:"0013300001b1YMsAAM"},u)),d("./modules/rampid.js")),b=(n(new h({configuration_id:"570b902f-bee4-49d4-9c17-6380aefa3804",load_ats:!0,defer:function(t){c.log("LR deferral inner start");var n=!1,i=0,r=c.wrapAsync(function(){var e=o.libSettings&&o.libSettings();if(c.log("LiveRamp initial check - lib exists?",e,e&&e.pub,e&&e.pub&&e.pub.hasOwnProperty("cc")),!e||!e.pub||!e.pub.hasOwnProperty("cc"))return++i<50?(c.log("LR poll fast",i),void setTimeout(r,100)):void(++i<110?(c.log("LR poll slow",i),setTimeout(r,1e3)):c.log("LR poll end - no CC available"));n?c.log("LR already processed deferral check"):(n=!0,e=e.pub.cc,"US,AU,CA,NZ".match(e)?(c.log("LR inner deferral done, calling back"),t()):c.log("LR disabled in cc",e))});r()}},u)),d("./modules/bidpool.js")),v=(n(new b({poolKeyFn:function(e){return-1<[55,56,62,109].indexOf(e.id)&&e.id}},u)),d("./modules/identitysignals.js")),y=(n(new v({},u)),d("./modules/confiant.js")),_=(n(new y({propertyId:"cmoHx-7NMqx3kvsCb7fFcqWf2C8",refreshBlock:!0,v2:!0},u)),d("./modules/gamkvp.js")),w=(n(new _({},u)),d("./modules/criteoid.js")),x=(n(new w({},u)),d("./modules/pubcid.js"));n(new x({},u))}n(new(d("./modules/merkleid.js"))({vendor:"idsv2",sv_cid:"5344_04531",sv_pubid:"11314"},u)),n(new(d("./modules/sharedid.js"))({use_pubcid:!0},u)),n(new(d("./modules/nextrollid.js"))({partner_id:"1013"},u)),n(new(d("./modules/icu.js"))({sample:.01,watch_gpt:!0,modify_gpt_path:function(e){return e.replace("/4788/grt/pagenumber","p")},modify_dom_id:function(e){return e.replace("__slot","")}},u)),n(new(d("./modules/batch.js"))({assign_unit:function(e,t){var n,e=e.get("gpt_slot").getAdUnitPath();return e.match("_extra")?(n=(AdBridg.global("_mmrx_ctr")||0)+1,AdBridg.global("_mmrx_ctr",n),"MMRx"+Math.ceil(n/5)):(c.log("Batch skip",e),!1)},get_next_batch:function(e){return e[0]}},u)),n(new(d("./modules/lzest.js"))({},u)),n(new(d("./modules/expand.js"))({slots:{mlb1__slot:{style:"aside.adb_expander_open { z-index: 900; } aside.adb_expander_open button { display: none; } aside.adb_expander_open button.adb_close { display: block; position: absolute; top: 0; right: 0; font-size: 20px; line-height: 20px; border-radius: 20px; font-family: sans-serif; user-select: none; } aside.adb_expander_open #mlb1__slot { display: block; position: fixed; top: 0; left: 0; width: %%vp.w%%; height: %%vp.h%%; background: rgba(220, 220, 220, .9); }",open:function(e){for(var t=e.els.container.parentNode;t&&t!==document.body&&"aside"!==t.tagName.toLowerCase();)t=t.parentNode;"aside"===t.tagName.toLowerCase()&&(e.els.aside=t,e.els.aside.classList.add("adb_expander_open"))},close:function(e){e.els.aside&&(e.els.aside.classList.remove("adb_expander_open"),delete e.els.aside)}}}},u)),n(new(d("./modules/gprog.js"))({bidders:{rubicon:{deal:"hb_deal_rubicon",adid:"hb_adid_rubicon",active_deals:["896300","892684","890072","890298","893224","893300","893322","888520","889494","886636","880532","881920","880074","880092","880100","875324","873464","873728","869774","869776","869164","870014","869798","860382","860402","861460","856966","856982","857714","857712","857460","857482","857784","858194","856154","856926","856928","853868","854730","854680","855070","849512","850156","850176","847760","848874","848896","847010","847460","847480","846084","843350","843330","844098","844102","844424","842038","842538","842708","837374","841286","841308","835786","835808","833822","836904","920411","920415","920486","920487","920564","920641","920718","920792","920866","920867","920944","921025","921097","921176","1221296","831700","833040","833556","828486","828524","830104","830684","827346","828176","828178","827920","827942","827894","826604","826622","826096","825272","825530","826112","826114","826474","826506","826514","826520","826524","826530","826532","826536","826538","826546","821834","824040","824058","824078","824600","825158","825164","825166","825168","825170","825130","822818","818604","812912","814624","815630","809814","810396","811438","811440","811442","811512","811842","811840","811838","811836","808498","808500","807086","808514","808544","809092","804538","806218","806292","800426","800428","801336","801338","798830","797352","797494","797578","176758","178128","178132","224464","224468","228138","426972","426974","509972","509974","551228","555592","587740","593120","601724","611022","630478","630480","630492","630498","636652","652304","652318","653372","653618","653620","653624","653626","653628","653630","656474","658412","658414","661672","661676","662338","662342","664438","664442","680156","680158","681840","681842","684220","684234","687354","704066","705044","705046","705048","706694","706696","711304","713426","713428","713434","713436","713438","713442","715118","715120","715122","716044","716046","718298","725684","725686","728272","728276","728286","737548","739226","741632","743502","746570","746904","747488","747490","747492","747494","751574","752390","754578","754586","757442","757456","757524","758260","758266","758272","758278","758282","758284","758638","760130","760390","760408","761902","761904","761906","761908","761910","761912","762460","762462","762514","762596","762796","762798","763500","763502","764840","765144","766348","766800","767240","767586","768314","773066","773676","773930","773950","774908","774926","775666","775672","779668","780296","780298","780300","781138","782278","782892","783402","783438","783504","783532","783616","783994","784670","784688","784692","784702","784716","784720","786544","786572","786998","789024","789028","790712","790716","790724","790730","791204","791262","791298","792732","794032","795514","795864","795912","796408"]},ix:{deal:"hb_deal_ix",adid:"hb_adid_indexExchang",active_deals:["IXIVPEPTTDDG3","IXIVPEPTTDVG4","IX525702270424034978","IX525702221546178117","IX550264724736831538","IX550264684461350460","IX1586788200","GROUPMIXOPENMARKETPLACE1","IXCPDAUPFXDISPLAY","IXCPDUBERDIS","IXCPDTTDWPPDEDISPLAY6","IXCPDAUXAXISDISPLAY","IXCPDCROCS2021DIS","IXCPDAUFOXCATCHER","IXCPDSKYUKDIS","IXCPDTINUITI2021DIS","IXCPDMIQDISPLAY","IXCPDMIQDISPLAY","IXCPDDTMFLOOR","OMGIXCPDAU","IXCPDMSKCTTDDIS","IXCPDMSKCDVDIS","IXCPDRTBUKDISPLAY","IXCPDSAGEDISUK","IXCPDAUSPARKDISPLAY","XVODADISGLOBAL","IXCPDIPGAUDISPLAY","IXCPDOMDHOMDEP001","IXNZSPARKDISPLAY","IXMARKETPLACESTDMOBILE","IX1586788200","OMGIXMARKETPLACEDISPLAY2020","IXMARKETPLACESTDDISPLAY","IX591644687639373433","IX525702270424034978","IX525702221546178117","IX550264724736831538","IX550264684461350460","IXCPDBAYERDIS001","IXMARKETPLACEDISPLAY","IXCPDSTFRMDSPLY001","IX1595262354","IX560362592774763062","IX614294523060831623","IXCPDGROUPMUK","IXCPDCBADISPLAY","IXCPDSCMBB002","IXCPDADOBEDIS001","IXCPDBTUK","IX584035552077843270"]},appnexus:{deal:"hb_deal_appnexus",adid:"hb_adid_appnexus",active_deals:["920601","920633","920606","920684","920674","920603","920871","920908","920676","920671","920647","920828","920493","920677","920747","920576","920597","920608","920924","920521","920655","920683","920632","920625","920570","920568","920590","920622","920626","920907","920644","920526","920678","920787","920800","920803","920817","920558","920600","920614","920593","920605","920592","920884","920685","920762","920650","920663","920668","920835","920691","920672","920687","920497","920873","920935","920572","920620","920751","920642","920659","920711","920520","920565","920588","920900","920910","920573","920574","920612","920701","920654","920857","920516","920534","920515","920914","920688","920548","921164","920580","920610","920585","920657","920584","920880","920699","920832","920524","920909","920546","920757","920550","920877","920893","920904","920450","920617","920697","920511","920875","920824","1335495","1170511","1169127","1163755","1163757","1163759","1163763","605026","605026","946028","717372","717369","717368","1094152","1094153"]}}},u)),n(new(d("./modules/amazon.js"))({allowed_sizes:["300x250","300x600","300x50","320x50","728x90","970x250","970x90"],load_apstag:!0,init:function(e){return{pubID:3083,adServer:"googletag"}},pub_audiences:{record:function(){return!!c.qs("rvid")&&{value:c.qs("rvid"),type:"email"}}}},u)),n(new(d("./modules/emit.js"))({"pub.set_targeting":function(e,t){var n,i,r;window.useAdBridgGamConfig&&(n=AdBridg.global("grt_kvps")||{},i=AdBridg.global("grt_kvps_m")||[],n[r=t["page-view"]]=c.deepAssign(n[r]||{},t),1<r&&c.each(t,function(e,t){-1===i.indexOf(t)&&i.push(t)}),AdBridg.global("grt_kvps",n),AdBridg.global("grt_kvps_m",i))},"pub.config":function(e,t){!c.mock()&&t.mockAd&&c.mock(t.mockAd),AdBridg.global("pub.config",!0),t.has_preroll&&AdBridg.global("has_preroll",!0),t.refreshDMR1&&AdBridg.global("refreshDMR1",!0),1<t.page&&(c.log("breakadplumber running GAMCONFIG rescanner.."),c.gamconfig_scanner&&c.gamconfig_scanner())},"adb.gamconfig_slot_configure":function(e,t,n,i){var r,o={},a=parseInt((n.match(/^t(\d+)_/)||["0"]).pop())+1;t.gpt_path?(t.gpt_path.match(/[DM]MR1$/)&&(c.isarr(t.size[0])||(t.size=[t.size]),t.size.push(["fluid"]),c.log("Added fluid size to",n,t)),1!=a||n.match(/ina|out-of-page|sticky([6789]|1\d)|DCMR/)||(n.match(/[md]lb1/i)?o.under30="true":c.where(n).c.t/document.body.scrollHeight<.4&&(c.log("BreakAdPlumber - under30 set on kvp",n),o.under30="true")),o.under30||(o.under30="false"),t.gpt_path.match(/extra/i)?(a=(AdBridg.global("extra_counter")||5)+1,AdBridg.global("extra_counter",a),r="31-",a<11?r="6-10":a<21?r="11-20":a<31&&(r="21-30"),o.pos=t.gpt_path.replace(/^.*\/([^\/]+)$/,"$1").replace(/_extra$/,r),c.log("extra kvp",o.pos)):t.gpt_path.match(/out-of-page/i)||(o.pos=t.gpt_path.replace(/^.*\/([^\/]+)$/,"$1")),t.targeting=c.assign(t.targeting||{},o),c.log("BreakAdPlumber: GamConfig registerSlot equivalent",{slot_config:t,dom_id:n})):c.log("BreakAdPlumber - bad gpt path!",t,n)},"gpt.before_request":function(e,s){var t=c.wrapAsync(function(){var i,r,o,a,t,n,e=c.qs("adb_reckvps")?.001:AdBridg.global("ad1353");"number"!=typeof e&&(e=Math.random(),AdBridg.global("ad1353",e)),.01<=e||(e=(AdBridg.global("ad1353r")||0)+1,AdBridg.global("ad1353r",e),i=/^(amzn|hb_|adb_|grtcc)/,r=/^(userSegments)/,o={amp:"1",articleId:"2",blab:"3",gam_pageview_id:"4",k1:"5",k2:"6",k3:"7",msiteID:"8",msiteactive:"9","page-view":"a",pageTemplate:"b",rpv:"c",subcategory:"d",type:"e",under30:"f",url:"g",userSegments:"h",pos:"i"},a={r:e,p:{},s:[]},googletag.pubads().getTargetingKeys().forEach(function(e){var t;e.match(i)||(t=googletag.pubads().getTargeting(e),t=e.match(r)?t.length:t.join(","),a.p[e=o[e]||e]=t)}),s.forEach(function(e){var n={d:e.getSlotElementId().replace("__slot",""),g:e.getAdUnitPath().replace("/4788/grt/pagenumber","p")};c.each(e.getTargetingMap(),function(e,t){t.match(i)||(e=t.match(r)?e.length:e.join(","),n.t||(n.t={}),n.t[t=o[t]||t]=e)}),a.s.push(n)}),t=function(e){return encodeURIComponent(String(e).replace(/;:/g,""))},n=[e,Object.keys(a.p).map(t).join(";"),Object.values(a.p).map(t).join(";")],c.each(a.s,function(e){n.push(t(e.d)),n.push(t(e.g)),n.push(e.t?Object.keys(e.t).map(t).join(";"):""),n.push(e.t?Object.values(e.t).map(t).join(";"):"")}),n=n.join(":"),c.thread(function(){d("./analytics.js").sqz(5e3,!1,!1,"ad1353",n),c.log("page report targeting for request",n.length,encodeURIComponent(JSON.stringify(a)).length,n)})())});if(!window.useAdBridgGamConfig)return t(),!1;var i=AdBridg.global("grt_kvps")||{},r=AdBridg.global("grt_kvps_m")||[],o={},a=(c.each(r,function(e){o[e]={}}),{});c.each(s,function(e){var t=e.getSlotElementId(),n=parseInt((t.match(/^t(\d+)_/)||["0"]).pop())+1;a[n]||(a[n]=[]),a[n].push(e),c.each(r,function(e){var t=(i[n]||{})[e];o[e][n]=t})}),c.log("page number targeting before set check",JSON.parse(JSON.stringify(Object.keys(a).map(function(e){return e+"="+a[e].map(function(e){return e.getSlotElementId()})}))),o),c.each(o,function(e,n){var t=Object.keys(e);1<t.length?c.each(e,function(t,e){e=a[e];c.each(e,function(e){e.setTargeting(n,t)})}):AdBridg.gpt.pubads().setTargeting(n,e[t[0]])}),t()},"gamkvp.get_test_codes":function(e,t){var n=""+window.useAdBridg;(n=n.match(/^[abc]$/)?n:"c")&&t.push("t1"+n),c.qs("adb_force_expand")&&t.push("t2x")},"gpt.viewed":function(e,t,n){var i,r,o;window.useAdBridgGamConfig&&!n.grtReload&&(i=62===n.id,r=AdBridg.global("refreshDMR1")&&55===n.id,(i||r)&&(o=!1,n.grtReload=function(){o||(o=!0,t.setTargeting("under30","false"),AdBridg.refresh([t]))},setTimeout(n.grtReload,3e4)))}},u)),n(new(d("./modules/gamconfig.js"))({active:{js:"window.useAdBridgGamConfig"},autostart:0,collapseEmptyDivs:0,slots:[{dom_ad_class:"dlb1",gpt_path_builder:"{{lib.adb.grt_prefix}}DLB1",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]},{sizes:[[728,90],[970,90],[970,250]],viewport:[990,0]}]},{dom_ad_class:"mlb1",gpt_path_builder:"{{lib.adb.grt_prefix}}MLB1",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[0],viewport:[768,0]}]},{dom_ad_class:"inline1",gpt_path_builder:"{{lib.adb.grt_prefix}}{{lib.adb.device_code}}MR1",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[0],viewport:[990,0]}]},{dom_ad_class:"inline2",gpt_path_builder:"{{lib.adb.grt_prefix}}{{lib.adb.device_code}}{{lib.adb.inline_code}}2",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[0],viewport:[990,0]},{sizes:[728,90],viewport:[1190,0]}]},{dom_ad_class:"inline3",gpt_path_builder:"{{lib.adb.grt_prefix}}{{lib.adb.device_code}}{{lib.adb.inline_code}}3",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[0],viewport:[990,0]},{sizes:[728,90],viewport:[1190,0]}]},{dom_ad_class:"inline4",gpt_path_builder:"{{lib.adb.grt_prefix}}{{lib.adb.device_code}}MR4",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[0],viewport:[990,0]}]},{dom_ad_class:"inline5",gpt_path_builder:"{{lib.adb.grt_prefix}}{{lib.adb.device_code}}MR5",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[0],viewport:[990,0]}]},{dom_ad_class:"sticky1",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR1",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[[300,250],[300,600]],viewport:[990,0]}]},{dom_ad_class:"sticky2",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR2",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky3",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR3",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky4",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR4",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky5",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR5",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky6",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR6",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky7",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR7",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky8",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR8",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky9",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR9",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky10",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR10",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky11",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR11",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky12",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR12",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky13",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR13",inject:0,oop:0,size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky14",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR14",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"sticky15",gpt_path_builder:"{{lib.adb.grt_prefix}}DMR15",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"ina",gpt_path_builder:"{{lib.adb.grt_prefix}}ina",size:["fluid"]},{dom_id:"div-gpt-ad-out-of-page",gpt_path_builder:"{{lib.adb.grt_prefix}}out-of-page",inject:0,oop:1,size:[[1,1]]},{dom_ad_class:"DCMR3",gpt_path_builder:"{{lib.adb.grt_prefix}}DCMR3",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"DCMR2",gpt_path_builder:"{{lib.adb.grt_prefix}}DCMR2",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"DCMR1",gpt_path_builder:"{{lib.adb.grt_prefix}}DCMR1",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"DCMR4",gpt_path_builder:"{{lib.adb.grt_prefix}}DCMR4",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"DCMR5",gpt_path_builder:"{{lib.adb.grt_prefix}}DCMR5",size_map:[{sizes:[0],viewport:[0,0]},{sizes:[300,250],viewport:[990,0]}]},{dom_ad_class:"hl_incontent_extras",gpt_path_builder:"{{lib.adb.grt_prefix}}MMR_extra",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:"",viewport:[768,0]}]}]},u))}catch(e){c.err("Module failed",e)}},{"./analytics.js":12,"./modules/33acrossid.js":19,"./modules/amazon.js":20,"./modules/batch.js":21,"./modules/bidpool.js":22,"./modules/confiant.js":23,"./modules/connectid.js":24,"./modules/criteoid.js":25,"./modules/emit.js":26,"./modules/expand.js":27,"./modules/gamconfig.js":28,"./modules/gamkvp.js":29,"./modules/gprog.js":30,"./modules/ias.js":31,"./modules/icu.js":32,"./modules/id5id.js":33,"./modules/identitysignals.js":34,"./modules/lzest.js":35,"./modules/merkleid.js":36,"./modules/nextrollid.js":37,"./modules/pubcid.js":38,"./modules/rampid.js":39,"./modules/sharedid.js":40,"./utils.js":45}],19:[function(t,e,n){function o(e){i=e,s.thread(function(){t("../analytics.js").meta("iC",i)})()}var i,a,s=t("../utils.js"),d=t("../ajax.js"),c=t("../config.js");o("N"),e.exports=function(i,e){a||(a=!0,e.on("gamkvp.getids",function(e,t){r?t.push("iCy"):t.push("iCn")}));var r,t=s.lr("adb_iC");t?(r=t,o("L")):c.afterConsent(function(e,t){var n;e&&e.gdprApplies&&!e.consentString||(n="https://lexicon.33across.com/v1/envelope?pid="+i.pid+"&gdpr="+(e&&e.gdprApplies?1:0),t&&t.uspString&&(n+="&us_privacy="+encodeURIComponent(t.uspString)),e&&e.gdprApplies&&(n+="&gdpr_consent="+encodeURIComponent(gdprConsentData.consentString)),d({url:n,method:"GET",max_ms:1e4,withCredentials:!0,parseResponseJson:!0,data:{}},s.wrapAsync(function(e,t){e?(o("E"),s.log("33acrossID err",e)):t&&t.succeeded?t.data&&t.data.envelope?(r=t.data.envelope,o("A"),s.lw("adb_iC",r)):o("X"):(o("E"),s.log("33acrossID invalid response",t))})))}),e.on("unit.config",function(e,t){r&&(s.log("Set 33AcrossID on unit",r,t),t.set("userIdAsEids.33acrossid",{source:"33across.com",uids:[{id:r,atype:1}]}))})}},{"../ajax.js":11,"../analytics.js":12,"../config.js":14,"../utils.js":45}],20:[function(y,e,t){var _=y("../utils.js"),o=y("../modules"),s=y("../config.js"),i=(e.exports=function(p,l){function g(e){var n=[],i=p.allowed_sizes;return _.each(e,function(e,t){if(i&&-1==i.indexOf(e))return _.log("Amazon unsupported size: ",e);e=e.split("x");e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10),n.push(e)}),n}var r,e,t,n,f,m,h={},b={},a={},v=!1;p.active&&!p.active()?_.log("Amazon: inactive"):(r=!_.qs("adb_enable_amzn")&&p.test,"function"==typeof r&&(r=r()),e=p.load_apstag,"function"==typeof e&&(e=e()),t=!1,f=n=!1,"function"==typeof s.libSettings().nogpt&&s.libSettings().nogpt()||_.qs("adb_nogpt")?(_.log("nogpt Disabling Amazon"),r=n=!(e=!1)):(m=function(){var i;return t?r:(i="function"==typeof(i=p.init)?i(s.libSettings()):i)?(t=!0,r?(_.log("Amazon disabled. Use ?adb_enable_amzn=1 to activate."),r):window.apstag?void(i.skip_init||s.afterConsent(function(e,t){var n;e&&e.gdprApplies&&(i.params=i.params||{},i.params.gdpr=e.vendorData.tcfPolicyVersion?e.consentString:"",p.no_eu)?(r=!0,_.log("Amazon disabled for EU",e.consentString)):(n=(e=t&&t.uspString)&&"1---"===t.uspString,!e||n&&p.skip_ccpa_default||(i.params=i.params||{},i.params.us_privacy=t.uspString,"Y"!==t.uspString.substr(2,1)||(v=!0,!p.no_ca))?(apstag.init(i),o.trigger("amzn.init",apstag,i),_.log("Amazon initialized:",i)):(r=!0,_.log("Amazon disabled for CA",t.uspString)))})):(e||n||(_.err("Amazon library not found."),n=!0),r=!0)):(_.log("Amazon init bypassed."),!1)},r||!e||i()||(r=t=!0),l.on("unit.config",function(e,t){var n,i,r,o,a,s,d,c,u;if(!m())return n=t.get("dom_id"),i=t.get("gpt_slot"),n&&i?(r=i.getAdUnitPath()+"",(o=p.get_slot_name?p.get_slot_name(r,n,i,t):(r.match(/([^\/]+)$/)||[""])[0])?(t={slotID:n,slotName:o,sizes:b[n]||g(t.all_sizes)},p.use_pubcid&&window.PublisherCommonId&&window.PublisherCommonId.getId&&(u=window.PublisherCommonId.getId(),t.slotParams={"pubcid.org":[u]}),h[n]=t,_.log("Amazon slot configured",t,!!b[n]),void(p.pub_audiences&&!f&&(f=!0,u=p.pub_audiences,a=!1,d="n",c=function(e){s=e,_.thread(function(){y("../analytics.js").meta("iA",s)})()},l.on("gamkvp.getids",function(e,t){a&&(a=!0,t.push("iA"+d),_.log("Amazon Pub Audience gamkvp.getids",d))}),u.active&&!u.active()?(_.log("Amazon PA: inactive"),d="n",c("N")):(_.log("Amazon PA: active"),(t=u.record())?(u={hashedRecords:[{type:t.type,record:t.value}],optOut:v},apstag.rpa(u,_.wrapAsync(function(){c(v?"X":"Y"),d="y",_.log("Amazon PA: completed")}))):(_.log("Amazon PA: no email record"),d="n",c("Z")))))):_.err("Amazon noname: ",o,n,r)):_.log("Amazon skip",n,i)}),l.on("unit.restrict_sizes",function(e,t,n){m()||(t=t.get("dom_id"),n=g(n),b[t]=n,(t=h[t])&&(_.log("Amazon slot resize",t,n),t.sizes=n))}),l.on("gpt.destroy",function(e,t,n){m()||(_.log("Amazon slot remove",n),delete h[n],delete b[n])}),l.on("unit.pre_attach",function(e,t){if(!m()){var n=t.get("dom_id"),i=h[n];if(!i)return _.log("Amazon preload mismatch",n);var r=t.auction,o="amazon."+t.id;r.lock(o),apstag.fetchBids({slots:[i],timeout:r.max_ms},_.wrapAsync(function(){_.log("Amazon preload response",r.id,arguments);try{apstag.setDisplayBids()}catch(e){_.err("Amazon setBids",e)}r.unlock(o)}))}}),l.on("auction.start",function(e,t){var n,i,r,o;m()||(n=[],t.eachUnit(function(e){var e=e.get("dom_id"),t=h[e];t?(n.push(t),h[e]=null):_.log("Amazon no config",e)}),n.length&&(i={slots:n,timeout:t.max_ms},_.log("Amazon request",t.id,i),r="amazon."+t.id,a[r]=!0,t.lock(r),o=setTimeout(_.wrapAsync(function(){a[r]&&(a[r]=!1,t.unlock(r),_.err("Amazon incomplete at 50"))}),t.max_ms+50),apstag.fetchBids(i,_.wrapAsync(function(){_.log("Amazon response",t.id,arguments);try{apstag.setDisplayBids()}catch(e){_.err("Amazon setBids",e)}clearTimeout(o),a[r]&&(a[r]=!1,t.unlock(r))}))))})))},function(){if(window.apstag)_.log("Amazon already loaded");else{_.log("Loading Amazon dependency");try{n="apstag",i=window,e=document,i[n]||(i[n]={init:function(){o("i",arguments)},fetchBids:function(){o("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},dpa:function(){o("di",arguments)},rpa:function(){o("ri",arguments)},upa:function(){o("ui",arguments)},_Q:[]},(t=e.createElement("script")).async=!0,t.src="https://c.amazon-adsystem.com/aax2/apstag.js",(r=e.getElementsByTagName("script")[0]).parentNode.insertBefore(t,r))}catch(e){return _.err("Amazon load failed",e),!1}var n,i,e,t,r}return!0;function o(e,t){i[n]._Q.push([e,t])}})},{"../analytics.js":12,"../config.js":14,"../modules":18,"../utils.js":45}],21:[function(e,t,n){var c=e("../utils");t.exports=function(u,e){function p(e,t){this.group=e,this.id=t,this.units=[],this.ru=[],this.running=!1,this.done=!1,l.push(this)}var o,t={},l=[],a=[],g=(p.prototype.add=function(e){c.log("Batch add",this.id,e.get("dom_id"),e.get("gpt_slot").getAdUnitPath()),e.set("lock.batch",this.id),this.units.push(e),t[e.id]=this.id},p.prototype.run=function(){var e,t;this.running||(this.running=c.dts()||!0,c.log("Batch start",this.id,this.running),0<=(e=l.indexOf(this))&&l.splice(e,1),-1===a.indexOf(this)&&a.push(this),t=0,c.each(this.units,function(e){e.get("lock.batch")&&(e.set("lock.batch",!1),t+=1)}),t&&AdBridg.serve())},{}),f=[],s=!(p.prototype.rendered=function(e){for(var t,n=0;n<this.units.length;++n){var i=this.units[n];0<=this.ru.indexOf(i)||i.get("gpt_slot")===e&&(this.done?c.err("BatchErrRenderAfterDone"):this.running||c.err("BatchErrRenderBeforeRun",e.getSlotElementId()),this.ru.push(i))}this.ru.length===this.units.length&&(this.done=c.dts()||!0,c.log("Batch done",this.id,this.done),0<=(t=a.indexOf(this))&&a.splice(t,1),d())}),d=function(){if(!s){clearTimeout(o),s=!0;for(var e,t,n=0,i=f.length-1;0<=i;--i){var r=f[i];r.get("lock.lazy")?n+=1:(r=r.get("gpt_slot"),AdBridg.has_gpt_lock(r)||f.splice(i,1))}s=(f.length>n||a.length||!l.length||("number"==typeof(e=u.get_next_batch(l))?(t=e,o=setTimeout(c.wrapAsync(function(){d()}),t)):e&&(c.isarr(e)||(e=[e]),c.each(e,function(e){e.run()}))),!1)}};e.on("gpt.define",function(e,t,n,i,r,o){var a=u.assign_unit(t,l);if(a){for(var s=0,d=a+"_i"+s,c=g[d];c&&(c.done||c.running);)c=g[d=a+"_i"+(s+=1)];c||(g[d]=new p(a,d),c=g[d]),c.add(t)}else f.push(t)}),e.on("gpt.render_raw",function(e,t){var n=t.slot;c.each(a,function(e){e.rendered(n)}),c.each(l,function(e){e.rendered(n)}),d()})}},{"../utils":45}],22:[function(o,e,t){var c=o("../utils"),u={};e.exports=function(e,t){if(e.active){if(!e.active())return void c.log("Bidpool inactive");c.log("Bidpool active")}function r(e){for(;e._origin;)e=e._origin;return e}function a(){Object.keys(u).forEach(function(e){var t;u[e]=u[e].filter(function(e){return(c.dts()-e.ts)/1e3+7<e.rawbid.ttl}),u[e].length>n&&(t=JSON.stringify(Object.values(u[e]).map(function(e){return e.config.bidder_id+":"+e.cpm})),u[e]=u[e].sort(function(e,t){return e.cpm<t.cpm?1:t.cpm<e.cpm?-1:0}).slice(0,n),e=JSON.stringify(Object.values(u[e]).map(function(e){return e.config.bidder_id+":"+e.cpm})),c.log("POOL UPDATE",{before:t,after:e}))})}var s,n=e.max||5,d=(t.on("adb.init",function(){o("../analytics.js").meta("bp",1)}),e.poolKeyFn||function(e){return e.id}),i=function(e){var t=[e];return e._pool&&c.each(e._pool,function(e){t=t.concat(i(e))}),t};t.on("unit.dynamic",function(e,t,n,i){s!==i.unique_id&&(s=i.unique_id,a());var r,o=d(t);!o||(r=u[o]&&u[o].length&&u[o][0].cpm)&&r!=t.min_cpm&&c.log("pool floor (disabled)",o,t.id,i.unique_id,t.min_cpm,r)}),t.on("auction.bidding_done",function(e,t){a(),t.eachUnit(function(e){var i=d(e);i&&u[i]&&u[i].forEach(function(t){var n;!0!==r(t)._plock&&e.unique_id!==t.config.unit.unique_id&&(t._origin?c.log("bad pool c",i,t):t.adbridg_rendered?c.log("bad pool r",i,t):(e.eachBidReqConf(t.config.bidder_name,function(e){e.bidder_unit_id===t.config.bidder_unit_id&&(n=e)}),n?e.addBid(n,t):c.err("BadPool",i,t.config.unit.id,t.config.bidder_id,t.config.bidder_unit_id)))})})}),t.on("bid.ready",function(e,t){var n;!t._origin&&0<t.cpm&&t.rawbid&&((n=d(t.config.unit))&&(u[n]=u[n]||[],u[n].push(t)))}),t.on("bid.auction_winner",function(e,t){c.each(i(r(t)),function(e){e._plock=!0})}),t.on("gpt.render",function(e,t){t=t.getWinner();t&&c.each(i(r(t)),function(e){e._plock=!1})}),t.on("bid.render",function(e,t){var n;n=i(r(t)),c.each(u,function(e,t){u[t]=u[t].filter(function(e){return-1===n.indexOf(e)})})}),t.on("gpt.set_targeting",function(e,t,n){t.getWinner()._origin?t.setImpData("bp","yes"):t.setImpData("bp","no")})}},{"../analytics.js":12,"../utils":45}],23:[function(e,t,n){var u=e("../utils");t.exports=function(d,e){var c,s,n;function o(e,t,n,i,r){function o(e){return(b(e)||"")[d]("/","_")[d]("+","-")}var a,s,d,c,u,p,l,g=t.bidder,f=t.size,m=e.parentWindow||e.defaultView,h=m.JSON,b=m.btoa,v=m.encodeURIComponent;return!(!h||!b)&&(a="script",s="src",d="replace",c="error",u="write",n="https://"+n+"/?wrapper="+v(i)+"&tpid=",f=o(i+"/"+(g={k:{hb_bidder:[g],hb_size:[f]}}).k.hb_bidder[0]+":"+g.k.hb_size[0]),g={wh:f,wd:h.parse(h.stringify(g)),wr:0},p=f,h=o(h.stringify(g)),l=function(){e[u](t.ad)},p=n+v(p)+"&d="+h,h="err__"+ +new Date,m[h]=l,e[u]("<"+a+" on"+c+'="void('+h+'())" '+s+'="'+p+'" type="text/java'+a+'" ></'+a+">"),l={prebid:{adId:t.adId,cpm:t.cpm}},h={d:g,t:t.ad,cb:r,id:l},m[i]={},m[i][f]=h,e.close(),!0)}d.loadCondition&&!d.loadCondition()||(window.confiant=window.confiant||{},d.enableIntegrations&&(window.confiant.enable_integrations=d.enableIntegrations),window.confiant[d.propertyId]||(window.confiant[d.propertyId]={}),window.confiant[d.propertyId].clientSettings||(window.confiant[d.propertyId].clientSettings={}),c=window.confiant_refresh_slots=[],s=u.wrapAsync(function(e,t,n,i,r,o,a){"use strict";var s;a=a||"op",u.err("ConfiantBlock",JSON.stringify([e,t,n,i,r,o,a||"op"])),!d.refreshBlock||(s=void 0!==o&&void 0!==o.dfp?o.dfp.s:null)&&n&&-1===c.indexOf(s)&&u.each(googletag.pubads().getSlots(),function(e){e.getSlotElementId()===s&&(e.setTargeting("confiant_refresh","true"),c.push(s),AdBridg.refresh([e],{},!1))})}),d.v2&&(n=function(e,t,n,i,r,a){u.log("Confiant friendly-frame render",a);return o(e,{size:a.width+"x"+a.height,bidder:a.config.bidder_name,ad:a.creative||a.creative_url,cpm:a.cpm,adId:a.config.id},"clarium.global.ssl.fastly.net",d.propertyId,function(e,t,n,i,r,o){(o=o||{}).dfp||(o.dfp={}),o.dfp.s||(o.dfp.s=a.config.unit.get("dom_id")),s(e,t,n,i,r,o,"v2")})},e.on("adb.get_ff_renderer",function(e,t){t.confiantV2=n})),d.v2&&e.on("adb.confiant_pmmutate",function(e,t,n){n.sid=t.config.unit.get("dom_id"),n.a=t.config.id,n.b=t.config.bidder_name,n.c=t.cpm,n.w=t.width,n.h=t.height,n.cfd="clarium.global.ssl.fastly.net",n.cfid=d.propertyId,u.log("Confiant SafeFrame render",t,n)}),d.v2&&e.on("adb.confiant_block_sf",function(e,t){t=JSON.parse(t);t.push("sf"),s.apply(null,t)}),window.confiant[d.propertyId].clientSettings.callback=s,u.load("https://confiant-integrations.global.ssl.fastly.net/"+d.propertyId+"/gpt_and_prebid/config.js"))}},{"../utils":45}],24:[function(t,e,n){var i,o=t("../utils"),a=t("../ajax"),s=t("../config");function d(e){return e&&e.gdprApplies}function c(e){i=e,o.thread(function(){t("../analytics.js").meta("iB",i)})()}c("N"),e.exports=function(e,t){var i,n,r;e.active&&!e.active()?o.log("ConnectId disabled"):(o.log("ConnectId enabled"),i=e.pixelId,n=o.lr("connectid"),"forbar"==(r=(n?JSON.parse(n):{}).connectid)&&(n=r=!1),r&&c("C"),t.on("gamkvp.getids",function(e,t){r?t.push("iBy"):t.push("iBn")}),t.on("unit.config",function(e,t){r&&(t.set("userId.connectid",r),t.set("userIdAsEids.connectid",{source:"yahoo.com",uids:[{id:r,atype:3}]}))}),n?o.log("ConnectId Skipped: Fetch request"):"function"==typeof e.email&&(o.log("Triggered user id fetch in connectid",e),e.email(function(n){n?s.afterConsent(function(e,t){o.log("ConnectId: Email found: ",n);e=["1p=0","he="+n,"gdpr="+(d(e)?"1":"0"),"gdpr_consent="+(d(e)?e.consentString:""),"us_privacy="+(t&&t.uspString?t.uspString:""),"pixelId="+i],t="https://ups.analytics.yahoo.com/ups/"+i+"/fed?"+e.join("&"),e={url:t,method:"GET",withCredentials:!0};o.log("Fetching connectid from url: ",t),a(e,function(e,t){if(e)c("E");else{var n;if(t)try{n=JSON.parse(t)}catch(e){return o.err("VRE"),void c("E")}n&&n.connectid?(o.log("ConnectId Responded",n),r=n.connectid,c("A")):o.log("ConnectId Skipped: No response"),o.lw("connectid",t,1)}})}):o.log("ConnectId Skipped: No email found")})))}},{"../ajax":11,"../analytics.js":12,"../config":14,"../utils":45}],25:[function(t,e,n){function d(e){i=e,c.thread(function(){t("../analytics.js").meta("i3",i)})()}var i,r,c=t("../utils.js"),u=t("../ajax.js"),o=t("../config.js"),p="cto_bidid",l="cto_bundle";d("N"),e.exports=function(e,t){var a;function n(e){var t=c.cr(e);return t?d("C"):(t=c.lr(e))&&d("L"),t}function s(e,t){e&&t&&(c.cw(e,t,390),c.lw(e,t))}function i(e,t){var n=c.cookies,i=(c.url().referrer||"").replace(/^(https?\:\/\/[^\/]+).*$/,"$1/"),r=c.url().domain,o="undefined"!=typeof criteo_pubtag,i=(i=i,r=r,e=e.bundle,n=n,o=o,t=t,"https://gum.criteo.com/sid/json?origin=prebid"+(i?"&topUrl="+encodeURIComponent(i):"")+(r?"&domain="+encodeURIComponent(r):"")+(e?"&bundle="+encodeURIComponent(e):"")+(t?"&gdprString="+encodeURIComponent(t):"")+(n?"&cw=1":"")+(o?"&pbt=1":""));u({url:i,withCredentials:!0,parseResponseJson:!0},function(e,t){var n;e?("timeout"===e.type?d("ET"):e.type?(n=e.type.match(/status=(\d+)/))&&d("E"+n[1]):d("E"),c.log("CriteoID err",e)):(t.bidId?(s(p,t.bidId),a=t.bidId,d("A")):(n=p,c.cw(n,"",-1),c.lw(n,"")),t.acwsUrl?(e="string"==typeof t.acwsUrl?[t.acwsUrl]:t.acwsUrl,c.each(e,function(e){c.log("CriteoID acwsUrl",e),c.pixel(e)})):t.bundle&&s(l,t.bundle))})}r||(r=!0,t.on("gamkvp.getids",function(e,t){a?t.push("i3y"):t.push("i3n")})),e.active&&!e.active()?c.log("CriteoID disabled"):(c.log("CriteoID enabled"),o.afterConsent(function(e){var t;e&&e.gdprApplies&&!e.consentString||(e=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies?e.consentString:void 0,(t={bundle:n(l),bidId:n(p)}).bidId&&(a=t.bidId),i(t,e))}),t.on("unit.config",function(e,t){a&&(c.log("Set CriteoID on unit",a,t),t.set("userId.criteoId",a),t.set("userIdAsEids.criteoId",{source:"criteo.com",uids:[{id:a,atype:1}]}))}))}},{"../ajax.js":11,"../analytics.js":12,"../config.js":14,"../utils.js":45}],26:[function(e,t,n){var i=e("../utils.js");t.exports=function(t,e){e.on("*",i.wrapAsync(function(e){t[e]&&t[e].apply(null,arguments)}))}},{"../utils.js":45}],27:[function(e,t,n){var p=e("../utils.js");t.exports=function(o,e){var d,c;function u(e){for(;e!==top&&e.parent&&e.parent!==top;)e=e.parent;for(var t in o.slots){var n=o.slots[t],i=document.getElementById(t);if(i){var r=i.querySelector("iframe");if(r&&r.contentWindow===e)return n.els||(n.els={}),n.els.container=i,n.els.frame=r,n.dom_id=t,n}}}o.slots&&(e.on("gpt.filter_refresh",function(e,t){if(d)for(var n=t.length-1;0<=n;--n)if(t[n].getSlotElementId()===d.dom_id)return t.splice(n,1),void p.log("Expand preventing refresh",d.dom_id)}),c=p.wrapAsync(function(){var e;d&&(e=d,d=!1,e.els.gcont.style.display=e.gcont.d,e.els.gcont.style.position=e.gcont.p,e.els.gcont.style.width=e.gcont.w,e.els.gcont.style.height=e.gcont.h,e.els.gcont.style.top=e.gcont.t,e.els.gcont.style.marginLeft=e.gcont.ml,e.els.gcont.style.marginRight=e.gcont.mr,e.els.gcont.style.marginTop=e.gcont.mt,e.els.frame.setAttribute("width",e.frame_w),e.els.frame.setAttribute("height",e.frame_h),e.els.style&&e.els.style.parentNode&&(e.els.style.parentNode.removeChild(e.els.style),delete e.els.style),e.els.close&&e.els.close.parentNode&&(e.els.close.parentNode.removeChild(e.els.close),e.els.close.removeEventListener?e.els.close.removeEventListener("click",c):e.els.close.detachEvent&&e.els.close.detachEvent("onclick",c),delete e.els.close),e.source&&(e.source.postMessage("adbXpConfClose","*"),delete e.source),e.close&&e.close(e),delete e.els)}),e=p.wrapAsync(function(e){var t,n=String(e.message||e.data||e);if(n.match(/^adbXpReqOpen/)){if(!(t=u(e.source)))return p.err("ExpOpenBadSource");d=t;var i=p.vp(),r=n.replace(/^adbXpReqOpen:?/,"")||"full",o=i.w,a=i.h,s=(r.match(/^\d+x\d+/)&&(o=(s=r.split("x"))[0],a=s[1]),t.size={str:r,w:o,h:a},t.style&&!t.els.style&&(t.els.style=document.createElement("style"),t.style=t.style.replace(/\%\%vp.w\%\%/g,i.w+"px"),t.style=t.style.replace(/\%\%vp.h\%\%/g,i.h+"px"),t.els.style.innerHTML=t.style),t.els.style&&t.els.style.parentNode!==t.els.container&&t.els.container.appendChild(t.els.style),t.els.gcont=t.els.container.children[0],t.gcont={d:t.els.gcont.style.display,p:t.els.gcont.style.position,w:t.els.gcont.style.width,h:t.els.gcont.style.height,t:t.els.gcont.style.top,ml:t.els.gcont.style.marginLeft,mr:t.els.gcont.style.marginRight,mt:t.els.gcont.style.marginTop},t.els.gcont.style.display="block",t.els.gcont.style.position="relative",t.els.gcont.style.width=o+"px",t.els.gcont.style.height=a+"px",t.els.gcont.style.top="50%",t.els.gcont.style.marginLeft="auto",t.els.gcont.style.marginRight="auto",t.els.gcont.style.marginTop=-Math.floor(a/2)+"px",t.frame_w=t.els.frame.getAttribute("width"),t.frame_h=t.els.frame.getAttribute("height"),t.els.frame.setAttribute("width",o),t.els.frame.setAttribute("height",a),t.els.close||(t.els.close=document.createElement("button"),t.els.close.innerText="X",t.els.close.classList.add("adb_close"),t.els.close.addEventListener?t.els.close.addEventListener("click",c):t.els.close.attachEvent&&t.els.close.attachEvent("onclick",c),t.els.container.appendChild(t.els.close)),t.open&&t.open(t),t.source=e.source,"adbXpConfOpen");t.size&&t.size.str&&(s+=":"+t.size.str),p.log("EXPANDER sending response",s),e.source.postMessage(s,"*")}else if(n.match(/^adbXpReqClose/))return(t=u(e.source))?t!==d?p.err("ExpCloseBadConf"):void c():p.err("ExpCloseBadSource")}),window.addEventListener?window.addEventListener("message",e):window.attachEvent&&window.attachEvent("onmessage",e))}},{"../utils.js":45}],28:[function(e,t,n){function L(e){var t=e.js.split(".");if("window"==t[0])return t=t[1],window.hasOwnProperty(t)?window[t]:void 0;F.log("GamConfig JS read fail",e)}var F=e("../utils.js"),G=e("../config.js"),X=(e("../unit.js"),0),K={};t.exports=function(n,e){function t(f,m){var t,n,o,h,b,v,y,_,w,x,e,a,r,i,I,S,A,s,d,c,u,p,l,g,j,E,C,k=f.active;(k=k&&k.js?L(k):k)&&k.url&&(new RegExp(k.url,"i"),k=F.url().href.match(k.url)),k?(F.log("GamConfig enabled",f),f.pageType&&(t=[],(n=f.pageType)&&n.js&&(n=L(n)),F.each(f.slots,function(e){e.page_type===n&&t.push(e)}),F.log("GamConfig page type slots: ",{total_slots:f.slots.length,page_type_slots:t.length,slots:t}),f.slots=t),f.collapseEmptyDivs&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().collapseEmptyDivs()}),f.centering&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().setCentering(!0)}),f.safeFrames&&AdBridg.gpt.cmd.push(function(){F.log("Requiring GPT Sandbox SafeFrames"),AdBridg.gpt.pubads().setSafeFrameConfig({sandbox:!0})}),o={},h=function(e){AdBridg.cmd.push(function(){F.each(e,function(e,t){var n=e;void 0!==(e=(e=e&&e.js?L(e):e)&&e.qs?F.qs(e.qs.match)?e.qs.value:void 0:e)?(F.log("GamConfig setting page targeting: ",t,e),AdBridg.gpt.pubads().setTargeting(t,e),o[t]=e):F.log("GamConfig targeting empty",t,e,n)})})},m.on("pub.config",function(e,t){h(t.targeting)}),f.targeting&&h(f.targeting),b=function(e,t){var n=e.getAttribute(P)||"",n=(n&&(n+=";"),(n+t+"@"+F.dts()+"ms").substr(0,200));200==n.length&&(n+="..."),e.setAttribute(P,n)},(e=function(){K={},v={},y={},_={},x=!(w={}),F.each(f.slots,function(t){if(G.libSettings().gamconfig_filter&&!G.libSettings().gamconfig_filter(t))F.log("GamConfig slot skipped by pub",t);else if(t.dom_ad_class)x=!0,w[t.dom_ad_class]=t;else{if(t.inject&&!document.getElementById(t.dom_id)){var e=document.createElement("div");e.id=t.dom_id;try{document.body.appendChild(e)}catch(e){F.err("GamConfig cannot inject",t.dom_id,e)}}e=t.dom_id;v[e]||y[e]?F.err("GamConfig duplicate dom_id",e):v[e]=t}})})(),a=function(e,t){if(v[e.id])return!0;var n,i=e.getAttribute&&(e.getAttribute(O)||e.getAttribute(T));if(w[i])return!0;if(n=(F.qs("adb_gcerr")?e.children:e.children||[]).length,t&&n)for(var r=0;r<n;++r)if(a(e.children[r],!0))return!0;return!1},r=function(){clearTimeout(I),I=setTimeout(function(){A()||c()},10)},i=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("attributes"==n.type)return a(n.target,!1)?r():void 0;for(var i=0;i<n.addedNodes.length;++i){n.addedNodes[i];if(a(n.target,!0))return r()}}},S=f.scan_interval||200,A=function(){clearTimeout(I);var c=!1;if(x)for(var c=!0,e=document.querySelectorAll("["+O+"],["+T+"]"),t=0;t<e.length;++t){var n,r,i,o,a,s=e[t],d=s.getAttribute(O)||s.getAttribute(T);d&&(!(o=G.libSettings("gamconfig_ad_class_mutate",d,s))&&!1!==o||(n=d,d=o),w[d]?(o=d.replace(/[^\w\d]+/gi,""),K[i=o]=(K[i]||0)+1,r=K[i],i=f.use_pg_in_ids?"p"+X+"_":"",s.setAttribute(B,r),s.id||(s.id=D+o+"_"+i+r),s.removeAttribute(O),s.removeAttribute(T),s.setAttribute(z,d),F.log("GamConfig - setting up ad class",s.id,d,{base:w[d],me:{dom_id:s.id,dom_ctr:r}}),o=F.deepAssign({},w[d]),(a=F.deepAssign({dom_id:s.id,dom_ctr:r},o)).targeting&&F.each(a.targeting,function(e,t){var n,i;"object"==typeof e&&e.format&&(a.targeting[t]=(n=e.format,i=r,t=n.match(/\{\{[^\}]+\}\}/g),F.each(t,function(e){var t=e.replace(/[\{\}]/g,"");"dom_ctr"===t?n=n.replace(e,i):"dom_ctr_zi"===t?n=n.replace(e,i-1):F.err("GamConfig unknown slot targeting format",e)}),n))}),v[s.id]=a):(!1!==d&&F.err("GamConfig invalid ad class attribute",d,n?" (original: "+n+")":""),s.removeAttribute(O),s.removeAttribute(T),s.setAttribute(R,d+(n?"("+n+")":""))))}var u=[],p=[],l=[],g=(F.each(v,function(n,i){var t,r,o,a,s,e,d=document.getElementById(i);!d||G.libSettings("gamconfig_skip_element",i,n)?c=!0:((e=d.getAttribute(U))&&""!=e&&(F.log("Path Override: ",U),n.gpt_path=e,delete n.gpt_path_builder),(e=d.getAttribute(M))&&""!=e&&(e=e.split(/[,]+/),F.log("parse_all_page_kvp",e),t={},F.each(e,function(e){e=e.split(/[:]+/);2===e.length&&(t[e[0]]=e[1])}),F.log("Targeting map",t),h(t)),d.innerHTML="",b(d,"detected"),n.size_map&&(n.size=AdBridg.getSizes(n.size_map),delete n.size_map,!n.size.length)?(l.push(i),b(d,"vp_no_size")):(l.push(i),y[i]||(y[i]=!0,u.push(n),-1===N.indexOf(i)&&N.push(i),n.gpt_path_builder&&(n.gpt_path=(o=i,a=d,s=""+(r=n).gpt_path_builder,e=s.match(/\{\{[^\}]+\}\}/g),F.log("GamConfig extracted curlies: ",e),F.each(e,function(e){var t,n=e.replace(/[\{\}]/g,""),i="";n.match(/^lib\.pub\./)?(t=n.replace("lib.pub.",""),(i=(G.libSettings().pub||{})[t])||(G.libSettings().pub||{}).hasOwnProperty(t)||F.err("GamConfig PathBuilder setting not present:",e),s=s.replace(e,i)):n.match(/^lib\.adb\./)?(t=n.replace("lib.adb.",""),(i=G.libSettings("gamconfig_curly",t,r,o,a,G.libSettings())||AdBridg.global(t)||"")||F.err("Warning: GamConfig PathBuilder AdBridg global empty/not present:",t),s=s.replace(e,i)):F.err("GamConfig unsupported gpt_path_builder part:",e)}),F.log("GamConfig gpt_path_builder",r.gpt_path_builder,s),s)),n.dom_ad_class&&m.on("unit.init_config",function(e,t){t.get("dom_id")==i&&t.set("dom_ad_class",n.dom_ad_class)}),n.events={"gpt.defined":function(e){b(d,"gpt_define")},"gpt.rendered":function(e,t){b(d,"gpt_render:"+t.sourceAgnosticCreativeId)},"gpt.viewed":function(e,t){b(d,"gpt_view")}},m.trigger("adb.gamconfig_slot_configure",n,i,d)),_[i]=!0,p.push(i)))}),F.each(l,function(e){delete v[e]}),G.libSettings().gamconfig_fulfillment);return u.length&&(F.log("GamConfig configuring slots",u),g?g(u):AdBridg.cmd.push(u)),p.length&&AdBridg.cmd.push(function(){F.each(p,function(e){AdBridg.display(e)})}),c&&!MutationObserver&&(I=setTimeout(A,S)),c},F.gamconfig_scanner=A,d=function(){MutationObserver?(A(),s&&c(),(s=new MutationObserver(i)).observe(document.body,{attributes:!0,attributeFilter:["id",O,T],childList:!0,subtree:!0}),F.log("GamConfig MutationObserver added")):(F.log("GamConfig polling started"),A())},c=function(){clearTimeout(I),s?(s.disconnect(),s=!1,F.log("GamConfig MutationObserver disconnected")):F.log("GamConfig polling stopped")},l=p=!(u=!0),m.on("pub.spa_pv_shutdown",g=function(){if(!p){p=!0;try{F.log("GamConfig stopping for SPA"),e(),c(),F.each(o,function(e,t){F.log("GamConfig erasing KVP",t),AdBridg.gpt.pubads().setTargeting(t,[])});var i=[],r=[];F.each(AdBridg.gpt.pubads().getSlots(),function(e){var t,n;G.libSettings().gamconfig_filter_destroy_slots&&!G.libSettings().gamconfig_filter_destroy_slots(e)?F.log("Gamconfig not destroying this slot: ",e):(n=e.getSlotElementId(),t=document.getElementById(n),(n=0<=N.indexOf(n))&&i.push(e),t&&n&&(r.push(t),b(t,"destroyed"),(e=t.getAttribute(O)||t.getAttribute(T)||t.getAttribute(z)||t.getAttribute(R))&&(t.removeAttribute(z),t.removeAttribute(R),t.setAttribute(O,e),(t.id||"").match(D)&&t.removeAttribute("id"))))}),i.length&&AdBridg.destroySlots(i),u=p=!1,l&&C()}catch(e){u=p=!1,F.err("SPAPvShutdownFail",e)}}}),j=F.url().page,E=G.libSettings("gamconfig_prevent_doubleinit"),C=function(){if(E){var e=F.url().page;if(e===j)return void F.log("GamConfig prevented SPA re-init from same URL.")}p||u?(l=!0,u&&g()):(F.log("GamConfig restarting SPA"),X+=1,u=!(l=!1),d())},m.on("pub.spa_pv_initialize",C),0!=f.autostart||q?d():F.log("GamConfig waiting for publisher to initialize with action=spa_pv_initialize.")):F.log("GamConfig not enabled")}function i(){document&&document.body?(F.log("Body loaded. Initialising Gamconfig module"),t(n,e)):setTimeout(i,100)}var T="adbridg-ad-class",O="data-adbridg-ad-class",z="data-adbridg-ad-class-loaded",R="data-adbridg-ad-class-invalid",B="data-adbridg-ad-class-ctr",P="data-adbridg-phase",D="adbridg_ad_",U="data-adbridg-gam-path",M="data-adbridg-page-kvps",N=[],q=0,r=(e.on("pub.spa_pv_initialize",function(){q=1}),e.on("pub.config",function(e,t){t.targeting&&(n.targeting?F.deepAssign(n.targeting,t.targeting):n.targeting=t.targeting)}),G.libSettings().gamconfig_defer);"function"==typeof r?(F.log("GamConfig waiting to initialize"),AdBridg.cmd.push(function(){r(i)})):AdBridg.cmd.push(i)}},{"../config.js":14,"../unit.js":44,"../utils.js":45}],29:[function(e,t,n){var s=e("../utils.js");t.exports=function(e,a){var t={"gamkvp.getids":{validate:/^i[\w\d]{2}$/,update:/^i/},"gamkvp.get_test_codes":{validate:/^t[\w\d]{2}$/,update:/^t/},"gamkvp.get_user_segments":{validate:/^u[\w\d]{2}$/,update:/^u/}};googletag.cmd.push(function(){a.on("auction.before_bids",function(){s.each(t,function(t,n){var i,e,r,o=[];a.trigger(n,o),o=o.filter(function(e){return!!String(e).match(t.validate)||(s.err("GamKVP.badValue",n,e),!1)}),s.log("GamKVP setting values in adb_pvd:",n,o),i=t.update,o=o,e=googletag.pubads().getTargeting("adb_pvd")||[],r=[],e.forEach(function(e){String(e).match(i)||r.push(e)}),o&&o.length&&(r=r.concat(o)),googletag.pubads().setTargeting("adb_pvd",r),s.log("GamKVP set adb_pvd values: ",r)})})})}},{"../utils.js":45}],30:[function(n,e,t){var h=n("../utils"),r=n("../config");function b(e,t){n("../analytics.js").sqz(1e3,"yi",e,"y",t)}e.exports=function(n,e){var i,m;n.bidders&&((i=r.libSettings()).gpt_clear_kvps||(i.gpt_clear_kvps=[]),h.each(n.bidders,function(e,t){e.custom_keys?h.each(e.custom_keys,function(e){i.gpt_clear_kvps.push(e)}):(i.gpt_clear_kvps.push(e.deal),i.gpt_clear_kvps.push(e.adid))}),m={},e.on("auction.bidding_done",function(e,f){f.eachBidRequest(function(i,r){var o=r.bidder_name,e=n.bidders[o];if(e){var a=e.set_kvps,s=e.deal,d=e.adid,t=i.get("gpt_slot"),c=i.get("dom_id");if(!(t&&c&&(s&&d||a)))return h.log("Gprog skipped",t,c,s,d,typeof a);var u=!1,p={},l=e.active_deals,g=e.is_active_deal;h.each(r.responses,function(e){var t=!1,n=(g&&(t=g(i,e)),e.extras&&e.extras.dealid);n&&(n=String(n),(t=l&&l.length&&0<=l.indexOf(n)?!0:t)&&(e.blocked="pmp",h.log("Gprog: active deal removed from open market auction",e)),t=r.id+":"+e.id,m[t]=e,u=!0,b([f.instancectr,i.id,i.unique_id,r.bidder_id,n],"s"),a?(a(p,e),h.log("gprog ("+o+" custom): ",i.alias,"/",c,p)):(p[s]=p[s]||[],p[s].push(n),p[d]=p[d]||[],p[d].push(e.id),h.log("gprog ("+o+"): ",i.alias,"/",c,s,"=",n,";",d,"=",e.id)))}),u&&(i.settings.gprog=i.settings.gprog||{},h.each(p,function(e,t){h.isarr(e)||(e=[e]),i.settings.gprog[t]||(i.settings.gprog[t]=[]),i.settings.gprog[t]=i.settings.gprog[t].concat(e)}))}})}),e.on("gpt.set_targeting",function(e,t,n){t.settings.gprog&&h.each(t.settings.gprog,function(e,t){e=n.getTargeting(t).concat(e);n.setTargeting(t,e)})}),e.on("bid.render",function(e,t){var n=t.config,i=t.config.id+":"+t.id;m[i]&&b([(i=n.unit).auction.instancectr,i.id,i.unique_id,n.bidder_id,t.extras.dealid],["r",t.width+"x"+t.height,t.extras.crid])}))}},{"../analytics.js":12,"../config":14,"../utils":45}],31:[function(e,l,t){var g=e("../utils.js"),f=e("../analytics.js"),m=!1;l.exports=function(e,t){var n,r,o,a,s,d,c,u,p;function i(e){var i=[];g.each(e,function(e){var t,n=e.getSlotElementId();-1===s.indexOf(n)&&(t=e.getAdUnitPath(),e=e.getSizes().map(function(e){return e.getWidth&&e.getHeight()?[e.getWidth(),e.getHeight()]:[1,1]}),s.push(n),i.push({adSlotId:n,size:e,adUnitPath:t}))}),i.length<1||(0===d&&(r=g.dts(),a=g.dts(),AdBridg.lock(c),u=!0,o=setTimeout(g.wrapAsync(function(){u&&(u=!1,AdBridg.unlock(c),g.err("IAS incomplete at 2 secs"))}),2e3)),e=2e3-(g.dts()-a),d++,n.queue.push({adSlots:i,dataHandler:p,timeout:e}))}e.defer&&!m?(m=!0,g.log("IAS deferring load"),e.defer(g.wrapAsync(function(){g.log("IAS resuming load"),l.exports(e,t)}))):e.active&&!e.active()?g.log("IAS disabled"):e.pubId&&(g.log("IAS enabled"),(n=window.__iasPET||{}).queue=n.queue||[],n.pubId=e.pubId,s=[],d=0,c="IASRequest",u=!2e3,p=function(e){u?(n.setTargetingForGPT(),--d<=0&&(f.metaqx("ias_d",g.dts()-r),f.metaqx("ias_st",r),u=!1,clearTimeout(o),AdBridg.unlock(c))):g.log("IAS returned after lock released")},t.on("gpt.render_raw",function(e,t){var t=t.slot.getSlotElementId(),n=s.indexOf(t);-1!=n&&(g.log("Removing slot from IAS list",t),s.splice(n,1))}),t.on("gpt.before_request",function(e,t){i(t)}),t.on("auction.start",function(e,t){i(AdBridg.gpt.pubads().getSlots())}))}},{"../analytics.js":12,"../utils.js":45}],32:[function(Z,e,t){var ee=Z("../utils.js"),n=Z("../modulewrapper.js");e.exports=n({name:"icu",track_as:"z"},function(s,w){var U=s.tick_ms||100,M=15e3,N=5e3,x={},r={unknown:0,above_viewport:1,below_viewport:2,partially_above_viewport:3,in_viewport:4,partially_below_viewport:5},q={"160x600":1,"300x250":2,"300x600":3,"320x50":4,"320x100":5,"468x60":6,"728x90":7,"970x90":8,"970x250":9},u=0,p=0,l=0,g=ee.dts(),i=0,f=!1,m=!1,t={init:0,focus:1,mousemove:2,mousedown:3,click:4,touchstart:5,touchend:6,keydown:7,keyup:8,scroll:9},I=ee.qs("adb_icu_box"),n=!0,o=(ee.qs("adb_icu")||(0===s.sample?n=!1:s.sample&&s.sample<1&&(n=Math.random()<=s.sample)),s.watch_gpt||n||I);function a(e){return(Math.floor(e)||0).toString(36)}function d(e){return a(100*e)}function h(e){e=Math.round(e.c.w)+"x"+Math.round(e.c.h);return q[e]||e}function c(e){return"number"!=typeof e&&(e=ee.dts()),Math.floor(e/10).toString(36)}function L(e){return Math.floor(20*(e.o&&e.o.v||0))}function F(e){return L(e).toString(36)}function b(e){return r[e.p]}function v(e){return.05<=e.v}function G(e){return e.o&&.95<=e.o.o}function X(e){return 0<b(e)?v(e)?F(e):a(e.d):"0"}function S(e){return{t:c(),p:(t=e,String(b(t))+(Math.floor(t.c.vp.y+t.c.t)||0).toString(36)+"."+(Math.floor(t.c.vp.y)||0).toString(36)),d:X(e),i:(f?"1":"0")+i+c(ee.dts()-g)};var t}function A(e){return[e.dt,e.a,e.uid,e.uuid]}function K(e){e=e||ee.dts(),l=e+M}function j(e,t){n&&Z("../analytics.js").sqz(N,"zi",e,"z",t),K()}function y(e,t){var n=x[e];if(n.dt&&n.m.length){for(var t=S(t),i=A(n),t=[n.dctr,n.mctr,n.r.t,n.r.p,n.r.d,n.r.i,n.v.t,n.v.p,n.v.d,n.v.i,t.t,t.p,t.d,t.i].join(","),r=[],o=(ee.each(n.s,function(e){0<e[0]?r.push(e[0].toString(36)+"."+e[1]):r.push(e[1])}),r=r.join(","),[]),a=20;0<=a;--a){for(var s,d,c,u,p,l=0,g=0,f=0,m=0,h=0,b=0,v=0;v<n.m.length;++v){var y,_=n.m[v];_.vn>=a?(y=_.d*_.vn,l+=_.d,g+=y,h+=_.d,b+=y,f=Math.max(h,f),m=Math.max(b,m)):b=h=0}0<g&&(l!==s||f!==c||g!==d||m!==u)&&(s=l,d=g,c=f,u=m,p=a.toString(36)+"."+l.toString(36)+"."+g.toString(36),l===f&&g===m||(p+="."+f.toString(36)+"."+m.toString(36)),o.push(p))}o=o.join(","),t=[t,r,o].join("_");!n.v5r&&1e3<n.v5&&(t+="_1",n.v5r=!0,I&&(n.av=z),ee.logl("icu",z,O," // ",e,"counted iab view"),w.trigger("icu.iab",n)),ee.logl("icu",z,O," // ",e,"finalized"),j(i,t),n.mctr+=1}else ee.logl("icu",z,O," // ",e,"stopped empty");n.lts=0,n.v=!1,n.ve=!1,n.m=[]}ee.isdebug()&&(AdBridg.icu={watch:o,sampled:n,sampling:s.sample||1,measurements:x,stat:function(){var e=ee.dts(),n="unknown";return ee.each(t,function(e,t){i===e&&(n=t)}),{last_measure:u,measure_ms:e-u,last_evt:n,idle_ms:e-g,idle:f}}});var _=!1,E=!1,C=!1,k=!1,T=!1,O=0,z=0,Y=ee.wrapAsync(function(e){if(T=!0,U<e-z||k){O+=1,z=e;var t=!1;u=ee.dts(),p=u+500,f=f||3e4<u-g,!m&&f?(m=f,w.trigger("icu.idle")):!f&&m&&(m=f,w.trigger("icu.active")),l&&l<z&&(k=!(l=!1));var n,i,r,o,a,s,d,c=[];for(n in x)x.hasOwnProperty(n)&&(i=x[n],r=ee.where(n,!0,i.ok),I&&(i.dbw=r),r.v?(1===r.v&&i.lv<1&&w.trigger("icu.onscreen",i,r),i.lv?1===i.lv&&r.v<1&&w.trigger("icu.leaving",i,r):w.trigger("icu.appearing",i,r),!i.loo&&r.o&&r.o.o?(i.loo=!0,w.trigger("icu.obstructed",i,r)):!i.loo||r.o&&r.o.o||(i.loo=!1,w.trigger("icu.unobstructed",i,r)),i.lv=r.v):i.lv&&(i.lv&&w.trigger("icu.offscreen",i,r),i.lv=0),i.mx||(f||!v(r)||G(r)?(i.v&&(ee.logl("icu",z,O," // ",n,"stopped",f,!v(r),G(r)),y(n,r),k=!0),v(r)||function(e){B[e]||(B[e]=!0,ee.dom(e,.01,0,J))}(n)):(t=!0,o=Math.max(1,Math.floor((z-i.lts)/10)),(s=h(r))!=i.s[i.s.length-1][1]&&(a=Math.max(1,Math.floor((z-i.rts)/10)),i.s.push([a,s]),ee.logl("icu",z,O," // ",n,"size changed",a,i.s[i.s.length-1][1],s),w.trigger("icu.resized",i,r)),i.v?(a=z-i.lts,i.vt+=a,i.va+=a*(r.o&&r.o.v||0),r.o&&.5<=r.o.v&&(i.v5+=z-i.lts),i.lts=z,s=F(r),d=i.m.length-1,(d=0<=d&&i.m[d])&&d.v==s?(d.d+=o,d.te=z):i.m.push({d:o,t:z,v:s,vn:L(r)}),c.push({t:i,d:n,w:r}),6e4<=i.vt&&(ee.logl("icu",z,O," // ",n,"tracker vt max",i.vt),i.mx=!0,k=!0)):(ee.logl("icu",z,O," // ",n,"started"),V(i,r,z)))));k&&ee.each(c,function(e){y(e.d,e.w),i.mx||(ee.logl("icu",z,O," // ",e.d,"restarted"),V(e.t,e.w,z))}),t||(ee.logl("icu",z,O," // nothing to measure; ending ticks"),l=E=!1),I&&ee.each(x,H),k=!1}C=C&&!(E=!0),E&&(_=window.requestAnimationFrame(Y)),T=!1});function R(){C=!0,T||(_&&window.cancelAnimationFrame(_),_=window.requestAnimationFrame(Y))}var B={};function J(e){B[e]=!1,R()}function V(e,t,n){e.v=S(t),e.lts=n,e.vt=e.vt||0,e.va=e.va||0,e.v5=e.v5||0,l||K(n)}function W(e){return e.id?e.tagName+"#"+e.id:e.tagName+"."+String(e.className).replace(/^([^\s]+).*$/,"$1").replace(/[^a-z0-9_-]/i,"")}function P(e){var t=document.createElement("div");return t.style="display:inline-block;background:rgba(0,0,0,.6);padding:2px 4px;margin:1px 3px;color:white;",t.innerHTML=e,t}function D(e){return((Math.floor(e/100)||0)/10).toString().replace(/^(\d+\.\d).+$/,"$1").replace(/^([^\.]+)$/,"$1.0")+"s"}function H(e,t){var n,i,r,o,a=e.dbw,s=document.getElementById(t);s&&(r=t+"__adb_dom_debug",(o=document.getElementById(r))?n=o.children[0]:((o=document.createElement("div")).id=r,(debug_el_container=document.createElement("div")).style="position:relative;width:0px;height:0px;margin:0;padding:0;",debug_el_container.appendChild(o),s.children.length?s.insertBefore(debug_el_container,s.children[0]):s.appendChild(debug_el_container),(n=document.createElement("div")).style="background:rgba(255,255,255,.7)",o.appendChild(n),o.appendChild(P(t+" #"+e.dctr+" render @ "+D(e.rts))),e.dbgt={}),!e.dbgt.gv&&e.gv&&(e.dbgt.gv=!0,o.appendChild(P("GPT view @ "+D(e.gv)))),!e.dbgt.v5&&1e3<e.v5&&(e.dbgt.v5=!0,o.appendChild(P("AdBridg IAB view flag @ "+D(z)))),!e.dbgt.v5r&&e.av&&(e.dbgt.v5r=!0,o.appendChild(P("AdBridg IAB view sent @ "+D(e.av)))),r=(a.o||a).v,s=Math.floor(100*r)+"% in view",f&&(s+=" (ux_idle)"),s+="; "+Math.floor(e.va/e.vt*100)+"% over "+D(e.vt),n.innerText!==s&&(t=r<1||f?r<.5||f?"180,30,30,.9":"180,180,30,.9":"30,180,30,.9",e=a.c.w-10+"px",o.style="position:absolute;background:rgba("+t+");left:5px;top:5px;width:"+e+";height:"+(a.c.h-10)+"px",a.o&&a.o.o&&(i=[],ee.each(a.o.e,function(e,t){i.push("["+t+"="+Math.floor(100*e.o)+"%] "+W(e.el))}),s+="; intersect "+i.join(", ")),n.innerText=s,r=ee.where(n,!0),t=String(r.o&&r.o.v||r.v),n.getAttribute("data-adb-vmw")!==t&&(n.setAttribute("data-adb-vmw",t),s=a=!1,1==(t=b(r))||3==t?a=!0:2==t||4==t?s=!0:r.o&&r.o.e.tl?a=!0:r.o&&r.o.e.br&&(s=!0),(s||a)&&(r=(t=ee.where(o,!0)).o&&t.o.v||t.v,o=b(t),!a||!r||2===o||4===o||t.o&&t.o.e.br?!s||!r||1===o||3===o||t.o&&t.o.e.tl||(n.style.position="initial",n.style.bottom="initial"):(n.style.position="absolute",n.style.bottom="0px",n.style.width=e)))))}function $(e,t,n,i,r){(i=!!i&&e)&&s.modify_dom_id&&(i=s.modify_dom_id(i));var o=ee.where(e,!0),a=(x[e]&&y(e,o,ee.dts()),h(o));return x[e]={a:n,d:e,dt:i,ok:r,dctr:t,mctr:1,uid:0,uuid:0,lts:0,rts:ee.dts(),r:S(o),s:[[0,a]],m:[],lv:o.v,loo:o.o&&o.o.o||0},R(),x[e]}var Q;w.on("gpt.render,gpt.render_pt",function(e,t,n,i){var r;o&&(r=n.slot.getAdUnitPath(),s.modify_gpt_path&&(r=s.modify_gpt_path(r)),n=n.slot.getSlotElementId(),n=$(n,i,r,!0),t&&(n.uid=t.id,n.uuid=t.unique_id),j(A(n),[".",n.dctr,n.s[0][1],n.r.t,n.r.p,n.r.d,n.r.i].join(",")))}),w.on("gpt.viewed_raw",function(e,t){var n,i;o&&(t=t.slot.getSlotElementId(),!(n=x[t])||n.v&&n.m.length||n.v5r||(t=ee.where(t,!0)).o&&!t.o.v&&(i=[(t=t).i||"",String(r[t.p]),X(t),d(t.v),t.in,a(t.c.t),a(t.c.l),a(t.c.w),a(t.c.h)],t.o&&(i.push(d(t.o.o)),i.push(d(t.o.v)),t.o.e&&ee.each(t.o.e,function(e,t){i.push(t+";"+e.o+";"+W(e.el))})),t=i.join(","),ee.logl("icu","empty at GPT view",n.dt),j(A(n),["*",n.dctr,n.mctr,t].join(","))),I&&n&&(n.gv=ee.dts()),k=!0,R())}),window.addEventListener&&(Q=function(e){f=!1,g=ee.dts(),i=t[e.type]||"u",p<g&&R()},ee.each(Object.keys(t),function(e){"init"!==e&&window.addEventListener(e,Q,!0)}),window.addEventListener("blur",function(){f=!0})),w.on("icu.watch",function(e,t,n,i){$(t,1,!1,n,i)}),w.on("icu.ignore",function(e,t){x[t]&&delete x[t]})})},{"../analytics.js":12,"../modulewrapper.js":41,"../utils.js":45}],33:[function(t,e,n){function s(e){i=e,d.thread(function(){t("../analytics.js").meta("iD",i)})()}var i,d=t("../utils"),c=t("../ajax"),u=t("../config"),p="User ID - ID5 submodule: ",l="id5id",g=l+"_last",f=30;function r(e){return l+"_"+e+"_nb"}function m(e,t){d.lw(r(e),t,f,!0)}function h(e){t=e;var t=((t=d.lr(r(t),!0))?parseInt(t):0)+1;return m(e,t),t}function b(t){var n=0;if(t&&"string"==typeof t.universal_uid){let e={uid:t.universal_uid,ext:{linkType:n=t.link_type||n}};n=d.deepAccess(t,"ab_testing.result");switch(s("A"),n){case"control":d.log(p+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),e.ext.abTestingControlGroup=!0,s("C");break;case"error":d.log(p+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1"),d.err("ID5ABERR");break;case"normal":d.log(p+"A/B Testing - user is NOT in the Control Group"),e.ext.abTestingControlGroup=!1}return d.log(p+"Decoded ID",e),e}}s("N"),e.exports=function(r,e){if(r.active&&!r.active())d.log("ID5 disabled");else{var o,a=d.lr(l,!0),t=d.lr(g,!0);if(d.log("ID5 enabled",a,t),r.google_esp&&(window.ID5EspConfig={partnerId:r.partner}),a){h(r.partner);try{a=JSON.parse(decodeURIComponent(a)),o=b(a),d.log(p+"using cached ID",a)}catch(e){d.err("ID5DecodeErr",e)}}var n=!1;t&&(t=new Date(t).getTime(),new Date((new Date).toUTCString()).getTime()-t<288e5&&(n=!0)),n||u.afterConsent(function(e,t){var n=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies?1:0,i={partner:r.partner,gdpr:n,nbPage:h(r.partner),o:"pbjs",rf:""+window.top.location,top:1,u:window.location.href,v:"v7.15.0"},n=(n&&e.consentString&&(i.gdpr_consent=e.consentString),t&&t.uspString&&(i.us_privacy=t.uspString),a&&a.signature&&(i.s=a.signature),r.pd&&(i.pd=r.pd),r.provider&&(i.provider=r.provider),r.ab&&(i.ab_testing={enabled:!0,control_group_pct:r.ab}),d.log(p+"requesting an ID from the server",i),{url:"https://id5-sync.com/g/v2/"+r.partner+".json",method:"POST",withCredentials:!0,data:JSON.stringify(i)});c(n,function(e,t){if(e)s("E"),d.log(p+"getId fetch encountered an error",error);else{var n;if(t)try{n=JSON.parse(t)}catch(e){return d.err("ID5PE"),void s("E")}n?(d.log(p+"response received from the server",n),m(r.partner,0),n.privacy&&d.lw("id5id_privacy",JSON.stringify(n.privacy),f,!0),d.lw(l,encodeURIComponent(JSON.stringify(n)),90,!0),o=b(a=n),d.lw(g,(new Date).toUTCString(),90,!0)):(d.err("ID5EM"),s("E"))}})}),e.on("gamkvp.getids",function(e,t){o?t.push("iDy"):t.push("iDn")}),e.on("unit.config",function(e,t){if(o){let e={id:o.uid,atype:1};o.ext&&(e.ext=o.ext),t.set("userIdAsEids.id5id",{source:"id5-sync.com",uids:[e]})}})}}},{"../ajax":11,"../analytics.js":12,"../config":14,"../utils":45}],34:[function(e,t,n){var o=e("../utils.js"),a=["liveramp","criteoId","sharedid","pubcid","connectid"];t.exports=function(e,t){var i=[],r=!1;window.encryptSignals=function(e,t){var n="",i={},n="object"==typeof t?btoa(JSON.stringify(t)):btoa(t);return i[e]="1||"+n,Promise.resolve(i[e])},o.log("userIds module enabled"),t.on("unit.config_brc",function(e,t){var n;r||(n=t,a.forEach(function(e){n.get("userIdAsEids."+e)&&i.push(n.get("userIdAsEids."+e))}),r=!0,o.log("userId signals",i))}),t.on("gpt.before_request",function(e,t){i.length<=0?o.log("No ID signals to send to gam"):(AdBridg.gpt.encryptedSignalProviders=AdBridg.gpt.encryptedSignalProviders||[],i.forEach(function(e){var t;e.source&&e.uids[0]&&e.uids[0].id&&(t=e.source+"/enc",AdBridg.gpt.encryptedSignalProviders.push({id:t,collectorFunction:function(){return window.encryptSignals(e.source,e.uids[0].id)}}))}))})}},{"../utils.js":45}],35:[function(e,t,n){var o=e("../utils");t.exports=function(e,t){var i={},n={},r=e.offset_distance||400;t.on("auction.start",function(e,t){t.eachUnit(function(e){var t=e.get("dom_id");if(!t)return o.err("LzEstNoDom",e.alias);i[t]="lzno",n[t]&&(o.logl("lz","LazyEst removing previous",t),o.undom(t,n[t])),n[t]=function(){o.logl("lz","LazyEst triggered",t),i[t]="lzyes"},o.logl("lz","LazyEst measurement",t,o.where(t)),o.dom(t,r,0,n[t])})}),t.on("gpt.set_targeting",function(e,t,n){t.setImpData("lz",i[t.get("dom_id")]||"lzna")})}},{"../utils":45}],36:[function(t,e,n){function a(e){i=e,d.thread(function(){t("../analytics.js").meta("i9",i)})()}function s(e){return e&&e.pam_id&&"string"==typeof e.pam_id.id?e.pam_id:void 0}var i,d=t("../utils"),c=t("../ajax"),u=t("../config");a("N");e.exports=function(r,e){var t=JSON.parse(d.cr("merkleId")||"{}"),o=s(t);o&&a("C"),e.on("gamkvp.getids",function(e,t){o?t.push("i9y"):t.push("i9n")}),e.on("unit.config",function(e,t){o&&(t.set("userId.merkleId",o.id),t.set("userIdAsEids.merkleId",{source:"merkleinc.com",uids:[{id:o.id,atype:3}],ext:o.keyID?{keyID:o.keyID}:void 0}))}),o?d.log("MerkleId Skipped: Fetch request"):u.afterConsent(function(e,t){var n,i;((i=r)&&"string"==typeof i.vendor?"string"!=typeof i.sv_cid?(d.err("User ID - merkleId submodule requires a valid sv_cid string to be defined"),1):"string"!=typeof i.sv_pubid&&(d.err("User ID - merkleId submodule requires a valid sv_pubid string to be defined"),1):(d.err("User ID - merkleId submodule requires a valid vendor to be defined"),1))||(i=["vendor="+r.vendor,"sv_cid="+r.sv_cid,"sv_pubid="+r.sv_pubid,"sv_domain="+d.url().domain],(n="string"==typeof(n=r).sv_session?n.sv_session:d.cr("_svsid"))&&i.push("sv_session="+n),i={url:n="https://id2.sv.rkdms.com/identity/?"+i.join("&"),method:"GET",withCredentials:!0},d.log("Fetching merkleid from url: ",n),c(i,function(e,t){if(e)a("E");else{var n;if(t)try{n=JSON.parse(t)}catch(e){return d.err("MKE"),void a("E")}n?(d.log("MerkleId Responded",n),o=s(n),(t=n)&&t.c&&t.c.value&&"string"==typeof t.c.value&&d.cw("_svsid",t.c.value,7/24),a(o?"A":"B")):d.log("MerkleId Skipped: No response"),o&&d.cw("merkleId",JSON.stringify(n),7/24)}}))})}},{"../ajax":11,"../analytics.js":12,"../config":14,"../utils":45}],37:[function(t,e,n){function a(e){i=e,s.thread(function(){t("../analytics.js").meta("i4",i)})()}var i,s=t("../utils.js"),d=(t("../ajax.js"),t("../config.js"),"_adb_nextroll_id");a("N"),e.exports=function(e,t){var n,i=!1;function r(){for(var n=["ReadAdID","YES","RetrieveNearestAdID","&ssn=","slice","join","ignoreOptout","&eid=","/push?uid=","/ping?uid=","dca0","loadSSN","exports","call","defineProperty","toStringTag","__esModule","object","create","string","default","hasOwnProperty","undefined","Module","bind","prototype","floor","random","toString","xid0","XIDOPTOUT","https://sn.dca0.com/key","https://sn36.dca0.com","GET","onreadystatechange","readyState","DONE","responseText","status","send","https://l",".dca0.com/srv-id/?uid=","k4838af91965497293f0d0f92c691c29","length","charAt","substring","indexOf","getTime","expires=","toUTCString","cookie",";path=/;samesite=none;secure;","PID","app","createElement","script","src","body","appendChild"],e=n,t=249;--t;)e.push(e.shift());var i,r,j=function(e,t){return n[e=+e]};function o(e){var t;return(r[e]||(t=r[e]={i:e,l:!1,exports:{}},i[e][j("0x1")](t[j("0x0")],t,t.exports,o),t.l=!0,t))[j("0x0")]}i=[function(e,t){function r(e){var t;return i[e]?i[e][j("0x0")]:(t=i[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports)}var n,i;n=[,,function(e,t,n){e[j("0x0")]=n(3)},function(e,t){!function(){"use strict";var e,t,h=i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i(),n=j("0x11"),b=j("0x12"),v=j("0x13"),y=j("0x14");function i(){return Math[j("0xe")](65536*(1+Math[j("0xf")]()))[j("0x10")](16).substring(1)}function _(e,t){var n=new XMLHttpRequest;n.open(j("0x15"),e,!0),n[j("0x16")]=function(){n[j("0x17")]===XMLHttpRequest[j("0x18")]&&t&&t(n[j("0x19")],n[j("0x1a")])},n[j("0x1b")]()}function w(t){var i=new Array(19),r=0,o=!1;function e(e,t,n){200===n?(n=JSON.parse(t),i[e]=n.id,r++):o=!0}for(var n=0;n<19;n++)_(j("0x1c")+n+j("0x1d")+h,e[j("0xc")](void 0,n));!function e(){o?t(null):19!==r?setTimeout(e,100):t&&t(i)}()}function x(n){!function e(){var t=window[j("0x1e")];t?n&&n(t):setTimeout(e,100)}()}function I(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=n[j("0x1f")],r=0;r<i;r++){for(var o=n[r];" "===o[j("0x20")](0);)o=o[j("0x21")](1);if(0===o[j("0x22")](t))return o[j("0x21")](t.length,o[j("0x1f")])}return""}function S(e,t,n){var i=new Date,n=(i.setTime(i[j("0x23")]()+24*n*60*60*1e3),j("0x24")+i[j("0x25")]());document[j("0x26")]=e+"="+t+";"+n+j("0x27")}function A(e,t){return t&&(t.PID&&(e+="&PID="+t[j("0x28")]),t[j("0x29")]&&(e+="&app="+t[j("0x29")])),e}(e=document[j("0x2a")](j("0x2b")))[j("0x2c")]=v,t=e,function e(){document[j("0x2d")]?document.body[j("0x2e")](t):setTimeout(e,1)}(),window[j("0x2f")]=function(){return j("0x30")===I(b)?null:I(n)},window[j("0x31")]=function(n,i){x(function(t){w(function(e){e?_(A(v+"/"+t+"/ping/nearest?uid="+h+j("0x32")+e[j("0x33")](0,19)[j("0x34")](""),i),n):n&&n(null)})})},window.RetrieveAdID=function(e,i,r){var o,a,s,d,c,u,p=!!r&&r[j("0x35")];function l(t){!function e(){s?a&&t(a):setTimeout(e,1e3)}()}function g(e,t,n){_(A(v+"/"+e+"/push?uid="+h+j("0x36")+encodeURIComponent(n)+j("0x32")+t.slice(0,19)[j("0x34")]("")))}function f(e,t){_(A(y+j("0x37")+h+j("0x36")+encodeURIComponent(t)+j("0x32")+e.slice(0,10).join(""),r))}function m(){var e,t,n;0==--d&&(a=c||u||a||null,s=!0,p?i&&i(a):a?(e=a,t=r,n=function(e){e?(S(b,j("0x30"),1825),i&&i(null)):(S(o,a,365),i&&i(a))},_(A("https://optout.dca0.com/app/v1/sync?uid="+h+j("0x36")+encodeURIComponent(e),t),function(e){n("1"===e)})):i&&i(null))}j("0x30")!==I(b)||p?(o=r&&r[j("0x28")]?n+"_"+r[j("0x28")]:n,a=I(o)||null,e&&e(a),s=!1,d=2,u=c="",w(function(n){var e;n?(x(function(t){var e;e=n,_(A(v+"/"+t+j("0x38")+h+"&ssn="+e[j("0x33")](0,19)[j("0x34")]("")),function(e){c=e,m(),c||l(g[j("0xc")](null,t,n))})}),e=n,_(A(y+"/ping?uid="+h+j("0x32")+e[j("0x33")](0,10)[j("0x34")](""),r),function(e,t){u=e,m(),u||200!==t||l(f["bind"](null,n))})):i&&i(null)})):(e&&e(null),i&&i(null))},window.dca0=window[j("0x39")]||{},window[j("0x39")].loadSNID=x,window[j("0x39")][j("0x3a")]=w}()}],i={},r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object[j("0x2")](e,t,{enumerable:!0,get:n})},r.r=function(e){j("0xa")!=typeof Symbol&&Symbol[j("0x3")]&&Object[j("0x2")](e,Symbol[j("0x3")],{value:j("0xb")}),Object[j("0x2")](e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&j("0x5")==typeof t&&t&&t[j("0x4")])return t;var n=Object[j("0x6")](null);if(r.r(n),Object.defineProperty(n,j("0x8"),{enumerable:!0,value:t}),2&e&&j("0x7")!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}[j("0xc")](null,i));return n},r.n=function(e){var t=e&&e[j("0x4")]?function(){return e[j("0x8")]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object[j("0xd")].hasOwnProperty[j("0x1")](e,t)},r.p="/",r(r.s=2)}],r={},o.m=i,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object[j("0x2")](e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol[j("0x3")],{value:"Module"}),Object[j("0x2")](e,j("0x4"),{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&j("0x5")==typeof t&&t&&t[j("0x4")])return t;var n=Object[j("0x6")](null);if(o.r(n),Object[j("0x2")](n,"default",{enumerable:!0,value:t}),2&e&&j("0x7")!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e[j("0x4")]?function(){return e[j("0x8")]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype[j("0x9")][j("0x1")](e,t)},o.p="/",o(o.s=0)}function o(e){s.log("Nextroll ID fetched",e||"(empty)"),function(e){if(null!=e&&""!==e)return 1;a("E")}(e)&&(i=e,a("A"),s.lw(d,e))}t.on("gamkvp.getids",function(e,t){i?t.push("i4y"):t.push("i4n")}),"string"!=typeof e.partner_id?s.err("Nextroll missing partner_id"):!function(){var e=navigator.userAgent.toLowerCase();if(0<=e.indexOf("(linux; android ")){var t=e.substr(e.indexOf("linux; android ")+15).split(/\W/),n=parseInt(t[0]),i=parseInt(t[1]),t=parseInt(t[2]);if(isNaN(n)||n<4||4===n&&isNaN(i)||4===n&&0===i&&(isNaN(t)||t<3))return}else if(!e.match(/\b(ipad|iphone|ipod)\b/)||parseInt(e.substr(e.indexOf(") version/")+10),10)<9)return;return 1}()?(s.log("Nextroll ID skipped: invalid UA"),a("U")):(i=s.lr(d,!0),t.on("unit.config",function(e,t){i&&(s.log("Set Nextroll ID on unit",i,t),t.set("userId.nextroll",i),t.set("userIdAsEids.nextroll",{source:"nextroll.com",uids:[{id:i,atype:1}]}))}),i?(s.log("Nextroll ID read",i),a("L")):(n=!1,t.on("gpt.render_raw",function(){n||(n=!0,s.log("Nextroll ID setup"),r(),window.RetrieveAdID(o,o,{PID:e.partner_id,app:"nextroll_id_module"}))})))}},{"../ajax.js":11,"../analytics.js":12,"../config.js":14,"../utils.js":45}],38:[function(n,e,t){var i,r=n("../utils"),o="_pubcid",a="PublisherCommonId",s=r.cr("_pubcid_optout"),d="N";try{s||("object"==typeof window[a]?(i=window[a].getId(),d="A",r.log("Read pubcid from API:"+i)):(i=r.cr(o),d=i?"C":(i=r.lr(o))?"L":(i=r.genUUID(),"G"),r.cw(o,i,1825),r.lw(o,i),window[a]={getId:function(){return i}},r.log("Read pubcid from cache"+i)))}catch(e){r.err("pubcid init fail",e),d="E"}e.exports=function(e,t){i&&t.on("unit.config",function(e,t){t.set("userId.pubcid",i),t.set("userIdAsEids.pubcid",{source:"pubcid.org",uids:[{id:i,atype:1}]})}),t.on("gamkvp.getids",function(e,t){i?t.push("i1y"):t.push("i1n")}),r.thread(function(){n("../analytics.js").meta("i1",d)})()}},{"../analytics.js":12,"../utils":45}],39:[function(e,n,t){var p,l,g=e("../utils.js"),f=(e("../ajax.js"),e("../config.js")),m=!1,h=!1;n.exports=function(i,e){var r,o,a,s,t,d,c,u;p||(p=!0,e.on("gamkvp.getids",function(e,t){h?(t.push("i0a"),g.log("liveramp gamkvp.getids","a")):(t.push("i0n"),g.log("liveramp gamkvp.getids","n"))})),i.defer&&!m?(m=!0,g.log("LR deferring load"),i.defer(g.wrapAsync(function(){g.log("LR resuming load"),n.exports(i,e)}))):i.active&&!i.active()?g.log("LR disabled"):(g.log("LR enabled"),i.domain&&(l=i.domain),h=g.cr("idl_env"),g.cr("adb_lrs"),e.on("unit.config",function(e,t){if(!h){var n=g.cr("_lr_env");if(!n)return;c(n)}h&&(g.log("Set lre ID on unit",h,t),t.set("userId.idl_env",h),t.set("userIdAsEids.liveramp",{source:"liveramp.com",uids:[{id:h,atype:3}]}))}),s=a=o=r=!1,t=0,d=function(){window.ats?(g.log("LR: ATS library found",s),r=!1,a&&(g.log("LR: Setting additonal configs"),window.ats.setAdditionalData(s)),u()):o?(g.log("LR: Not found"),r=!1):(r=d,i.load_ats||(g.log("LR: ats not loaded yet, check #",t),10<(t+=1)?(g.log("LR: ats took too long to load"),o=!(r=!1),d()):setTimeout(d,500)))},c=function(e,t){h=e,g.cw("idl_env",h,5,l)},u=function(){h?g.log("LR: Fetch skipped, envelope exists"):(g.log("LiveRamp fetch ats"),window.ats.retrieveEnvelope(g.wrapAsync(function(e){e?(g.log("LR: Found envelope (ats)",e),c(JSON.parse(e).envelope)):g.log("LR: No envelope yet. Will try later")})))},f.afterConsent(function(e){if(!e||!e.gdprApplies||e.consentString){if(i.load_ats){if(!i.configuration_id)return void g.log("LR: No configuration Id ");g.log("LR: Loading ATS script"),t=i.configuration_id,n=g.wrapAsync(function(){window.ats||(g.log("LR: ATS script load fail"),o=!0),r&&r(a)}),g.load("https://ats-wrapper.privacymanager.io/ats-modules/"+t+"/ats.js",n).onerror=n}var t,n;i.direct_mode?i.params?(a=!0,(t=e&&e.gdprApplies?1:0)&&e.vendorData&&e.vendorData.tcfPolicyVersion,(n="function"==typeof i.params?i.params():i.params).id?(g.log("LR: ats_config_params",n),s=Object.assign(s,n),i.use_ats&&(t&&(s.consentString=e.consentString,s.consentType="gdpr"),d())):g.log("LR: No pii detected, exiting")):g.log("LR: No params passed in"):(g.log("LR: Using detect mode"),u())}}))}},{"../ajax.js":11,"../config.js":14,"../utils.js":45}],40:[function(t,e,n){function i(e){r=e,o.thread(function(){t("../analytics.js").meta("i6",r)})()}var r,o=t("../utils"),a=t("../ajax"),s=t("../config"),d="sharedid";i("N"),e.exports=function(e,t){e.use_pubcid&&(d="pubcid_sharedid");var n=o.cr(d);n&&i("C"),t.on("gamkvp.getids",function(e,t){n?t.push("i6y"):t.push("i6n")}),t.on("unit.config",function(e,t){n&&(t.set("userId.sharedid",n),t.set("userIdAsEids.sharedid",{source:"sharedid.org",uids:[{id:n,atype:1,ext:{third:""}}]}))}),n||s.afterConsent(function(e){var t="",e={url:"https://id.sharedid.org/id"+(t=e&&e.gdprApplies?"?gdpr=1&gdpr_consent="+e.consentString:t),method:"GET",parseResponseJson:!0,withCredentials:!0};a(e,function(e,t){e?i("E"):t.sharedId&&("00000000000000000000000000"===t.sharedId?(i("O"),o.cw(d,"",-1)):(n=t.sharedId,o.cw(d,n,1825),i("A")))})})}},{"../ajax":11,"../analytics.js":12,"../config":14,"../utils":45}],41:[function(d,e,t){var c=d("./utils.js"),u=d("./config.js");e.exports=function(r,o){function a(e,t){if(e.pub_active){var n,i=u.libSettings("pub");if(!i)return c.log(s,"pub check deferred"),n=!1,void t.on("pub.config",c.wrapAsync(function(){n||(n=!0,a(e,t))}));if(!e.pub_active(i))return void c.log(s,"inactive due to pub check")}if(e.active&&!e.active())return c.log(s,"inactive");r.track_as&&c.thread(function(){d("./analytics.js").mod(r.track_as)})(),c.log(s,"instantiating"),o(e,t)}var s=r.name||"summodhuh";return a}},{"./analytics.js":12,"./config.js":14,"./utils.js":45}],42:[function(e,t,n){var a=e("./utils.js");function i(e){var t=this,n=e.url,i=e.config,r=e.id,o=e.callback,e=e.loaded;this.url=n,this.config=i,this.handlers={},this.id=r,this.loaded=e,this.cmd=[],this.push=function(e){"function"!=typeof e?a.err("Commands given to Renderer.push must be wrapped in a function"):t.loaded?e.call():t.cmd.push(e)},this.callback=o||function(){t.loaded=!0,t.process()},a.load(n,this.callback,!0)}i.install=function(e){return new i({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded})},i.prototype.getConfig=function(){return this.config},i.prototype.setRender=function(e){this.render=e},i.prototype.setEventHandlers=function(e){this.handlers=e},i.prototype.handleVideoEvent=function(e){var t=e.id,e=e.eventName;"function"==typeof this.handlers[e]&&this.handlers[e](),a.log("Prebid Renderer event for id "+t+" type "+e)},i.prototype.process=function(){for(;0<this.cmd.length;)try{this.cmd.shift().call()}catch(e){a.err("Error processing Renderer command: ",e)}},t.exports=i},{"./utils.js":45}],43:[function(e,t,n){function m(t){var e="GET"===t.method&&("object"==typeof t.data?b.toqs(t.data,!0):t.data),e={method:t.method,url:"GET"===t.method&&e?[t.url,"?",e].join(""):t.url,withCredentials:!1!==(t.options&&t.options.withCredentials),parseResponseJson:void 0===t.parseResponseJson||t.parseResponseJson,data:"POST"===t.method&&("object"==typeof t.data?JSON.stringify(t.data):t.data),contentType:(t.options||{}).contentType,headers:(t.options&&t.options||{}).customHeaders};return d.libSettings().ajaxraw&&(e.rawProcessor=function(e){d.libSettings().ajaxraw(t,e)}),e}function i(e,t){var n=(t=t.config.size.split("x"))[0],n=(2*(t=t[1])<n?["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;}",".native-flex{display:flex;flex-direction:column;height:",t,"px;}",".native-flex-container{display:flex;flex-direction:row;flex:1}",".native-flex-content{display:flex;flex-direction:column;flex:7}",".native-image{background-image:url(",e.image.url,");flex:1;margin-right:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-flex">','<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-flex-container">','<div class="native-image"></div>','<div class="native-flex-content">','<div class="native-title">',e.title,"</div>",'<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</div>","</div>","</div>","</a>"]:["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;display:flex;flex-direction:column;height:",t,"px;}",".native-image{background-image:url(",e.image.url,");flex:2;margin-bottom:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-title">',e.title,"</div>",'<div class="native-image"></div>','<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</a>"]).join("");return n+=["<script>",'var container=Array.from(document.getElementsByTagName("script")).pop().parentElement,','body=container.querySelector(".native-body"),','body2=container.querySelector(".native-body2");',"if(container.clientHeight-container.scrollHeight)",'body.innerText="";','body2.innerText="";',"<\/script>"].join("")}function r(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,t){var t=t.split("="),n=t[0],t=t[1];return/\[\]$/.test(n)?(e[n=n.replace("[]","")]=e[n]||[],e[n].push(t)):e[n]=t||"",e},{}):{}}function o(e,t){var n=document.createElement("a"),e=(t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e),t&&t.decodeSearchAsString);return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:e?n.search:r(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}var a,s,h=e("./ajax.js"),b=e("./utils.js"),d=e("./config.js"),e=e("./renderer.js"),v={auction:void 0,gdpr_consent_object:void 0},y=function(e,t){return(t.unit.settings&&t.unit.settings.nativeTemplate||i)(e,t)},_={convertOrtbRequestToProprietaryNative:function(e){return e},createEidsArray:function(){var e=v.auction.findUnit(function(){return 1}),e=e&&e.toPrebidUIDs();return e&&e.userIdAsEids},JSEncrypt:0,sha256:0,formatQS:function(e){return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return t+"[]="+e}).join("&"):t+"="+e[t]}).join("&")},findIndex:function(e,t){return e.indexOf(t)},getWindowFromDocument:function(e){return e?e.defaultView:null},getRefererInfo:function(){var e=b.url();return{referer:e.href,stack:[e.href],reachedTop:window.top===window,numIframes:0|!(window.top===window),domain:e.domain,page:e.href,topmostLocation:e.href,canonicalUrl:null}},mergeDeep:function(){var e=arguments[0];if(e&&"object"==typeof e)for(var t=1;t<arguments.length;++t){var n=arguments[t];if(n&&"object"==typeof n)for(var i in n){var r=typeof n[i];switch(r="object"===r&&Array.isArray(n[i])?"array":r){case"array":e[i]=(e[i]||[]).concat(n[i]);break;case"object":e[i]=_.utils.mergeDeep(e[i]||{},n[i]);break;default:e[i]=n[i]}}}return e},isPlainObject:function(e){return b.isobj(e)},getGptSlotInfoForAdUnitCode:function(t){var e;return(e=window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots?find(window.googletag.pubads().getSlots(),function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}):e)?{gptSlot:e.getAdUnitPath(),divId:e.getSlotElementId()}:{}},parseUrl:function(e,t){var n=document.createElement("a"),e=(t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e),t&&"decodeSearchAsString"in t&&t.decodeSearchAsString);return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:e?n.search:r(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}},getValue:function(e,t){return e[t]},buildUrl:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":"+e.port:""))+(e.pathname||"")+(e.search?"?"+_.formatQS(e.search||""):"")+(e.hash?"#"+e.hash:"")},isBoolean:function(e){},getParameterByName:function(e){return b.qs(e)||""},getAdUnitSizes:function(e){var t,n;if(e)return t=[],e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)?(n=e.mediaTypes.banner.sizes,Array.isArray(n[0])?t=n:t.push(n)):Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes)),t},parseQueryStringParameters:function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=t+"="+encodeURIComponent(e[t])+"&");return n},getKeys:function(e){return Object.keys(e)},insertElement:function(e,t,n,i){n=(t=t||document).getElementsByTagName(n||"head"),t=(n=n.length?n:t.getElementsByTagName("body"))[0];if(t)return t.insertBefore(e,i?null:t.firstChild)},getDataFromLocalStorage:function(e){if(window.localStorage)return window.localStorage.getItem(e)},inIframe:function(){return!b.url().is_top},_map:function(n,i){var r;return n?"function"==typeof n.map?n.map(i):(r=[],b.each(n,function(e,t){r.push(i(e,t,n))}),r):[]},deepAccess:b.deepAccess,deepSetValue:function(e,t,r){return t.split(".").reduce(function(e,t,n,i){return n===i.length-1?e[t]=r:e[t]=e[t]||{}},e)},getTopWindowUrl:function(){return b.url().href},getWindowSelf:function(){return window.self},getWindowTop:function(){return window.top},isArray:function(e){return Array.isArray(e)},parseSizesInput:function(e){return e.map(function(e){return e.join("x")})},parseGPTSingleSizeArray:function(e){if(Array.isArray(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1]))return e.join("x")},_each:b.each,cookiesAreEnabled:function(e){if(!e)return b.cookies;e(b.cookies)},logError:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Error |"),b.log.apply(null,e)},logWarn:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Warning |"),b.log.apply(null,e)},logMessage:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Message |"),b.log.apply(null,e)},logInfo:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Info |"),b.log.apply(null,e)},getBidIdParameter:function(e,t){return t&&t[e]||""},getUniqueIdentifierStr:(s=0,function(){return++s}),convertCamelToUnderscore:function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},convertTypes:function(i,r){return b.each(i,function(e){var t=i[e],n=i[e];r[e]="function"==typeof t?n(n):"string"===t?n&&n.toString():"number"===t?Number(n):n,isNaN(r[e])&&delete r[e]}),r},createTrackPixelHtml:b.pixelh,isEmpty:function(e){if(e){if(Array.isArray(e)||"string"==typeof e)return!e.length;for(var t in e)if(e.hasOwnProperty(t))return!1}return!0},transformBidderParamKeywords:function(e){var n=[];return b.each(e,function(e,t){t={key:t};Array.isArray(e)&&(t.value=e.map(function(e){return e+""})),null!=e&&(t.value=[e+""]),t.hasOwnProperty("value")&&n.push(t)}),n},tryAppendQueryString:function(e,t,n){return n?e+(t+"="+encodeURIComponent(n))+"&":e},isAllowZeroCpmBidsEnabled:function(){return!0},isFn:function(e){return"function"==typeof e},isStr:function(e){return"string"==typeof e},isEmptyStr:function(e){return""===e},assign:b.assign,isInteger:Number.isInteger||function(e){return Math.floor(e)===e&&isFinite(e)},isNumber:function(e){return"number"==typeof e},groupBy:function(e,n){return e.reduce(function(e,t){return(e[t[n]]=e[t[n]]||[]).push(t),e},{})},deepClone:function i(r){return Object.keys(r||{}).reduce(function(e,t){var n={}.toString.call(r[t]).slice(8,-1);return e[t]="Array"===n||"Object"===n?i(r[t]):"Date"===n?new Date(r[t].getTime()):"RegExp"===n?new RegExp(r[t]):r[t],e},Array.isArray(r)?[]:{})},flatten:function(e,t){return e.concat(t)},chunk:function(e,i){return e.reduce(function(e,t,n){return n%i?e[e.length-1].push(t):e.push([t]),e},[])},fill:function(e,t){for(var n=[];n.length<t;n.push("object"==typeof e?_.utils.deepClone(e):e));return n},getMaxValueFromArray:Function.apply.bind(Math.max,0),getMinValueFromArray:Function.apply.bind(Math.min,0),isArrayOfNums:function(e,t){return e.length===(t||e.length)&&e.reduce(function(e,t){return e&&"number"==typeof t},!0)},generateUUID:b.genUUID,getBidRequest:function(e,t){for(var n=0;n<t.length;++n)for(var i=t[n],r=0;r<i.bids.length;++r){var o=i.bids[r];if(o.bidId===e||o.adId===e||o.bid_id===e)return o}b.err("shimGetBidRequestFail",e)},triggerPixel:function(e){b.uspi("S2S",e)},uniques:function(e,t,n){return n.indexOf(e)===t},contains:function(e,t){return 0<e.length&&-1!==e.indexOf(t)},getOrigin:function(){return b.url()},getDNT:function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},getCookie:b.cr,isGptPubadsDefined:function(){return window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots},isSlotMatchingAdUnitCode:function(t){return function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}},verify:null,_each:b.each,urlUtils:{parse:o},getUniqueIdentifierStr:function(){return++a},url:{type:a=0,parse:o,format:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(_.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}},BANNER:"banner",VIDEO:"video",NATIVE:"native",ADPOD:"adpod",OUTSTREAM:"outstream",INSTREAM:"instream",config:{DynamicPrefix:!0,getLegacyFpd:function(r){var t;if("object"==typeof r)return t={},Object.keys(r).forEach(function(i){var e="site"===i?"context":i;t[e]="context"===e||"user"===e?Object.keys(r[i]).filter(function(e){return"data"!==e}).reduce(function(e,t){var n;return"ext"===t?_.utils.mergeDeep(e,r[i][t]):((n={})[t]=r[i][t],_.utils.mergeDeep(e,n)),e},{}):r[i]}),t},config:{userSync:{syncsPerBidder:5,syncEnabled:!0,pixelEnabled:!0,iframeEnabled:!0}},getConfig:function(e){switch(e){case"pageUrl":return b.url().href;case"bidderTimeout":return v.auction.max_ms;case"consentManagement.cmpApi":return v.gdpr_consent_object.cmpApi;case"rubicon.singleRequest":return!0;case"ortb2":return{};case"publisherDomain":return window.location.origin;case"priceGranularity":return"custom";case"yahoossp.endpoint":return"https://c2shb.ssp.yahoo.com/bidRequest";case"customPriceBucket":return{buckets:(d.libSettings().bid_strategy||"").split(",").map(function(e){var e=e.split(":"),t=e[1].split("-").map(Number);return{precision:2,increment:e[0],min:t[0],max:t[1]}})};default:return b.deepAccess(_.config.config,e)}},bidders:null,js:null,setDefaults:function(e){if("object"!=typeof e)return b.err("defaults must be an object, received",e);b.assign(_.config.config,e)},vastXml:null,vastUrl:null,align:null,closeButton:null,collapse:null,label:null,position:null,rubicon:null},parse:o,parseDomain:function(e,t){var n=(t=t||{}).noLeadingWww||!1,t=t.noPort||!1;try{if(e&&!/\w+:\/\//.exec(e)){var i=window.location.protocol;try{i=window.top.location.protocol}catch(e){}e=/^\/\//.exec(e)?i+e:i+"//"+e}console.log("url after proto",e),e=new URL(e)}catch(e){return void console.log("url creation had error",e)}return e=t?e.hostname:e.host,e=n&&e.startsWith("www.")?e.substring(4):e},registerBidder:function(){},userSync:{registerSync:function(e,t,n){var i="image"===e||"img"===e?b.uspi:"iframe"===e?b.uspf:void 0;i?i(t,n):b.err(["Unknown sync type: ",e," from ",t].join(""))}},includes:function(e,t){return-1!==e.indexOf(t)},find:function(e,t){return e.filter(t)[0]},Renderer:e,loadExternalScript:function(e,t){b.log("module "+t+"is loading external JavaScript"),b.load(e,null,!0)},ajax:function(e,i,t,n){h(b.assign({},n,{data:t,url:e}),function(e,t,n){e?i&&i.error&&i.error(e.err,e):i&&i.success?i.success(t,n):i&&i(t)})},getIabSubCategory:function(){return null},auctionManager:{getAdUnits:function(){return v.PBJSObjects.bidRequests}},getStorageManager:function(e){var a=b.wrapAsync(function(e,t,n){n=n();return"function"==typeof t?t(n):n});return{findSimilarCookies:function(e,t){return a("findSimilarCookies",t,function(){return[]})},getCookie:function(e,t){return a("getCookie",t,function(){})},setCookie:function(e,t,n,i,r,o){return a("setCookie",o,function(){})},cookiesAreEnabled:function(e){return a("cookiesAreEnabled",e,function(){return!1})},hasLocalStorage:function(e){return a("hasLocalStorage",e,function(){})},localStorageIsEnabled:function(e){return a("localStorageIsEnabled",e,function(){return!1})},setDataInLocalStorage:function(e,t,n){return a("setDataInLocalStorage",n,function(){})},getDataFromLocalStorage:function(e,t){return a("getDataFromLocalStorage",t,function(){return null})},removeDataFromLocalStorage:function(e,t){return a("removeDataFromLocalStorage",t,function(){})}}},getGlobal:function(){return AdBridg.globals},CONSTANTS:{EVENTS:{AUCTION_DEBUG:"a",AD_RENDER_FAILED:"b"}},events:{on:function(e){b.log("PBJS Event subscription",e)}},hasDeviceAccess:function(){return!0},hasPurpose1Consent:b.wrapAsync(function(){return!v.gdpr_consent_object||!v.gdpr_consent_object.gdprApplies||!0===b.deepAccess(v.gdpr_consent_object,"vendorData.purpose.consents.1")}),validateStorageEnforcement:function(e,t,n,i){i({valid:!1})},bidderSettings:{get:function(e,t){}}};_.utils=_,t.exports={wrap:function(g){var f={};return function(c,u,e,p,l){this.gdprSupport=g.gdprSupport,this.uspSupport=g.uspSupport,this.settings=e,this.buildPrebidParams=function(e){return t=g.unitIDKey,n=g.floorKey,i=g.floorStr,e=e,delete(r=b.deepAssign({},e.params)).adjust,r[t]=e.bidder_unit_id,"string"==typeof r[t]&&-1===["undertone","yieldmo","pubmatic","conversant","deepintent","kargo","saambaa"].indexOf(e.bidder_name)&&r[t].match(/^\d+$/)&&(r[t]=parseInt(r[t])),e.bidder_name.match(/^(index|ix)/)&&(r.bidFloorCur="USD"),"string"==typeof r.size&&(r.size=b.sizeStrToArr(r.size)),n&&(r[n]=e.min_cpm,i&&(r[n]=r[n].toFixed(2))),!r.video&&e.mediaTypes.video&&(r.video=b.copy(e.mediaTypes.video)),r;var t,n,i,r},this.getPrebidReqCtr=function(e){return(f[e]||0)+1},l&&l.on("pub.spa_pv_shutdown",function(){f={}}),this.onBidWon=b.wrapAsync(function(e){var t=g.spec;"function"==typeof t.onBidWon&&(b.log("Adapter onBidWon",c,e),t.onBidWon(e))}),this.onSetTarget=b.wrapAsync(function(e){var t=g.spec;"function"==typeof t.onSetTargeting&&(b.log("Adapter onSetTarget",c,e),t.onSetTargeting(e))}),this.execute=function(i){function r(){Object.keys(d).map(function(e){return d[e]}).filter(function(e){return!e.found}).forEach(function(e){e.unit.addEmptyBid(e.config)}),l.trigger("bidder.done",o,c,i),b.mock()?b.logl("mock","bypass usync"):[].concat(g.spec.getUserSyncs&&b.wrapAsync(g.spec.getUserSyncs,void 0,g.spec)({syncsPerBidder:5,syncEnabled:!0,pixelEnabled:!0,iframeEnabled:!0},s.map(function(e){return{body:e||{}}}))||[]).forEach(function(e){_.userSync.registerSync(e.type,u,e.url)})}var n,t={},o=(i.eachBidRequest(c,function(e){e=e.toPrebidAdUnitCode();t[e]||(t[e]=!0,f[e]=(f[e]||0)+1)}),v.auction=i,v.gdpr_consent_object=p,v.alias=c,i.toPrebidBidderReq(c)),e=(l.trigger("bidder.requested",o,i),g.floorKey&&g.floorStr&&o.bids.forEach(function(e){e.params[g.floorKey]=String(e.params[g.floorKey])}),o.bidderCode.match("Sovrn")&&b.each(o.bids,function(e){e.params&&e.params.size&&(e.mediaTypes.banner.sizes=[e.params.size])}),o.start=(new Date).getTime(),{bidderRequest:o,bidRequests:o.bids}),a=(v.PBJSObjects=e,b.each(e.bidRequests,function(e){try{g.spec.isBidRequestValid(e)}catch(e){b.log("Adapter BR invalid",e)}}),b.wrapAsync(g.spec.buildRequests,void 0,g.spec)(e.bidRequests,e.bidderRequest)),s=(Array.isArray(a)||(a=[a]),[]),d=(n={},i.eachBidRequest(c,function(e,t){n[t.id]={config:t,unit:e}}),n);b.mock()?(e=Math.floor(Math.random()*(i.ajax_ms-250))+50,b.logl("mock","bypass bidders",e),setTimeout(r,e)):("function"==typeof g.spec.onTimeout&&i.onHalt(function(){var t=[];b.each(o.bids,function(e){i.getBidRequest(e.bidId).responses.length||(e={bidId:e.bidId,bidder:e.bidder,adUnitCode:e.adUnitCode,auctionId:e.auctionId,params:[e.params],timeout:i.max_ms},b.log("AdBridg bid object for timeout calculation",c,e),t.push(e))}),t.length&&(b.log("Adapter onTimeout",c,t),g.spec.onTimeout(t))}),a.map(m).forEach(function(e,n){e.max_ms=i.ajax_ms,h(e,b.wrapAsync(function(e,t){s.push(t),!e&&t&&(e=b.wrapAsync(g.spec.interpretResponse,void 0,g.spec)({body:t},a[n]),(e=Array.isArray(e)?e:[e].filter(Boolean)).forEach(function(e){var t,n,i=d[e.requestId];if(!i)return b.err(["unrequested response from",c,":",JSON.stringify(e)].join(" "));e.requestTimestamp=o.start,e.responseTimestamp=(new Date).getTime(),e.timeToRespond=e.responseTimestamp-e.requestTimestamp,t=e,n=i.config,t.ad||t.native||t.renderer||(t.vastUrl||t.vastXml)&&n.renderer?(t=i,(n=e).currency&&!n.originalCurrency&&(n.originalCurrency=n.currency),t.config.params&&(n.params=[b.copy(t.config.params)]),e={creative:n.ad||(n.native?y(n.native,t):void 0),vastUrl:n.vastUrl,vastXml:n.vastXml,cpm:n.cpm,width:n.native?0|t.config.size.split("x")[0]:n.width,height:n.native?0|t.config.size.split("x")[1]:n.height,extras:{dealid:n.dealId||n.dealid,crid:n.creativeId||n.creativeid,ttl:n.ttl,cur:n.currency,nr:n.netRevenue,mediaType:n.mediaType},render:n.renderer&&n.renderer.render&&n.renderer.render.bind(n.renderer,n),rawbid:n},i.unit.addBid(i.config,e)):i.unit.addEmptyBid(i.config),i.found=!0})),s.length===a.length&&r()}))}))}}},polyfills:_}},{"./ajax.js":11,"./config.js":14,"./renderer.js":42,"./utils.js":45}],44:[function(e,t,n){var C=e("./utils"),k=e("./analytics"),T=e("./modules"),O=e("./config");t.exports=function(e){this.id=0,this.alias="",this.size="",this.other_sizes=[],this.min_cpm=0,this.max_ms=0,this.dom_ad_class="",this.settings={},this.unique_id=C.genID("U"),this.uuid=C.genUUID(),this.auction=!1,this.all_sizes=[],this.original_sizes=[];var y=this,s={},_={},p=0,r={},w=[],l={},i=!1,x=!1,t=!1,I=!1,g=!1,o=[],S=(this.init=function(){e&&(y.set(e),T.trigger("unit.init_config",y))},this.restrictSizesTo=function(e){y.all_sizes=y.original_sizes,C.logl("sz","Unit",y.alias,"restrict sizes to",JSON.stringify(e)," old _allowed_sizes",JSON.stringify(g)),g=e,o.length&&y.allowSizes(o);for(var t,n,i=[],r=y.all_sizes.length-1;0<r;--r)-1===g.indexOf(y.all_sizes[r])&&(t=y.all_sizes[r],y.all_sizes.splice(r,1),0<=(n=y.other_sizes.indexOf(t))&&y.other_sizes.splice(n,1),i.push(t));a(),C.logl("sz","Unit",y.alias,"removed sizes",JSON.stringify(i),"allowed sizes",JSON.stringify(g)),T.trigger("unit.restrict_sizes",y,g,i)},this.allowSizes=function(e){o=[],C.each(e,function(e){C.logl("sz","Unit size added",y.alias,e),g&&-1==g.indexOf(e)&&g.push(e),-1==o.indexOf(e)&&o.push(e),-1==y.other_sizes.indexOf(e)&&y.other_sizes.push(e),-1==y.all_sizes.indexOf(e)&&y.all_sizes.push(e),a()}),C.logl("sz","Unit",y.alias,"allowed sizes",o),T.trigger("unit.allow_sizes",y,o)},this.configure=function(e){var t,n=C.qs("adb_maxms");for(t in n&&(e.max_ms=n),e)"unique_id"!=t&&"auction"!=t&&("settings"==t?C.each(e[t],function(e,t){y.settings[t]=e}):y.hasOwnProperty(t)&&"function"!=typeof y[t]&&(y[t]=JSON.parse(JSON.stringify(e[t]))));y.all_sizes=[y.size].concat(y.other_sizes),y.original_sizes=[].concat(y.all_sizes),C.logl("sz","Unit definition original_sizes=",JSON.stringify(y.original_sizes),"size=",JSON.stringify(y.size),"other_sizes=",JSON.stringify(y.other_sizes)),C.qs("adb_force_bidder")&&(y.min_cpm=0),a(),T.trigger("unit.config",y)},this.addBidder=function(e,t){l[e]=t},this.eachBidder=function(e){for(var t in l)l.hasOwnProperty(t)&&s[t]&&e(t,l[t])},this.hasBidReqConf=function(){return 0<p},this.addBidReqConf=function(d,e,t){var c,u={id:C.genID("BR"),uuid:C.genUUID(),unit:y,adjust:1,bidder_name:d,bidder_id:e.bidder_id,bidder_unit_id:e.bidder_unit_id,min_cpm:y.min_cpm,size:y.size,other_sizes:y.other_sizes,all_sizes:[],responses:[],late_responses:[],test:e.test,toPrebid:function(){var e=y.auction.getBdrReqId(d),t=y.toPrebidUIDs(),n=C.copy(y.settings.mediaTypes),i=f(n,u.all_sizes),r=(n.banner&&(n.banner.sizes=i),y.toPrebidAdUnitCode()),o=(c=c||l[d].getPrebidReqCtr(r),y.get("imp_ctr")||1),a=y.get("gpt_slot"),s={},a=(a&&(a=a.getAdUnitPath(),s={ext:{tid:y.uuid,data:{adserver:{name:"gam",adslot:a},pbadslot:a=a+"#"+r},gpid:a}}),C.assign({src:"client",adUnitCode:r,adbconfig:y.alias,auctionId:y.auction.uuid,bidId:u.id,bidder:d,bidderRequestId:e,bidderRequestsCount:c,bidderWinsCount:0,bidRequestsCount:o,mediaTypes:n,params:u.params,sizes:i,transactionId:y.uuid,ortb2Imp:s,renderer:y.settings.renderer},t)),r=u.mediaTypes.native||u.nativeParams;return r&&(a.nativeParams=r),a}};if(l[d]){C.deepAssign(u,y.settings,l[d].settings,e.settings),u.params=C.deepAssign({},l[d].settings,e.settings),1!=u.adjust&&(u.min_cpm=Number((u.min_cpm/u.adjust).toFixed(2)));var n=[],i=!1;if("function"==typeof e.mutate&&n.push({n:"BidReq",f:e.mutate}),"function"==typeof l[d].mutate&&n.push({n:"Bidder",f:l[d].mutate}),C.each(n,function(e){e.f(u,t)||(i=!0,C.log(e.n+" mutate rejected BR: ",u))}),!i)if(u.test&&!C.qsab(d,u.bidder_id,!0))C.log("Test configuration skipped: ",u);else{if(e.settings.size?(u.other_sizes=[],u.size=e.settings.size):"string"==typeof u.other_sizes&&(u.other_sizes=u.other_sizes?u.other_sizes.split(","):[]),g){var r=[];0<=g.indexOf(u.size)&&r.push(u.size);for(var o=0;o<u.other_sizes.length;++o){var a=u.other_sizes[o];0<=g.indexOf(a)&&r.push(a)}if(!r.length)return void(g.length&&C.log("Unit ",y.alias," skipped configuration for ",u.bidder_name," because it does not support any of these sizes: ",g));u.size=r[0],u.other_sizes=r.slice(1)}u.all_sizes=[u.size].concat(u.other_sizes),C.logl("sz","Bid request sizes:",u.bidder_name,u.bidder_unit_id,{size:u.size,other:u.other_sizes,all:u.all_sizes}),s[d]||(s[d]=[]),s[d].push(u),_[u.id]=u,++p,u.params=l[d].buildPrebidParams(u),T.trigger("unit.config_brc",y,u)}}else C.err("BR missing bidder",d)},this.eachBidReqConf=function(e,t){"function"==typeof e&&(t=e,e=!1),e?C.each(s[e],t):C.each(_,t)},this.getBidReqConf=function(e){return _[e]||!1},this.getBid=function(e){for(var t=0;t<w.length;++t)if(w[t].id===e)return w[t];return!1},this.set=function(e,t){if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&y.set(n,e[n]);else r[e]=t},this.setImpData=function(e,t,n){var i=y.get("adb_imp_data")||{};i[e]=n&&i[e]||t,y.set("adb_imp_data",i)},this.get=function(e){return r[e]},this.halt=function(){x=!0},this.onReady=function(e){t=e,S()},function(){I&&t&&setTimeout(function(){t(y)},0)}),A=(this.markEmpty=function(e){y.eachBidReqConf(e,function(e){e.responses.length||y.addEmptyBid(e)})},this.addEmptyBid=function(e){if("number"==typeof e||"string"==typeof e){var t=e;if(!(e=_[t]))return void C.err("Could not find bid req: ",t)}e.responses.length||x&&e.late_responses.length||y.addBid(e,{})},function(e,t){return e._bid_cpm==t._bid_cpm&&e.width==t.width&&e.height==t.height&&e.creative==t.creative}),n=(this.bidRendered=function(e,t){var n,i=e.config.bidder_name;l[i]?((n=e.pbjsBid).status="rendered",l[i].onBidWon&&l[i].onBidWon(n),T.trigger("bid.render",e,t)):C.err("uBidRender.notFound",i,y.id)},this.gptTargetSet=function(e){var t=e.config.bidder_name;l[t]?((e=e.pbjsBid).status="targetingSet",l[t].onSetTarget&&l[t].onSetTarget(e)):C.err("gptTargetSet.notFound",t,y.id)},!(this.addBid=function(e,t){if(!e||!y.getBidReqConf(e.id))return C.err("Bid request from ",e.bidder_name,"not found on unit",y.id),!1;t.cpm&&(t.cpm=parseFloat(t.cpm)),T.trigger("bid.mutate_raw",t,e);var n=t.config&&t.config.unit&&t.config.unit.unique_id,i=Number(parseFloat(t.cpm).toFixed(2))||0,r=Number(t.width)||0,o=Number(t.height)||0,a=t.creative||"",s=t.creative_url||"",d=t.extras||{},c=t.force||!1,u=t.render,p=t.vastUrl,l=t.vastXml,g=t.rawbid,f=(i||(t.empty=!0),Number((i*e.adjust).toFixed(2))),m=e.min_cpm,h=(!n&&0<m&&f<m&&(f=0),O.libSettings().pubchkcreativefn),h=(a&&"function"==typeof h&&!h(e,t,O.libSettings())&&(C.log("Creative blocked: ",e.bidder_id,r,o,f,d),f=0),n?t.ts:C.dts()),b=n?t.ms:Math.round(h-y.auction.ts),v=y.id+"."+C.genID("B"),v={id:v=g&&g.adId?g.adId:v,ms:b,ts:h,config:e,viable:!x,cpm:f,_min_cpm:m,_bid_cpm:i,force:c,width:r,height:o,creative:a,creative_url:s,extras:d,render:u,vastUrl:p,vastXml:l,rawbid:g};return n&&((v._origin=t)._pool||(t._pool=[]),t._pool.push(v)),j(v),function(e,t){for(var n=0;n<e.responses.length;++n)if(A(t,e.responses[n]))return!0;for(n=0;n<e.late_responses.length;++n)if(A(t,e.late_responses[n]))return!0;return!1}(e,v)?(C.log("Unit ",y.alias,"ignored duplicate bid from ",e.bidder_name," on BR ",e.id,": ",v.ms,v.width+"x"+v.height,v.cpm.toFixed(2)),!1):(b=v.viable?"":"late ",!v.cpm&&0<v._bid_cpm?(h=1!=e.adjust?" * "+e.adjust+" = "+Number((v._bid_cpm*e.adjust).toFixed(2)):"",b+="below-floor ("+v._bid_cpm+h+" < "+v._min_cpm+") "):t.empty&&(b+="empty "),C.log("Unit",y.alias,"got",b+"bid"+(n?" (pooled from "+n+")":""),"from",e.bidder_name,"on BR",e.id,": ",v.ms,v.width+"x"+v.height,v.cpm.toFixed(2)),T.trigger("bid.ready",v),v.pbjsBid&&E(v),v.viable?(e.responses.push(v),w.push(v),T.trigger("bid.response",v),function(){if(!x){for(var e in _){e=_[e];if(e.responses&&!e.responses.length)return}I=!0,S()}}()):(e.late_responses.push(v),k.lateBid(v)),v)})),a=(this.getWinner=function(){return n||(n=!0,"function"==typeof O.libSettings().filter_bid&&C.wrapAsync(O.libSettings().filter_bid),C.each(w,function(e){T.trigger("bid.auction_close_filter",y,e),e.blocked&&(e.cpm=0,C.log("Bid filtered out",y.alias,e.config.bidder_name,"reason:",e.blocked));var t,n=e.width+"x"+e.height;!e.cpm||!g||-1!=g.indexOf(n)||O.libSettings().bypass_size_check&&-1!=O.libSettings().bypass_size_check.bidder.indexOf(e.config.bidder_name)?(t=e.cpm&&(!i||e.cpm>i.cpm||e.cpm==i.cpm&&.5<Math.random()),i&&i.force&&(t=!1),(e.force||t)&&(i=e)):(t=e._origin?"(pooled bid from "+e._origin.config.unit.unique_id+")":"",C.log("Unit ",y.alias,"rejected",t,e.config.bidder_name,"invalid size",n),e._origin||C.err("U",y.id," B",e.config.bidder_id+"."+e.config.bidder_unit_id,n,g))}),i&&(C.log("Unit ",y.alias,"set winner to ",i.config.bidder_name,i._origin&&"(pooled bid from "+i._origin.config.unit.unique_id+")"||"",i.width+"x"+i.height,i.cpm.toFixed(2)),T.trigger("bid.auction_winner",i))),i},this.toPrebidUIDs=function(){var i=!1;return C.each(r,function(e,t){var n=t.match(/^userId\.(.+)$/),t=t.match(/^userIdAsEids\.(.+)$/);!n&&!t||i||(i={userId:{},userIdAsEids:[]}),n&&(i.userId[n[1]]=e),t&&i.userIdAsEids.push(e)}),i&&i.userIdAsEids.sort(function(e,t){return e.name<t.name?1:-1}),i&&i.userId.pubcid&&(i.crumbs={pubcid:i.userId.pubcid}),i||{}},function(){y.settings.mediaTypes||(y.settings.mediaTypes={}),y.settings.mediaTypes.banner={sizes:y.all_sizes.filter(Boolean).map(C.sizeStrToArr)}}),f=function(e,t){for(var n=e.banner?C.copy(e.banner.sizes):[],i=n.length-1;0<=i;--i)-1===t.indexOf(n[i].join("x"))&&(debugit=!0,n.splice(i,1));if(e.video){var r=e.video.playerSize;C.isarr(r[0])||(r=[r]);for(i=0;i<r.length;++i){var o=r[i].join("x");-1===t.indexOf(o)&&n.push(r[i])}}return n},d=function(e,t){return C.toRange(e,t).kv.split("-").shift()},c=function(e){var t=!e&&"0.00";return{pbLg:t||d(e,".5:0-5"),pbMg:t||d(e,".1:0-20"),pbHg:t||d(e,".01:0-20"),pbDg:t||d(e,".01:0-2.99;.05:3-7.5;.5:8-20"),pbAg:t||d(e,".05:0-4.95;.1:5-9.5;.5:10-20"),pbCg:t||d(e,O.libSettings().bid_strategy)}},j=function(e){var t,n=e.config.toPrebid();e.rawbid&&e.viable?(t=C.deepAssign({currency:"USD",originalCurrency:"USD"},e.rawbid,{source:"client",statusMessage:"Bid available",cpm:e.cpm,originalCpm:e._bid_cpm,bidderCode:n.bidder,bidder:n.bidder,requestId:n.bidId,adUnitCode:n.adUnitCode,adbconfig:n.adbconfig,auctionId:n.auctionId,adId:e.id,mediaType:e.rawbid.mediaType,creativeId:e.rawbid.creativeId,netRevenue:e.rawbid.netRevenue,width:e.width,height:e.height}),e.pbjsBidO=C.deepAssign({},t),e.pbjsBid=t):e.pbjsNoBid=n},E=function(e){var t=e.width+"x"+e.height,n=c(e.pbjsBid.cpm),i=e.rawbid&&e.rawbid.adserverTargeting||{};C.assign(e.pbjsBid,n,{size:t,adserverTargeting:C.assign({hb_bidder:e.pbjsBid.bidderCode,hb_adid:e.pbjsBid.adId,hb_pb:n.pbMg,hb_size:t,hb_source:"client",hb_format:e.rawbid.mediaType||"banner"},i)})};this.toPrebidAdUnitCode=function(){return y.get("dom_id")||y.unique_id},this.toPrebidAdUnit=function(){var e=C.copy(this.settings.mediaTypes),t=f(e,this.all_sizes),n=this.toPrebidUIDs(),i=[];return this.eachBidReqConf(function(e){i.push(C.assign({bidder:e.bidder_name,params:e.params},n))}),{code:this.toPrebidAdUnitCode(),adbconfig:this.alias,sizes:t,mediaTypes:e,bids:i,transactionId:this.uuid}},this.toPrebidResults=function(){var t={noBids:[],bidsReceived:[],winningBids:[],prebidWinningBids:[]};return C.each(w,function(e){e.pbjsBid&&(t.bidsReceived.push(e.pbjsBid),"rendered"===e.pbjsBid.status?t.winningBids.push(e.pbjsBid):"targetingSet"===e.pbjsBid.status&&t.prebidWinningBids.push(e.pbjsBid)),e.pbjsNoBid&&t.noBids.push(e.pbjsNoBid)}),t},this.init()}},{"./analytics":12,"./config":14,"./modules":18,"./utils":45}],45:[function(e,t,x){function n(e){return{loading:1,interactive:2,complete:3}[e=e||document.readyState]||0}function r(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),n}function i(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)}x.wrapAsync=function(e,t,n){return function(){try{return e.apply(n||this,arguments)}catch(e){t?t(e):x.err("Caught AsyncErr: ",e)}}},x.thread=function(t){return t=x.wrapAsync(t),function(){var e=arguments;setTimeout(function(){t.apply(this,e)},0)}},x.attempt=function(e,t){try{return e()}catch(e){}return t};var o,a=1,s=(new Date).getTime(),d=function(){try{s-=Math.round(performance.now()),d=function(){return n()+"T"+Math.round(performance.now()).toString(36)},o=[a,s.toString(36),d()]}catch(e){d=function(){return n()+"T"+Math.max(0,(new Date).getTime()-s).toString(36)},o=[a=0,s.toString(36),n()+"T0"]}},c=(d(),x.on=r,x.off=i,r(document,"readystatechange",function(){3==n()&&i(document,"readystatechange",arguments.callee),o.push(d())}),x.perfts=function(){return d()},x.pgts=function(){return o},x.dts=function(){return a?Number(performance.now().toFixed(2)):Number(Math.max(0,(new Date).getTime()-s).toFixed(2))},0);x.genID=function(e){return(e||"")+ ++c+Math.random().toString(16).substr(2)},x.vp=function(){var e,t,n,i=document;try{e=window.innerWidth,t=window.innerHeight,n=window.pageYOffset,window_x=window.pageXOffset}catch(e){}return{w:e||i.documentElement&&i.documentElement.clientWidth||i.body&&i.body.clientWidth||0,h:t||i.documentElement&&i.documentElement.clientHeight||i.body&&i.body.clientHeight||0,y:n||i.body&&i.body.scrollTop||0,x:window_x||i.body&&i.body.scrollLeft||0}},x.cr=function(e){e=String(document.cookie).match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return e=e?decodeURIComponent(e[2]):""},x.cw=function(e,t,n,i){exp_string=0<(n=n||1)?"max-age="+86400*n:"max-age=-99999";n=e+"="+encodeURIComponent(t)+";"+exp_string+";path=/;domain=";n+=i||window.location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1"),document.cookie=n},x.lr=function(t,e){var n,i,r="",o="";try{(o=localStorage.getItem(t))&&(e||(o=JSON.parse(o)),n=(new Date).getTime(),(i=e?new Date(localStorage.getItem(t+"_exp")).getTime():parseInt(o.e||"0",36))&&i<n?x.logl("ls","LS expired",t,o,i,n):(x.logl("ls","LS read",t,o,i,n),r=e?o:o.v))}catch(e){x.logl("ls","LS read fail",t,o,e)}return r},x.lw=function(t,n,i,r){try{var e,o,a=r?n:{v:n};i&&(e=(new Date).getTime(),o=Math.round(e+Math.floor(864e5*i)),r?localStorage.setItem(t+"_exp",new Date(o).toUTCString()):(a.s=e.toString(36),a.e=o.toString(36))),r||(a=JSON.stringify(a)),localStorage.setItem(t,a),x.logl("ls","LS written",t,n,r,i,a)}catch(e){x.logl("ls","LS write fail",t,n,r,i,e)}},x.sr=function(t){try{return sessionStorage.getItem(t)}catch(e){x.logl("ss","SS read fail",t,e)}return""},x.sw=function(t,n){try{sessionStorage.setItem(t,n),x.logl("ss","SS written",t,n)}catch(e){x.logl("ss","SS write fail",t,n,e)}};try{x.cw("adbct",1),x.cookies=!!x.cr("adbct"),x.cw("adbct","",-1)}catch(e){}try{x.safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}catch(e){}x.https=!("https:"!=location.protocol),x.genUUID=function(e){try{return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,x.genUUID)}catch(e){return 0}},x.qs=function(e){e=new RegExp(e+"=([^&]+)");return(String(window.location.search).match(e)||[]).pop()};function u(e){return 61<e?u(e/62|0)+u(e%62):35<e?String.fromCharCode(e+29):9<e?String.fromCharCode(e+87):-1<e?e+"":e<0?"-"+u(-e):"NaN"}var p,l,g=x.qs("adb_force_bidder"),f=x.qs("adb_allow_bidder"),m=[],h=(g&&"*"!=g&&(m=m.concat(g.split(","))),f&&"*"!=f&&(m=m.concat(f.split(","))),x.qsab=function(e,t,n){return t=String(t),"*"==f||"*"==g||(!n&&!g||0<=m.indexOf(t)||0<=m.indexOf(e))},x.qsappend=function(e,t,n,i){return i&&!t?"":"&"+e+"="+(t=n?encodeURIComponent(t):t)},x.toqs=function(e,n){var i="";return x.each(e,function(e,t){x.isarr(e)?x.each(e,function(e){i+=x.qsappend(t+"[]",e,n)}):i+=x.qsappend(t,e,n)}),i.replace(/^\&/,"")},x.each=function(e,t){if(e&&0!==e.length)if(e.length)for(var n=0;n<e.length;++n)t(e[n],n);else for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},x.sizeStrToArr=function(e){if(!x.isarr(e)){if("string"==typeof e)return e.split("x").map(Number);x.err("BadSizeConvert",e)}return e},x.resize_element=function(e,t,n){e.style.width&&String(e.style.width).replace("px","")==t||(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")==n||(e.style.height=n+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=n&&e.setAttribute("height",n)},x.resize_iframe=function(e,t,n,i){try{for(var r=e.document.getElementsByTagName("iframe")||[],o=0;o<r.length;++o)try{if(r[o].contentDocument===t)return x.resize_element(r[o],n,i),void(e!==top&&x.resize_iframe(e.parent,e.document,n,i))}catch(e){}}catch(e){x.err("Error resizing window to "+n+"x"+i,e)}x.err("Failed to resize window to "+n+"x"+i)},x.url=function(){var t,n,i,r,o,e=top,a=window,s=document,d=!1;try{d=window.parent===window}catch(e){}try{t=e.location.host,n=e.location.pathname+e.location.search+e.location.hash,href=e.location.href,i=e.document.referrer,r=e.document.title,o=e.location.protocol}catch(e){try{t=(String(s.referrer).match(/^[^\/]+\/\/([^\/]+)/)||[]).pop(),n=(String(s.referrer).match(/^[^\/]+\/\/[^\/]+(\/.+)$/)||[]).pop(),o=(String(s.referrer).match(/^https?\:/)||[]).pop(),href=s.referrer,r=i=""}catch(e){}}return t&&n||(t=a.location.host,n=a.location.pathname+a.location.search+a.location.hash,o=a.location.protocol,href=a.location.href,i=s.referrer),{domain:t,page:n,href:href,referrer:i,title:r,is_top:d,protocol:o}},x.random=function(e,t){return Math.floor(Math.random()*(t-e))+e},x.pixel=function(e,t){t=t?(new Date).getTime():Math.random();document.createElement("img").src=e+"&rnd="+t},x.pixelh=function(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;"><img src="'+encodeURI(e)+'"></div>':""},x.pixelf=function(e,t,n){return e?(t&&(e=encodeURI(e)),"<iframe "+(n=n?'sandbox="'+n+'"':"")+' id="'+x.genID("IPF")+'" src="'+e+'" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0p;width:0p;display:none;" scrolling="no"></iframe>'):""},[]),b={},v=(x.uspf=x.wrapAsync(function(e,t){x.logl("px","UserSync qF",e,b[e],5,t),b[e]=(b[e]||0)+1,5<b[e]||h.push({a:e,t:"f",u:t})}),x.uspi=x.wrapAsync(function(e,t){x.logl("px","UserSync qI",e,b[e],5,t),b[e]=(b[e]||0)+1,5<b[e]||h.push({a:e,t:"i",u:t})}),!0),y=!0,_=500,w=!(x.cfusp=function(e,t,n){e||(v=!1),t||(y=!1),n&&(_=n),x.log("UserSync set: ",{image:v,iframe:y,delay:_})}),I=(x.cfuspfn=function(e){w=e},x.wrapAsync(function(){if(clearTimeout(p),h.length){var e=Math.floor(Math.random()*h.length),t=h[e];if(h.splice(e,1),w&&!w(t))return x.logl("px","UserSync not sent (pub): ",t),I();if(y&&"f"==t.t){e=document.createElement("div");e.innerHTML=x.pixelf(t.u,!1,"allow-scripts allow-same-origin"),document.body.appendChild(e.firstChild),x.logl("px","UserSync (F): ",t.a,t.u)}else{if(!v||"i"!=t.t)return x.logl("px","UserSync not sent (!): ",t),I();document.createElement("img").src=t.u,x.logl("px","UserSync (I): ",t.a,t.u)}p=setTimeout(I,50)}})),S=(x.qdusp=function(){if(x.logl("px","UserSync Q",h,_,v,y,x.safari,x.cookies),x.safari||!x.cookies)return x.logl("px","UserSync skipped",x.safari,x.cookies);clearTimeout(p),p=setTimeout(I,_)},{}),A=(x.load=function(e,t,n,i){var r;if(t=t?x.wrapAsync(t):function(){},!n||!S[e])return n&&(S[e]||(S[e]={ready:!1,cbs:[t]}),t=function(){S[e].ready=!0,x.each(S[e].cbs,function(e){e()})}),(r=document.createElement("script")).type="text/javascript",r.async=!0,r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t())}:r.onload=t,r.src=e,(i||document.body||document.head).appendChild(r),r;S[e].ready?t():S[e].cbs.push(t)},x.loadCached=function(e,t){x.load(e,t,!0)},x.iiframe=function(e){var t=document.createElement("iframe");return t.id=x.genID("IIF"),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",t.src=void 0===e?"about:blank":e,t.style.display="none",t},x.prepend=function(e,t){return"string"==typeof t&&(t=document.createElement(t)),e.prepend?e.prepend(t):e.children.length?e.insertBefore(t,e.children[0]):e.appendChild(t),t},x.isarr=function(e){return"[object Array]"===Object.prototype.toString.call(e)},!(x.isobj=function(e){return"[object Object]"===Object.prototype.toString.call(e)})),j=(x.isdebug=function(){return A},x.setdebug=function(e){e&&(A=e,x.lw("adb_debug",A))},x.log=function(){if(A){var e=Array.prototype.slice.apply(arguments);e.unshift("AdBridg | "+x.dts().toFixed(2));try{console.log.apply(console,e)}catch(e){}}},x.logl=function(e){A==e&&x.log.apply(x,["log::",e].concat(Array.prototype.slice.apply(arguments,[1])))},x.setdebug(x.qs("adb_debug")||x.lr("adb_debug")),[]),E=(x.err=function(){var t=Array.prototype.slice.apply(arguments);if(A){var e=[].concat(t);e.unshift("AdBridg | "+x.dts().toFixed(2)+" | ERROR: ");try{console.log.apply(console,e)}catch(e){}}l&&!(t=l(t))||j.length&&x.each(j,function(e){e.apply(null,t)})},x.onerr=function(e){j.push(e)},!(x.wraperr=function(e){l=e})),C=(x.mock=function(e){return e&&(String(e).match(/^(native|small|large)$/)?(x.log("-- system mock engaged: ",e),E=e):x.err("MockValueInvalid",e)),E},x.mock(x.qs("adb_mock")),!1),k=[],T=(x.onrec=function(e){for(C=e;k.length;)C(k.shift())},x.rec=function(e){C?C(e):k.push(e)},{}),O=(x.toRange=function(e,t){e=Math.round(100*e);for(var n=function(e){if(!T[e=e||".05:.05-10"]){T[e]=[];for(var t=e.split(","),n=0;n<t.length;++n){var i=t[n].split(":"),r=i[1].split("-"),i={increment:Math.round(100*parseFloat(i[0])),upper:Math.round(100*parseFloat(r[1])),final:!1};n==t.length-1&&(i.final=i.upper-i.increment),T[e].push(i)}}return T[e]}(t),i=0;i<n.length;++i){var r,o,a=n[i];if(a.final&&e>=a.upper-a.increment)return{r:parseFloat(((a.final+a.increment)/100).toFixed(2)),kv:(a.final/100).toFixed(2)+"-"};if(!(e>=a.upper))return r=Math.floor(e/a.increment)*a.increment/100,o=(a=parseFloat((r+a.increment/100).toFixed(2)))-.01,{r:a,kv:Math.max(.01,r).toFixed(2)+"-"+o.toFixed(2)}}},x.b62=u,x.fb62=function(e){for(var t=0,n=e.length-1,i=n;0<=i;i--){var r=e.charCodeAt(i),o=i===n?1:Math.pow(62,n-i);if(96<r&&r<123)t+=o*(r-87);else if(64<r&&r<91)t+=o*(r-29);else{if(!(47<r&&r<58))return NaN;t+=o*(r-48)}}return t},x.dom=x.wrapAsync(function(e,t,n,i,r,o){O.add(e,t,n,i,r,o)}),x.undom=x.wrapAsync(function(e,t){O.remove(e,t)}),x.lzrescan=x.wrapAsync(function(e){O.rescan(e)}),new function(){function s(e,t){if(e.f&&!e.f(e,t,l))return x.logl("lz","Lazy blocked",e,l),!1;if(t.in){if(!e.x)return x.logl("lz","Lazy cannot measure el",e,t),!1;var n=document.getElementById(e.i);if(!n)return x.logl("lz","Lazy collapse check - cannot read el",e,t),!1;var i=(n||{}).parentNode;if(!i)return x.logl("lz","Lazy collapse check - cannot read parent",e,t),!1;var r=x.where(i);if(!r.in)return x.logl("lz","Lazy collapse check - parent invis",e,t,r),!1;r=document.createElement("span"),n=(r.style="position:absolute;display:block;width:1px;height:1px;",i.insertBefore(r,n),x.where(r));i.removeChild(r),x.logl("lz","Lazy collapse check - using replacement coords",JSON.stringify({coords:t,replacement:n})),t=n}return 0<e.d&&e.d<1?0===t.d&&(0===t.c.h||0===t.c.w)||t.v>e.d:t.d<=e.d}var t,d,c={},u=0,p=[],n=!1,i=!1,l=!1,g=(this.add=function(e,t,n,i,r,o){var a;e instanceof Node&&((a=e).id||(a.id=x.genID("adb_auto_")),e=a.id),c[e]=c[e]||[],c[e].push({c:i,d:t,t:n,i:e,f:r,x:o}),u+=1,g()},this.remove=function(e,t){var n,i=c[e]||[];if(t)for(n=i.length-1;0<=n;--n)i[n].c===t&&c[e].splice(n,1);for(t&&i.length||delete c[e],n=p.length-1;0<=n;--n)t&&p[n].c!==t||p.splice(n,1)},this.rescan=function(e){x.logl("lz","Lazy explicit rescan"),e&&(d=e),t=setTimeout(g,0)},r(window,"scroll",function(){l=!0,!t&&u&&(x.logl("lz","Lazy scroll wait",100),t=setTimeout(g,100))}),x.thread(function(){var a,e=x.dts();clearTimeout(t),t=!1,n||e-i<50?t=setTimeout(g,50):(n=!0,i=e,x.logl("lz","Lazy measure",e),a=[],x.each(c,function(e,t){var n=x.where(t);if(!n)return x.logl("lz","Lazy no dom",t);for(var i=e.length-1;0<=i;--i){var r=e[i],o=s(r,n);x.logl("lz","Lazy check",JSON.stringify({el:t,coords:n,reqdist:r.d,criteria:o,seenscr:l})),!o&&d&&(o=d(r,n))&&x.logl("lz","Lazy allowed",t),o&&(--u,e.splice(i,1),p.push(r),x.logl("lz","Lazy to duration",t))}e.length||a.push(t)}),x.each(a,function(e){delete c[e]}),e=function(e){for(var t=!1,n=p.length-1;0<=n;--n){var i=p[n],r=i.i;if(x.logl("lz","Lazy check time",i,r," has scroll event: ",l),i.tx){if(!s(i,x.where(r))){x.logl("lz","Lazy back to distance",r),i.tx=0,p.splice(n,1),c[r]=c[r]||[],c[r].push(i),u+=1;continue}}else i.tx=e+i.t;var o=i.tx-e;o<=0?(x.logl("lz","Lazy execute",r),p.splice(n,1),x.thread(i.c)(r)):t=t?Math.min(1+o,t):1+o}return t}(e)||100,p.length&&(x.logl("lz","Lazy duration wait",e),t=setTimeout(g,e)),n=!1)}))}),z=(x.obox=function(e,t){e={top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left),right:Math.min(e.right,t.right)};return e.width=Math.round(e.right-e.left),e.height=Math.round(e.bottom-e.top),e.area=Math.round(e.width*e.height),e},x.opct=function(e,t,n,i,r){var o=x.obox(t,{top:0,bottom:n.h,left:0,right:n.w}),a=o.area,s=a/(Math.round(t.width)*Math.round(t.height)),d={o:0,p:0,v:s,e:{}};if(a){var c,n=o.left+o.width/2,t=o.top+o.height/2,u={mm:[n,t],tl:[o.left+5,o.top+5],br:[o.right-5,o.bottom-5]},p=(7<=r&&(u.tm=[n,o.top+5],u.tr=[o.right-5,o.top+5],u.bl=[o.left+5,o.bottom-5],u.bm=[n,o.bottom-5]),9<=r&&(u.mr=[o.right,t],u.ml=[o.left,t]),[]);for(c in u)if(u.hasOwnProperty(c)){var l=u[c],g=document.elementFromPoint(l[0],l[1]);if(i&&g&&(((l=document.getElementById(i))===g||g.contains(l)||l.contains(g))&&(g=!1)),g&&g!==e&&!e.contains(g)&&!g.contains(e)){var f=x.obox(o,g.getBoundingClientRect()),m=0,h=0,b=g,v=b.parentNode;if(!v.contains(e)){for(m+=1;v.parentNode&&!v.parentNode.contains(e);)m+=1,v=v.parentNode;for(;v!==b;){for(var y=x.obox(o,v.getBoundingClientRect()),_=y.area==f.area,_=((y.area>f.area||_&&h<m)&&(f=y,g=v,h=m),v),w=0;w<v.children.length;++w)if(v.children[w]===b||v.children[w].contains(b)){--m,v=v.children[w];break}if(v===_)break}}if(-1===p.indexOf(g)&&(p.push(g),d.e[c]={el:g,p:f.area,o:f.area/a},d.p+=f.area,d.o=Math.min(1,d.p/a),d.v=d.o?(1-d.o)*s:s,1===d.o))break}}}return d},x.where=function(e,t,n){var i,r,o,a,s,d,c,u,p,l,g;return!!(e="string"==typeof e?document.getElementById(e):e)&&(i=e.getBoundingClientRect(),r=x.vp(),o=i.top,a=i.height,s=i.top+a,d="in_viewport",u=1,g=(c=0)<i.width&&0<a,p=0,(l=z(e))&&(p=1,d="unknown"),o<0?(c=s<0?Math.abs(s):0,d=((u=0<s&&g?s/a:0)?"partially_":"")+"above_viewport"):s>r.h?(c=o>r.h?o-r.h:0,d=((u=o<r.h&&g?(r.h-o)/a:0)?"partially_":"")+"below_viewport"):g||(u=0),g=null,{i:l,p:d,d:c,v:u,in:p,o:g=t&&u&&!p?x.opct(e,i,r,n):g,c:{vp:r,t:o,l:i.left,h:a,w:i.width,b:s}})},x.assign=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},x.copy=function(e){if(x.isarr(e)){for(var t=[],n=0;n<e.length;++n)t.push(x.copy(e[n]));return t}return"object"==typeof e?x.deepAssign({},e):e},x.deepAssign=function(e){if(!e)return e;for(var n=Object(e),t=1;t<arguments.length;t++)x.each(arguments[t],function(e,t){n[t]=x.copy(e)});return n},x.deepMerge=function(e){if(!e)return e;for(var n=Object(e),t=1;t<arguments.length;t++)x.each(arguments[t],function(e,t){n[t]="object"==typeof e?x.deepMerge(n[t]||{},e):x.copy(e)});return n},x.deepAccess=function(e,t,n){t=t.split(".").reduce(function(e,t){return(e||{})[t]},e);return t||void 0===n?t:n},x.deepEq=function(i,r,o,a){var e;return a=a||"",!!(o=o||[]).some(function(e){return e===a})||(!("function"!=typeof r||!r(i))||("object"!=typeof i||"object"!=typeof r||null==i||null==r?i===r||{p:a,o1:i,o2:r}:0===(e=Object.keys(Object.assign({},i,r)).reduce(function(e,t){var n=a?a+"."+t:t,t=x.deepEq(i[t],r[t],o,n);return t&&t.hasOwnProperty("p")&&t.hasOwnProperty("o1")&&t.hasOwnProperty("o2")?e.push(t):!0!==t&&(e=e.concat(t)),e},[])).length||e))},function(e){try{if(!e)return"no_dom_el";var t=window.getComputedStyle&&window.getComputedStyle(e)||{};if("none"==t.display)return"display_none";if("hidden"==t.visibility)return"vis_hidden"}catch(e){x.err("get_invis_fail")}return!1});x.dom_invisible=x.wrapAsync(function(e){var t=document.getElementById(e),n=z(t);if(n)return"el_"+n;for(var i=0;t.parentNode&&(t=t.parentNode)!==document.body;)if(i+=1,n=z(t))return"anc_"+i+"_"+n;return!1})},{}]},{},[16]);